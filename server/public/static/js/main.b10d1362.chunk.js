(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{123:function(e,t,a){e.exports=a.p+"static/media/logo.10c8593f.svg"},176:function(e,t,a){e.exports=a.p+"static/media/injector.168dc031.svg"},177:function(e,t,a){e.exports=a.p+"static/media/mold.b1894e2a.svg"},178:function(e,t,a){e.exports=a.p+"static/media/logo-dark.f159a8d1.png"},216:function(e,t,a){},296:function(e,t,a){},344:function(e,t,a){e.exports=a.p+"static/media/intro.135fbc8c.jpg"},345:function(e,t,a){e.exports=a.p+"static/media/about1.dec583f7.jpg"},346:function(e,t,a){e.exports=a.p+"static/media/about2.97981d66.jpg"},347:function(e,t,a){e.exports=a.p+"static/media/about3.02812765.jpg"},348:function(e,t,a){e.exports=a.p+"static/media/about4.c32c406b.jpg"},349:function(e,t,a){e.exports=a.p+"static/media/logo.78952398.png"},350:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAVBQTFRF////8/Pz29vb1tbW+fn519fXfHx8QUFBHBwcLy8v3dzZ/+eZ/+26//78/v7+p6enKSkpAAAA2dfR/9BI/8EV/+SU/f77qampFxcX2dfQ/9FH/7YA/8IU/+mv3t7eMTEx/9BJ/7gA/7oA/81E//noh4eH/7kA/8AO/+uw+Pj4s7Ozubm59fX1WFhY/9FI/7wF/+ab+/v7rq6uUlJSBAQE3d3d/70G/+iffX19EBAQLCws2traPDw8/8Qd/vPKhISEBgYG/7cA/7sA/9t0//77wcHBGRkZ2tfQ/9JF//ffcHBwHRwc2tfS/9Za/9Zg//ba/f//5ubmq6urg4ODlJSU6enpRERE2tnX//nf//3x7e3tioqKLS0t1dXV2dnZ5eXlV1dX1NTU9/f3aGhooqKiDg4OUVFRAgICPT09Hh4etra2o6OjtLS08PDw8vLyoaGhAp6M4AAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAD8SURBVDjLY2AYwoCRiZkFjzQrGzsHJxc3Dy92aT5+AUFBQQ4hYRFRMawKxCUEQQokpaRlZLHJy8kLghUIKSgqKatgUaAqCFOgpqSugSqnyaylraMLU6CnpKRvgCxtaGTMYcJpyo6kwMwc2esWlkBxK2sbmAJhJTVbOyTP2TsIoiiQ1HN0cnZBKHB1E0RV4C6l5uGJZIOXIKoCbx9fP/8AiFxgUHBIaBiaAo7wiEiIdFS0vINgTCwnuoI4qNHxCSZAbkxiDA4FSclgLm4FKakEFKQJpgOBIGciJ4QRw5QBYWRaQxRkpWQDQUpObg6EoZWnnQ9mGOVRK3UOCwAAoek8remBZVEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDMtMDdUMTU6MjI6NDcrMDA6MDAX6Wg+AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAzLTA3VDE1OjIyOjQ3KzAwOjAwZrTQggAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE0LTA1LTEyIFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ9yG7QAAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADE5Mg8AcoUAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMTky06whCAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTUxOTcyMTY3I89bNwAAAA90RVh0VGh1bWI6OlNpemUAMEJClKI+7AAAAFZ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL21udGxvZy9mYXZpY29ucy8yMDE5LTAzLTA3L2UxODRlNWEzMjUxZDg2ZDM2Y2E4MmE3YWY5ZTkxNGJiLmljby5wbmfA/GasAAAAAElFTkSuQmCC"},351:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAMxQTFRF////8fHx4eLi+vn3///++/v7p6enPDw8Njc54c2U/+aZ/v35qqqqDw8PAAAAHR4h3sFy/8AQ/+ej9vb219fX3t7eSEhI3sJ0/7sA/9FS0NDQUlJSFhYWeHh4Li4u3sJz/9Rc5ubmOjo6cHBwLS0t/8Yh/u692dnZzMzMnZ2dAwMDHR4f3tCm//HC/v/+8PDwfX19GhoaLy8vbm5uHR0ddnZ2BAQEJycnbGxs3d3ddXV1XV1do6OjXl5eX19fpaWle3t7cXFx6urq/v7+Ke5pUwAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAAEgAAABIAEbJaz4AAACBSURBVBjTY2AgBTAyMbMgcVnZ2Dk4ubgRAjy8fPwCgkJQnrCIqBgfH7+4hCSELyUtIysHFJCXUADzFZX4+JRVgAICqmpAw9Q1NLUgAto6unoM+gaGRsZ8EAETUaByUzM+cwuYgCVQwMraWtbG1s7W3sHa2tEJKODs7AwnSPIXAgAAOtMOgXa08DAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDMtMDdUMTU6MjI6NDcrMDA6MDAX6Wg+AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAzLTA3VDE1OjIyOjQ3KzAwOjAwZrTQggAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE0LTA1LTEyIFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ9yG7QAAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADE5Mg8AcoUAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMTky06whCAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTUxOTcyMTY3I89bNwAAAA90RVh0VGh1bWI6OlNpemUAMEJClKI+7AAAAFZ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL21udGxvZy9mYXZpY29ucy8yMDE5LTAzLTA3L2UxODRlNWEzMjUxZDg2ZDM2Y2E4MmE3YWY5ZTkxNGJiLmljby5wbmfA/GasAAAAAElFTkSuQmCC"},352:function(e,t,a){e.exports=a.p+"static/media/bg-showcase-1.d2bd7dec.png"},353:function(e,t,a){e.exports=a.p+"static/media/bg-showcase-2.9c5122b0.png"},354:function(e,t,a){e.exports=a.p+"static/media/bg-showcase-3.e9d2dab5.png"},374:function(e,t,a){e.exports=a(609)},429:function(e,t){},537:function(e,t,a){},538:function(e,t,a){},539:function(e,t,a){},540:function(e,t,a){},591:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){},608:function(e,t,a){},609:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),c=a(2),s=a(690),d=a(119),l=a(660),m=a(29),u=a(310),p=a(8),f=a.n(p),h=(a(379),a(59)),y=a(161),g=a(611),v=a(64),b=a.n(v),E=a(160),x=a.n(E),O=a(106),w=a.n(O),j=a(311),k=a.n(j),N=a(312),S=a.n(N),I=a(313),C=a.n(I),A=a(314),D=a.n(A),T=a(315),P=a.n(T),M=a(316),F=a.n(M),q=a(317),R=a.n(q),_=a(318),U=a.n(_),W=a(230),L=a.n(W),z=a(319),Y=a.n(z),B=a(320),H=a.n(B),V=a(321),J=a.n(V),Q=a(322),$=a.n(Q),G=a(323),X=a.n(G),Z=a(324),K=a.n(Z),ee=x.a,te=w.a,ae=k.a,ne=S.a,re=C.a,ie=D.a,oe=P.a,ce=F.a,se=R.a,de=U.a,le=L.a,me=Y.a,ue=(H.a,J.a),pe=$.a,fe=X.a,he=K.a,ye=a(325),ge=a(9),ve=a(39),be=a(7),Ee=function(e){var t=e.hooks,a=e.identity,n=e.hooksToAdd,r=t[a]||[];Array.isArray(r)||(r=[r]);var i=n||[];return Array.isArray(i)||(i=[]),Object(be.a)({},t,Object(ge.a)({},a,[].concat(Object(ve.a)(r),Object(ve.a)(i))))},xe=function e(t){var a=t.field,n=t.requiredKey,r=t.formItem,i=t.setFormErrors,o=t.OR,c=void 0!==o&&o,s=!0,d=ee(r,a.identity);if(Array.isArray(n)){var l=te(n,(function(t){return e({field:a,requiredKey:t,formItem:r,setFormErrors:i,OR:!c})}));return c?-1!==l.indexOf(!0):-1===l.indexOf(!1)}if(("boolean"===typeof n?n:!!ee(r,n))&&(ce(d)||""===d)&&(i((function(e){return Object(be.a)({},e,Object(ge.a)({},a.identity,!0))})),s=!1),a.handleValidate){var m=a.handleValidate({data:{target:{name:a.identity,value:d}},item:r});"string"===typeof m&&(i((function(e){return Object(be.a)({},e,Object(ge.a)({},a.identity,m))})),s=!1)}return s},Oe=function e(t){var a=t.fields,n=t.formItem,r=t.setFormErrors,i=!0;return ae(a,(function(t){var a=!0;a=Array.isArray(t)?e({fields:t,formItem:n,setFormErrors:r}):xe({field:t,requiredKey:t.required,formItem:n,setFormErrors:r}),i&&(i=a)})),i},we=function(e){var t=e.data,a=e.path;return ee(t,"".concat(a,".hex"))||ee(t,"".concat(a,".rgb"))||ee(t,"".concat(a,".hsv"))},je=a(3),ke=a.n(je),Ne=a(11),Se=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.client,e.prev=1,a.get("config.machine.status")){e.next=8;break}return e.next=5,a.service("configs").find();case 5:n=e.sent,r=n.data,ae(r,(function(e){return a.set("config.".concat(e.name),e)}));case 8:if(a.get("actionType.init")){e.next=15;break}return e.next=11,a.service("production_order_action_types").find({query:{$populateAll:!0}});case 11:i=e.sent,o=i.data,ae(o,(function(e){return a.set("actionType.".concat(e.id),e)})),a.set("actionType.init",!0);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){var t=e.client,a=e.type;return ee(t.get("config.productionOrder.eventType.".concat(a)),"value")},Ce=function(e){var t=e.date,a=f()(t);return{year:a.year(),month:a.month(),date:a.date(),hour:a.hour(),minute:a.minute(),second:a.second()}},Ae=function(e){var t=e.data,a=ee(t,"lastReading.0")||ee(t,"mostRecentEvent.0")||[];return 60*(ee(a,"tr")>0&&ee(a,"r.length")||0)/(ee(a,"tr")||1)},De=function(e){var t=e.privileges,a=void 0===t?[]:t,n=e.permissions,r=void 0===n?{}:n;return!a.length||re(a,(function(e,t){return e||!!r[t]}),!1)},Te=function(e){var t=e.payload,a=void 0===t?{}:t,n={};return ae(["writeMasterData","readMasterData","crudAdminData","crudUserData","writeActiveProductionOrders","writeScheduledStopProductionOrders","openProductionOrders","writeProductionOrderEvents","editProductionOrderEvents","readProductionOrders","readProductionOrderReports","readPendingWaste","writePendingWaste","editPendingWaste"],(function(e){return n[e]=function(e){var t=e.payload,a=e.privilege;return re(t.roles,(function(e,t){return e||t[a]}),!1)}({payload:a,privilege:e})})),n},Pe=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o,c;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.client,n=t.email,r=t.password,i=t.companyUUID,!(n&&r&&i)){e.next=8;break}return e.next=4,a.authenticate({strategy:"local",email:n,password:r,companyUUID:i});case 4:o=e.sent,localStorage.setItem("companyUUID",i),e.next=11;break;case 8:return e.next=10,a.authenticate({strategy:"jwt",accessToken:localStorage.getItem("monitorprod-jwt"),companyUUID:localStorage.getItem("companyUUID")});case 10:o=e.sent;case 11:return e.next=13,a.passport.verifyJWT(o.accessToken);case 13:return c=e.sent,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,e.next=3,a.logout();case 3:localStorage.removeItem("companyUUID");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=a(326),qe=a.n(Fe),Re=a(327),_e=a.n(Re),Ue=a(328),We=a.n(Ue),Le=a(329),ze=a.n(Le),Ye=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("companyUUID"),n=t.data,r=t.params,t.data=Object(be.a)({},n,{companyUUID:a}),r.query=Object(be.a)({},r.query,{companyUUID:a}),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=qe()();Be.set("cloudURL","https://www.monitorprod.com.br");var He=ze()(Be.get("cloudURL"));Be.configure(_e()(He,{timeout:1e5})).configure(We()({storageKey:"monitorprod-jwt",storage:window.localStorage})).hooks({before:{all:[Ye]}}),Be.socket=He;var Ve,Je=r.a.createContext(Be),Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,a=void 0===t?[]:t,r=e.privileges,i=void 0===r?[]:r,o=Object(n.useContext)(Je),s=Object(n.useState)(),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(!0),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)({}),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(!1),x=Object(c.a)(E,2),O=x[0],w=x[1],j=JSON.stringify(i),k=JSON.stringify(a);return Object(n.useEffect)((function(){var e=JSON.parse(j);(function(){var t=Object(Ne.a)(ke.a.mark((function t(){var a,n;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,t.next=4,Pe({client:o});case 4:return a=t.sent,t.next=7,Se({client:o});case 7:m(a),n=Te({payload:a}),b(n),e.length?w(De({privileges:e,permissions:n})):w(!0),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),m();case 16:return t.prev=16,h(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})));return function(){return t.apply(this,arguments)}})()()}),[o,j,k]),{session:l,loading:f,permissions:v,hasAccess:O}},$e=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o,c;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.hooks,n=void 0===a?{}:a,r=t.identity,i=t.data,o=!0,!n[r]){e.next=7;break}return c=n[r],Array.isArray(c)||(c=[c]),e.next=7,Promise.all(te(c,function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({data:i});case 2:a=e.sent,o&&(o=a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=$e,Xe=function(e){var t=e.model,a=e.fields,r=e.data,i=e.hooks,o=void 0===i?{}:i,s=Object(n.useContext)(Je),d=Object(n.useState)({}),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)(Object(be.a)({},r)),f=Object(c.a)(p,2),h=f[0],y=f[1],g=Object(n.useState)({}),v=Object(c.a)(g,2),b=v[0],E=v[1],x=Object(n.useState)(),O=Object(c.a)(x,2),w=O[0],j=O[1],k=Object(n.useState)(),N=Object(c.a)(k,2),S=N[0],I=N[1],C=Object(n.useState)(t),A=Object(c.a)(C,2),D=A[0],T=A[1],P=Object(n.useState)(a),M=Object(c.a)(P,2),F=M[0],q=M[1];Object(n.useEffect)((function(){I(),E({}),y(Object(be.a)({},r))}),[r]);var R=fe(F),_=JSON.stringify(o),U=JSON.stringify(h),W=Object(n.useCallback)((function(e){var t=e.target;(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=ie(R,{identity:t.name})||{}).handleChange&&a.handleChange({client:s,data:{target:t},field:a,item:JSON.parse(U),handleChange:W}),y((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,ce(t.value)||"boolean"===a.type||"checklist"===a.type||"table"===a.type||"image"===a.type||"content"===a.type||"loginName"===t.name?t.value||null:me(t.value)))})),e.next=5,Ge({hooks:o,data:t,identity:"afterChange"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,U,_]),L=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(!0),I(),E({}),e.prev=4,a=!0,Oe({fields:F,formItem:h,setFormErrors:E})||(a=!1),e.next=9,Ge({hooks:o,data:h,identity:"beforeSubmit"});case 9:if(e.sent){e.next=11;break}a=!1;case 11:if(a){e.next=14;break}return j(!1),e.abrupt("return");case 14:if(n={id:h.id},ae(R,(function(e){var t=e.identity;return n[t]=h[t]})),!n.id){e.next=24;break}return console.log("patch",n),e.next=20,s.service(D).patch(n.id,n);case 20:return e.next=22,Ge({hooks:o,data:h,identity:"afterSubmit"});case 22:e.next=31;break;case 24:return console.log("create",n),e.next=27,s.service(D).create(n);case 27:return r=e.sent,u(r),e.next=31,Ge({hooks:o,data:r,identity:"afterSubmit"});case 31:e.next=38;break;case 33:e.prev=33,e.t0=e.catch(4),console.log("upsert error:",e.t0),ae(e.t0.errors,(function(e){var t=e.path,a=e.validatorKey,n=se(t,"_")[0],r=ie(R,{identity:n});"not_unique"===a&&r&&z({identity:r.identity,value:"J\xe1 existe um registro com esse ".concat(r.text)})})),I(e.t0);case 38:return e.prev=38,j(!1),e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[4,33,38,41]])})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=e.identity,a=e.value;return E((function(e){return Object(be.a)({},e,Object(ge.a)({},t,a))}))};return{newItem:m,formItem:h,formErrors:b,handleChange:W,handleSubmit:L,handleFormErrors:z,loading:w,errors:S,setModel:T,setFields:q}},Ze=function(e){var t=e.model,a=e.item,r=e.hooks,i=void 0===r?{}:r,o=Object(n.useContext)(Je),s=Object(n.useState)(a),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(t),x=Object(c.a)(E,2),O=x[0],w=x[1];Object(n.useEffect)((function(){b()}),[l]);return{item:l,handleDelete:function(e){var t=e.id;return Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Voc\xea quer apagar o item?")){e.next=2;break}return e.abrupt("return");case 2:return b(),h(!0),e.prev=4,console.log("delete",l),e.next=8,Ge({hooks:i,item:l,identity:"beforeDelete"});case 8:return e.next=10,o.service(O).remove(t||l.id);case 10:return e.next=12,Ge({hooks:i,item:l,identity:"afterDelete"});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),b(e.t0);case 17:return e.prev=17,h(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})))},loading:f,errors:v,setModel:w,setItem:m}},Ke=a(66),et=function(e){var t=e.model,a=e.query,r=void 0===a?{}:a,i=e.timeCarousel,o=Object(n.useContext)(Je),s=Object(n.useState)([]),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(t),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(r),k=Object(c.a)(j,2),N=k[0],S=k[1],I=Object(n.useState)(),C=Object(c.a)(I,2),A=C[0],D=C[1],T=JSON.stringify(N),P=Object(Ke.useDebouncedCallback)(Object(n.useCallback)((function(){var e=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(),e.prev=2,e.next=5,o.service(O).find({query:JSON.parse(T)});case 5:t=e.sent,a=t.data,m(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),b(e.t0);case 13:return e.prev=13,h(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();i?setTimeout((function(){e()}),1e3*i):e()}),[o,O,T,A]),300),M=Object(c.a)(P,1)[0];return Object(n.useEffect)((function(){M()}),[M]),{list:l,loading:f,errors:v,reload:Object(n.useCallback)((function(){D(Date.now())}),[]),setModel:w,setQuery:S}},tt=function(e){var t=e.model,a=e.id,r=e.query,i=void 0===r?{}:r,o=Object(n.useContext)(Je),s=Object(n.useState)({}),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(t),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(i),k=Object(c.a)(j,2),N=k[0],S=k[1],I=Object(n.useState)(),C=Object(c.a)(I,2),A=C[0],D=C[1],T=JSON.stringify(N);return Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),b(),e.prev=2,"new"===a||"list"===a||!a){e.next=10;break}return e.next=6,o.service(O).get(a,{query:JSON.parse(T)});case 6:t=e.sent,m(t),e.next=11;break;case 10:m();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),b(e.t0);case 16:return e.prev=16,h(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}})()()}),[o,O,a,A,T]),{item:l,loading:f,errors:v,reload:Object(n.useCallback)((function(){D(Date.now())}),[]),setModel:w,setQuery:S}},at=function(e){var t=e.model,a=e.query,r=void 0===a?{}:a,i=Object(n.useState)(Object(be.a)({$populateAll:!0,$sort:{name:1}},r)),o=Object(c.a)(i,2),s=o[0],d=o[1],l=et({model:t,query:s}),m=l.list,u=l.loading,p=l.errors,f=l.reload,h=l.setQuery,y=JSON.stringify(r);Object(n.useEffect)((function(){d((function(e){return Object(be.a)({},e,{},JSON.parse(y))}))}),[y]);var g=JSON.stringify(s);Object(n.useEffect)((function(){h(JSON.parse(g))}),[g,h]);var v=Ze({model:t,hooks:{afterDelete:[function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()]}}),b=v.handleDelete,E=v.loading,x=v.errors,O=Object(n.useState)({}),w=Object(c.a)(O,2),j=w[0],k=w[1];return{list:m,setFindQuery:d,handleDelete:function(e){var t=e.id;return function(){k((function(e){return Object(be.a)({},e,Object(ge.a)({},t,!0))})),b({id:t})()}},deleteRef:j,deleteLoading:E,findLoading:u,loading:E||u,errors:x||p}},nt=function(e){var t=e.ip,a=Object(n.useContext)(Je),r=Ie({client:a,type:"active"}),i=Ie({client:a,type:"undefined"}),o=we({data:a.get("actionType.".concat(r)),path:"color"}),s=we({data:a.get("actionType.".concat(i)),path:"color"}),d=Object(n.useState)(s),l=Object(c.a)(d,2),m=l[0],u=l[1],p="http://".concat(t,":3030");return Object(n.useEffect)((function(){var e=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 5e3,t=!1,e.next=4,new Promise((function(e,a){var n=setTimeout((function(){t=!0,e(s)}),5e3);fetch("".concat(p,"/use_status_sensor")).then((function(){clearTimeout(n),t||e(o)})).catch((function(){return e(s)}))}));case 4:a=e.sent,u(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),1e4);return function(){clearInterval(t)}}),[o,p,s]),{status:m,href:"".concat(p,"/use_status_sensor")}},rt=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),s=o[0],d=o[1],l=et({model:"sensors"}).list;return Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,n,i,o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie(l,(function(e){return e.ip&&e.machineId&&-1===a.indexOf(e.id)}))||{},n="http://".concat(t.ip,":3030"),5e3,i=!1,e.next=6,new Promise((function(e,a){var r=setTimeout((function(){i=!0,e({sensorId:t.id})}),5e3);fetch("".concat(n,"/use_status_sensor")).then((function(){clearTimeout(r),i||e({url:"http://".concat(t.ip,":3030/realtime-dashboard")})})).catch((function(){return e({sensorId:t.id})}))}));case 6:(o=e.sent).sensorId?r((function(e){return[].concat(Object(ve.a)(e),[o.sensorId])})):d(o.url);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,a]),{sensorsURL:s}},it=h.a,ot=y.a,ct=h.b,st=y.b,dt=h.d,lt=h.g,mt=g.a,ut=b.a,pt=ee,ft=te,ht=ae,yt=ne,gt=re,vt=ie,bt=oe,Et=ce,xt=se,Ot=de,wt=le,jt=me,kt=ue,Nt=pe,St=fe,It=he,Ct=ye,At=Ct({integerSeparator:".",decimal:","}),Dt=Ee,Tt=Oe,Pt=we,Mt=Se,Ft=Ie,qt=Ce,Rt=Ae,_t=De,Ut=Te,Wt=Pe,Lt=Me,zt=Qe,Yt=Xe,Bt=Ze,Ht=et,Vt=tt,Jt=at,Qt=nt,$t=rt,Gt=a(673),Xt=a(665),Zt=a(666),Kt=a(697),ea=a(44),ta=a(238),aa=a(655),na=a(696),ra=a(693),ia=a(657),oa=mt((function(e){return{button:{},navbar:{marginRight:e.spacing(2),color:"inherit"},profile:{backgroundColor:"unset",color:e.palette.common.white,boxShadow:"none"},header:{borderRadius:4,padding:"0 !important",margin:"0 0 0 ".concat(e.spacing(1),"px"),fontSize:".75rem","& button, & a":{padding:"0 ".concat(e.spacing(1),"px !important"),margin:"0 !important"}},toolbar:{minHeight:"unset",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px")},table:{borderRadius:4,minHeight:"unset",backgroundColor:e.palette.secondary.main,"& span":{color:"black !important"}},lowercase:{textTransform:"lowercase !important"},icon:{marginRight:e.spacing(1)},submit:{borderRadius:4,backgroundColor:e.palette.secondary.main,color:e.palette.common.black},delete:{borderRadius:4,backgroundColor:e.palette.primary.delete,color:e.palette.common.white},editAction:{color:e.palette.primary.main},deleteAction:{color:e.palette.primary.delete},clearAction:{position:"absolute",right:0,bottom:0},chatSupport:{marginRight:e.spacing(1),marginTop:"3px",color:"inherit"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.text,n=e.icon,i=e.avatar,o=e.type,c=void 0===o?"button":o,s=e.variants,d=void 0===s?"":s,l=e.fullWidth,m=void 0!==l&&l,u=e.onClick,p=void 0===u?function(){}:u,f=Object(ea.a)(e,["classes","text","icon","avatar","type","variants","fullWidth","onClick"]),h="icon"===c?ta.a:aa.a,y={};return m&&(y.fullWidth=!0),r.a.createElement(na.a,{className:ut(ft(xt(d," "),(function(e){return t[e]}))),title:"icon"===c?a:""},r.a.createElement("div",null,r.a.createElement(h,Object.assign({type:c&&"icon"!==c?c:"button","aria-label":a,variant:"contained",className:ut(t.button,ft(xt(d," "),(function(e){return t[e]}))),onClick:p},y,f),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{mdUp:!0},r.a.createElement(ia.a,{className:t.lowercase},n)),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(ia.a,{className:ut(t.lowercase,Object(ge.a)({},t.icon,"icon"!==c))},n),"icon"!==c&&a)),!n&&"icon"!==c&&a,i&&r.a.createElement(Kt.a,{style:{width:"24px",height:"24px",background:"none"}},i))))})),ca=a(658),sa=a(659),da=lt(mt((function(e){return{nav:{flex:1,backgroundColor:"transparent","&>a":{minWidth:"unset"}},wrapper:{color:"rgba(255, 255, 255, 0.5)"},selected:{fontSize:"0.8rem !important",color:e.palette.secondary.main,"&>span":{color:e.palette.secondary.main}}}}),{withTheme:!0})((function(e){var t=e.location.pathname,a=e.classes,n=e.actions;return r.a.createElement(ca.a,{value:t,showLabels:!0,className:a.nav},ft(n,(function(e){var n=e.icon,i=e.href,o=e.text;return r.a.createElement(sa.a,{classes:{selected:a.selected,wrapper:a.wrapper,label:a.wrapper},key:o,label:r.a.createElement(ra.a,{xsDown:!0},o),icon:r.a.createElement(ia.a,null,n),component:st,to:i,value:-1!==t.indexOf(i)&&-1===t.indexOf("".concat(i,"-"))?t:-1})})))}))),la=a(691),ma=mt((function(e){return{form:{display:"flex",alignItems:"center"},textField:{width:175,"&>div":{color:e.palette.common.white,"&::before,&::after":{borderColor:"".concat(e.palette.common.white," !important")}}}}}),{withTheme:!0})((function(e){var t=e.classes,a=Object(n.useContext)(Je),i=Object(n.useState)(),o=Object(c.a)(i,2),s=o[0],d=o[1],l=Object(n.useState)(),m=Object(c.a)(l,2),u=m[0],p=m[1],f=Object(n.useState)(),h=Object(c.a)(f,2),y=h[0],g=h[1],v=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n,r,i;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(),n=new URL("".concat(a.get("cloudURL"),"/use_company_login_name")),r={loginName:s},n.search=new URLSearchParams(r),e.next=7,fetch(n);case 7:return e.next=9,e.sent.json();case 9:(i=e.sent).companyUUID?g("/login/".concat(i.companyUUID)):p("Empresa n\xe3o encontrada.");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:t.form},y&&r.a.createElement(it,{push:!0,to:y}),r.a.createElement(la.a,{className:t.textField,error:!!u,helperText:u,required:!0,name:"loginName",placeholder:"Login da Empresa",value:s||"",onChange:function(e){var t=e.target;d(t.value)},onKeyPress:function(e){13===e.which&&v(e)}}),r.a.createElement(oa,{type:"icon",text:"Iniciar Sess\xe3o",icon:"lock_outlined",color:"inherit",onClick:v}))})),ua=a(656),pa=a(233),fa=a(138),ha=a(661),ya=a(85),ga=a(617),va=a(667),ba=a(618),Ea=a(668),xa=a(669),Oa=a(121),wa=mt((function(e){return{notFound:{width:"100%",textAlign:"center"}}}),{withTheme:!0})((function(e){var t=e.classes;return r.a.createElement(ya.a,{className:t.notFound,variant:"body1"},"Nenhum item encontrado.")})),ja=a(662),ka=mt((function(e){return{loader:{width:"100%",marginBottom:e.spacing(1)}}}),{withTheme:!0})((function(e){var t=e.classes;return r.a.createElement(ja.a,{className:t.loader,variant:"query"})})),Na=a(123),Sa=a.n(Na),Ia=a(663),Ca=a(664),Aa=Object(n.forwardRef)((function(e,t){var a,n=Object(Oa.useSnackbar)().closeSnackbar;return"production_exceeded"===e.notification.type&&(a=e.classes.productionExceeded),"stop"===e.notification.type&&(a=e.classes.stop),"noise"===e.notification.type&&(a=e.classes.noise),r.a.createElement(Ia.a,{className:e.classes.card,ref:t},r.a.createElement(Ca.a,{classes:{root:"".concat(a)}},r.a.createElement("div",null,r.a.createElement(ya.a,{variant:"body2",gutterBottom:!0},e.notification.title),r.a.createElement(ya.a,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0},f()(e.notification.createdAt).format("ddd, DD [de] MMM [de] YYYY HH:mm"))),r.a.createElement("div",{className:e.classes.icons},r.a.createElement(ta.a,{key:"close","aria-label":"close",color:"inherit",className:e.classes.close,onClick:function(){return n(e.id)}},r.a.createElement(ia.a,null,"close")))))})),Da=mt((function(e){return{card:{maxWidth:450,minWidth:344},productionExceeded:{padding:"8px 8px 8px 16px",backgroundColor:"#adff2f"},stop:{padding:"8px 8px 8px 16px",backgroundColor:"#993399"},noise:{padding:"8px 8px 8px 16px",backgroundColor:"#ffa000"},icons:{marginLeft:"auto"}}}),{withTheme:!0})(Aa),Ta=mt((function(e){var t;return{list:{paddingBottom:"0px",paddingTop:"0px",position:"sticky",maxWidth:350,maxHeight:750,overflow:"overlay"},item:{height:"auto",color:"dark"===e.palette.type?e.palette.common.white:e.palette.primary.main,whiteSpace:"normal",padding:e.spacing(1),"&>div":{width:"100%"}},wrapper:{position:"relative","&>div":{margin:0}},badge:{position:"absolute",top:5,right:5,fontSize:".65rem",background:e.palette.primary.delete,borderRadius:"50%",height:18,width:18,display:"flex",justifyContent:"center",alignItems:"center"},userMenuItem:{backgroundColor:e.palette.primary.header,color:e.palette.common.white,borderTopLeftRadius:"4px",borderTopRightRadius:"4px","&:hover":{backgroundColor:e.palette.primary.header}},button:(t={height:50,color:e.palette.common.white,"&>span>div":{width:"100% !important",height:"100% !important",borderRadius:0}},Object(ge.a)(t,e.breakpoints.up("md"),{background:"none",border:"none",boxShadow:"none"}),Object(ge.a)(t,e.breakpoints.down("sm"),{width:50,padding:0}),t),icon:{fontSize:"1.5rem"},listHeader:{backgroundColor:e.palette.secondary.main,color:e.palette.primary.main,height:64}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.theme,i=(e.hasSession,e.session),o=e.isAdminApp,s=Object(n.useContext)(Je),d=Ht({model:"notifications",query:{$sort:{createdAt:-1}}}),l=d.list,m=d.loading,u=d.reload,p=Object(n.useState)(!1),h=Object(c.a)(p,2),y=h[0],g=h[1],v=Object(n.useRef)(null),b=function(e){v.current.contains(e.target)||g(!1)},E=Object(Oa.useSnackbar)().enqueueSnackbar,x=function(e){var t=e.notification;E("",{preventDuplicate:!0,autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},content:function(e){return r.a.createElement(Da,{id:e,notification:t})}})},O=function(e){var t=e.id;return function(){var e=Object(Ne.a)(ke.a.mark((function e(a){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,s.service("notifications").remove(t);case 3:u();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(Ne.a)(ke.a.mark((function t(a){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(ft(e,function(){var e=Object(Ne.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.service("notifications").remove(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(u());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};Object(n.useEffect)((function(){var e=function(e){x({notification:e}),function(){var t=Object(Ne.a)(ke.a.mark((function t(){var a;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.navigator.serviceWorker.ready;case 3:a=t.sent,window.Notification.requestPermission((function(t){"granted"===t&&a.showNotification(e.title,{body:f()(e.createdAt).format("ddd, DD [de] MMM [de] YYYY HH:mm"),badge:Sa.a,image:Sa.a,icon:Sa.a,vibrate:[1e4],actions:[{action:"url",title:"Ir para OP",url:"/dashboard/production/".concat(e.machineId,"/order/").concat(e.productionOrderId)}]})})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("PUSH ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),u()};return s.service("notifications").on("created",e),function(){s.service("notifications").removeListener("created",e)}}),[s,u,x]);var j=pt(i,"user.name"),k="";window.outerWidth,a.breakpoints.width("md");ft(xt(j," "),(function(e){return k+=jt(e[0])})),Object(n.useEffect)((function(){try{window.Notification.requestPermission((function(e){"granted"!==e&&alert("N\xe3o tem notifica\xe7\xf5es ativas! Por favor, recarrege a p\xe1gina de monitorprod.com.br para ativar-las.")}))}catch(e){console.log("PUSH ERROR",e)}}),[]);var N=!m&&0===l.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.wrapper},r.a.createElement(oa,{className:t.button,buttonRef:function(e){v.current=e},"aria-owns":y?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){g((function(e){return!e}))},text:"notifications",type:"icon",icon:"notifications",variants:"navbar"}),!o&&!m&&l.length>0&&r.a.createElement("div",{className:t.badge},l.length)),r.a.createElement(ua.a,{open:y,anchorEl:v.current,transition:!0,disablePortal:!0},(function(e){var a=e.TransitionProps,n=e.placement;return r.a.createElement(pa.a,Object.assign({},a,{id:"menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(fa.a,{style:{width:350}},r.a.createElement(ha.a,{onClickAway:b},r.a.createElement("div",null,r.a.createElement(Xt.a,{position:"static",color:"secondary",style:{borderRadius:"5px"}},r.a.createElement(Zt.a,null,r.a.createElement(ya.a,{variant:"button",style:{flex:1}},"Dispensar Todos"),r.a.createElement(ta.a,{edge:"end",color:"primary","aria-label":"dispensar",onClick:w(l)},r.a.createElement(ia.a,null,"delete_sweep")))),r.a.createElement(ga.a,{className:t.list},m&&r.a.createElement(ka,null),!o&&r.a.createElement("div",{style:{width:350,maxHeight:"75vh"}},N&&r.a.createElement(wa,null),!N&&ft(l,(function(e){var a=e.id,n=e.title,i=e.productionOrderId,o=e.machineId,c=e.createdAt;return r.a.createElement(r.a.Fragment,null,r.a.createElement(va.a,null),r.a.createElement(ba.a,{key:a,className:t.item,component:st,to:"/dashboard/production/".concat(o,"/order/").concat(i)},r.a.createElement(Ea.a,{primary:n.split(":")[1],secondary:r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",null,n.split(":")[0]),r.a.createElement("div",{style:{position:"absolute",right:"60px"}},f()(c).format("DD/MM HH:mm")))}),r.a.createElement(xa.a,null,r.a.createElement(ta.a,{edge:"end","aria-label":"dispensar",onClick:O({id:a})},r.a.createElement(ia.a,null,"delete")))))}))))))))})))})),Pa=a(670),Ma=a(677),Fa=a(672),qa=a(158),Ra=a(337),_a=a.n(Ra),Ua=a(336),Wa=a.n(Ua),La=a(338),za=a.n(La),Ya=a(174),Ba=a.n(Ya),Ha=a(676),Va=a(124),Ja=a.n(Va),Qa=a(125),$a=a.n(Qa),Ga=a(671),Xa=a(235),Za=a.n(Xa),Ka=a(333),en=a.n(Ka),tn=mt((function(e){return{badge:{right:-20,top:8}}}))(Pa.a),an=mt((function(e){return{link:{color:"dark"===e.palette.type?e.palette.common.white:e.palette.primary.main,textTransform:"capitalize"},urgent:{color:e.palette.error.main},nested:{paddingLeft:e.spacing(4)},badge:{top:"8px",right:"-20px"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.ticket,i=e.isAdminApp,o=e.type,c=e.withoutClosedTickets,s=e.reloadTicket,d=Object(n.useContext)(Je),l={ticketId:a.id},m=Ht({model:"ticket_messages",query:Object(be.a)({},l,{viewedAt:null})}),u=m.list,p=(m.reload,m.loading,m.setQuery),h=zt().session,y=pt(h,"userId"),g=u.filter((function(e){return e.userId!==y})),v=1,b=11,E=21,x=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.service("tickets").patch(t.id,t.ticketStatusId===v?{ticketStatusId:b}:{ticketStatusId:v}).then((function(e){return s()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.service("tickets").patch(t.id,t.ticketStatusId===v||t.ticketStatusId===b?{ticketStatusId:E}:{ticketStatusId:v}).then((function(e){return s()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=JSON.stringify(l);Object(n.useEffect)((function(){p((function(e){return Object(be.a)({},e,{},JSON.parse(w))}))}),[w,p]);return null!=a.ticket_status&&"FECHADO"===a.ticket_status.name&&c?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(va.a,null),r.a.createElement(ba.a,{className:"Menu"===o?t.nested:null,button:!0,key:a.id,component:st,to:"/support/".concat(a.id)},!i&&r.a.createElement(Ga.a,null,r.a.createElement(Fa.a,null,r.a.createElement(na.a,{title:a.ticket_status.name,"aria-label":a.ticket_status.name},function(e,n){if(n&&"FECHADO"!=e)return"URGENTE"===a.ticket_status.name?r.a.createElement(Ja.a,{className:t.urgent,style:{fontSize:"40"}}):r.a.createElement($a.a,{style:{fontSize:"40"}});switch(e){case"FECHADO":return r.a.createElement(Za.a,null);case"URGENTE":return r.a.createElement(Ja.a,{className:t.urgent});default:return r.a.createElement($a.a,null)}}(a.ticket_status.name,i)))),r.a.createElement(Ea.a,{style:{paddingRight:i?"40px":""},primary:r.a.createElement("div",{className:t.link,style:{textDecoration:"FECHADO"===a.ticket_status.name?"line-through":""}},a.id," - ",a.title.toLowerCase()),secondary:r.a.createElement(tn,{badgeContent:g.length,color:"secondary"},r.a.createElement("span",{style:{textDecoration:"FECHADO"===a.ticket_status.name?"line-through":""}},a.ticket_status.name," : ",f()(a.createdAt).format("DD/MM/YYYY HH:mm")))}),i&&"Menu"!=o&&r.a.createElement(xa.a,null,r.a.createElement(na.a,{title:"URGENTE"===a.ticket_status.name?"URGENTE":"NORMAL","aria-label":"URGENCIA"},r.a.createElement(ta.a,{edge:"end","aria-label":"delete",onClick:function(){return x(a)}},"URGENTE"===a.ticket_status.name?r.a.createElement(Ja.a,{className:t.urgent}):r.a.createElement($a.a,null))),r.a.createElement(na.a,{title:"FECHADO"===a.ticket_status.name?"FECHADO":"EM ANDAMENTO","aria-label":"FECHADO"},r.a.createElement(ta.a,{edge:"end","aria-label":"delete",onClick:function(){return O(a)}},"FECHADO"!=a.ticket_status.name?r.a.createElement(en.a,null):r.a.createElement(Za.a,null))))))})),nn=a(699),rn=a(674),on=a(675),cn=a(266),sn=mt((function(e){return{error:{margin:"0 auto ".concat(e.spacing(1),"px"),backgroundColor:e.palette.error.dark,whiteSpace:"pre-wrap","&>div":{padding:0}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.errors;return r.a.createElement(cn.a,{className:t.error,message:a.message||a})})),dn=lt(mt((function(e){return{panel:{boxShadow:"none",backgroundColor:"unset"},header:{padding:0,minHeight:"unset !important","&>div":{margin:"0 !important"}},details:{padding:"0 !important",flexDirection:"column",flexWrap:"nowrap"},card:{color:"dark"===e.palette.type?e.palette.common.white:e.palette.common.black,flexWrap:"nowrap",textDecoration:"none",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px"),paddingLeft:function(t){var a=t.deep,n=void 0===a?0:a;return"".concat(e.spacing(2*(n+1)),"px")}},selected:{backgroundColor:e.palette.primary.form},avatar:{width:e.spacing(4),height:e.spacing(4),marginRight:e.spacing(1),color:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.match.params,a=e.classes,i=e.model,o=e.query,s=void 0===o?{}:o,d=(e.deep,e.reload),l=e.reloadTree,m=e.customContent,u=void 0===m?{}:m,p=e.options,f=void 0===p?{}:p,h=Ht({model:i.name,query:Object(be.a)({$sort:{name:1}},s)}),y=h.list,g=h.loading,v=h.errors,b=h.reload;Object(n.useEffect)((function(){b(d)}),[b,d]);var E=!g&&!v&&0===y.length,x=pt(t,i.paramsProp),O=Object(n.useState)(Object(ge.a)({},x,!0)),w=Object(c.a)(O,2),j=w[0],k=w[1],N=function(e){var t=e.id;return function(){return k((function(e){return Object(be.a)({},e,Object(ge.a)({},t,!e[t]))}))}};return r.a.createElement(Gt.a,{container:!0,direction:"column"},g&&r.a.createElement(ka,null),v&&r.a.createElement(sn,{errors:v}),!f.dontShowNotFound&&E&&r.a.createElement(wa,null),!g&&r.a.createElement(Gt.a,{container:!0,spacing:1},u.beforeTree&&r.a.createElement(Gt.a,{item:!0,xs:12},u.beforeTree()),ft(y,(function(e){var t=parseInt(x,"10")===e.id,n={};return f.dontTreeItemLink||(n.component=st,n.to="".concat(i.formPath,"/").concat(e.id)),r.a.createElement(Gt.a,{key:e.id,item:!0,xs:12},r.a.createElement(nn.a,{className:a.panel,expanded:j[e.id],onChange:N({id:e.id})},r.a.createElement(rn.a,{className:ut(a.header,Object(ge.a)({},a.selected,t)),expandIcon:u.afterTreeItem&&r.a.createElement(ia.a,null,"expand_more_icon")},r.a.createElement(Gt.a,Object.assign({container:!0,alignItems:"center",className:a.card},n),e.image&&r.a.createElement(Kt.a,{alt:e.name,src:e.image,className:a.avatar}),!e.image&&i.icon&&"svg"===i.icon.type&&r.a.createElement("img",{className:a.avatar,alt:"icon",src:i.icon.src}),!e.image&&i.icon&&!i.icon.type&&r.a.createElement(ia.a,{className:a.avatar},i.icon),!u.customTreeName&&r.a.createElement(ya.a,{variant:"body1"},e.identity?"".concat(e.identity," - "):"",e.name),u.customTreeName&&r.a.createElement(ya.a,{variant:"body1"},u.customTreeName({data:e})),u.customName&&r.a.createElement(ya.a,{variant:"body1"},u.customName({data:e})),u.customTree&&r.a.createElement(Gt.a,{item:!0},u.customTree({data:e})))),u.afterTreeItem&&r.a.createElement(on.a,{className:a.details},u.afterTreeItem({data:e,reloadTree:l}))))}))),u.afterTree&&r.a.createElement("div",null,u.afterTree({reloadTree:l})))}))),ln=function(e){var t=e.company,a=e.isAdminApp,i=e.type,o=e.withoutClosedTickets,c=(Object(n.useContext)(Je),Ht({model:"tickets",query:{$populateAll:!0,companyId:t.id,$sort:{createdAt:-1}}})),s=c.list,d=c.loading,l=c.reload,m=!d&&!s.length;return r.a.createElement(r.a.Fragment,null,m&&r.a.createElement(oo,null),d&&r.a.createElement(ro,null),ft(s,(function(e){return r.a.createElement(an,{isAdminApp:a,key:e.id,ticket:e,type:i,withoutClosedTickets:o,reloadTicket:l})})))},mn=a(334),un=mt((function(e){return{actions:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},loader:{height:"100%",width:"100%",background:"rgba(255,255,255,.5)",zIndex:1,position:"absolute",right:0,top:0,padding:"0 8px","&>div":{position:"relative",top:25}},icon:{fontSize:30,color:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,i=void 0===a?{}:a,o=(e.field,Object(n.useContext)(Je)),s=Object(n.useState)(),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),h(),e.prev=2,e.next=5,o.service("companies").patch(i.id,{loginName:i.loginName},{query:{$sendEmail:!0}});case 5:b(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),h(e.t0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return!!i.id&&r.a.createElement("div",{className:t.actions},l&&r.a.createElement("div",{className:t.loader},r.a.createElement(ka,null)),r.a.createElement(oa,{text:"(Re) Iniciar Senha",icon:"mail",onClick:E}),v&&r.a.createElement(ia.a,{className:t.icon},"done"),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a,{className:t.icon},"clear"),r.a.createElement(sn,{errors:f})))})),pn=un,fn=function(e){return new RegExp(/^\d{5}-?\d{3}$/).test(e)},hn=[[{text:"UUID",identity:"uuid",variants:"display fullWidth",readOnly:!0,show:{ifThis:"id"},type:"string"}],[{text:"Nome Fantasia",identity:"fantasyName",autoFocus:!0,required:!0,type:"string",handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.handleChange,r=pt(a,"target.value");r&&n({target:{name:"loginName",value:kt(r).replace(/\s/g,"")}})}},{text:"Identifica\xe7\xe3o Fiscal",identity:"taxId",required:!0,type:"string",handleValidate:function(e){var t=e.data,a=pt(void 0===t?{}:t,"target.value");return!!Object(mn.a)(a)||"CNPJ n\xe3o \xe9 v\xe1lido"}},{text:"Status",identity:"companyStatusId",required:!0,model:"company_statuses",defaultValue:{config:"company.status.init"}},{text:"Nivel",identity:"level",required:!0,enum:["N1","N6"],defaultValue:"N1"},{text:"Login da Empresa",identity:"loginName",type:"string"}],[[{text:"Limite de Usu\xe1rios",identity:"usersLimit",required:!0,defaultValue:50,type:"integer"},{text:"Usu\xe1rios",identity:"usersNumber",readOnly:!0,show:{ifThis:"id"},type:"integer",defaultValue:{customValue:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o,c,s;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n=void 0===a?{}:a,r=t.field,i=t.client,o=t.handleChange,e.next=3,i.service("users").find({query:{companyId:n.id}});case 3:c=e.sent,s=c.data,o({target:{name:r.identity,value:s.length}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}],[{text:"Limite de M\xe1quinas",identity:"machinesLimit",required:!0,defaultValue:50,type:"integer"},{text:"M\xe1quinas",identity:"machinesNumber",readOnly:!0,show:{ifThis:"id"},type:"integer",defaultValue:{customValue:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o,c,s;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n=void 0===a?{}:a,r=t.field,i=t.client,o=t.handleChange,e.next=3,i.service("machines").find({query:{companyId:n.id}});case 3:c=e.sent,s=c.data,o({target:{name:r.identity,value:s.length}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]],[[{text:"Raz\xe3o Social",identity:"companyName",required:!0,type:"string"},{text:"Insc. Estadual",identity:"stateRegistration",type:"string"},{text:"Insc. Municipal",identity:"municipalRegistration",type:"string"}]],[{text:"Contato Admin Sist",identity:"adminContact",required:!0,type:"string"},{text:"Email Admin Sist",identity:"adminEmail",required:!0,type:"email",customData:function(e){var t=Object.assign({},e);return r.a.createElement(pn,t)}}],[{text:"Contato Comercial",identity:"technicalContact",required:!0,type:"string"},{text:"Email Comercial",identity:"technicalEmail",required:!0,type:"email"}],[{text:"Endere\xe7o",identity:"address",type:"string"},{text:"N\xfamero",identity:"addressNumber",type:"string"},{text:"Bairro",identity:"neighborhood",type:"string"}],[{text:"Estado",identity:"state",type:"string",enum:["AC","AL","AM","AP","BA","CE","DF","ES","GO","MA","MG","MS","MT","PA","PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO"]},{text:"Cidade",identity:"city",type:"string"},{text:"CEP",identity:"cep",required:!0,type:"string",handleValidate:function(e){var t=e.data,a=pt(void 0===t?{}:t,"target.value");return!!fn(a)||"CEP n\xe3o \xe9 v\xe1lido"},handleChange:function(e){return Object(Ne.a)(ke.a.mark((function t(){var a,n,r,i,o;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.data,n=void 0===a?{}:a,r=e.handleChange,i=pt(n,"target.value"),!fn(i)){t.next=10;break}return t.next=5,fetch("https://viacep.com.br/ws/".concat(i,"/json"));case 5:return o=t.sent,t.next=8,o.json();case 8:o=t.sent,ht([{key:"address",value:"logradouro"},{key:"neighborhood",value:"bairro"},{key:"state",value:"uf"},{key:"city",value:"localidade"}],(function(e){var t=e.key,a=e.value;r({target:{name:t,value:"".concat(o[a])}})}));case 10:case"end":return t.stop()}}),t)})))()}}],[{text:"Fone",identity:"phone",required:!0,type:"string"},{text:"Fone 2",identity:"phone2",type:"string"}]],yn={metadata:{name:"companies",listPath:"/sysadmin/companies",formPath:"/sysadmin/companies",paramsProp:"companyId",newItemText:"Novo Cliente"},list:[{text:"Nome Fantasia",identity:"fantasyName",filter:{type:"string"}},{text:"Identifica\xe7\xe3o Fiscal",identity:"taxId",filter:{type:"string"}},{text:"Nivel",identity:"level",filter:{type:"string"}},{text:"Admin Sis",identity:"adminContact",filter:{type:"string"}},{text:"Email Admin Sis",identity:"adminEmail",filter:{type:"string"}},{text:"Status",identity:"company_status.name",model:{service:"company_statuses",identity:"companyStatusId"}}],form:hn,links:[{text:"Clientes",href:"/sysadmin/companies"}],customContent:{customBreadCrumbsName:function(e){var t=e.data;return(void 0===t?{}:t).fantasyName},customTreeName:function(e){var t=e.data;return(void 0===t?{}:t).fantasyName}},customActions:function(e){var t=e.isList,a=e.isForm,n=e.data;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(co,{text:"Visualizar Hist\xf3rico",icon:"view_day",type:"icon",component:st,to:"/sysadmin/companies/".concat(n.id,"/production-history")}),a&&n.id&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,{text:"Visualizar Hist\xf3rico",icon:"view_day",component:st,to:"/sysadmin/companies/".concat(n.id,"/production-history")})))},query:{$sort:{fantasyName:1}}},gn=mt((function(e){var t;return{ticketsList:{maxHeight:"100%",overflow:"overlay",overflowX:"hidden",paddingTop:0},addTicket:{backgroundColor:e.palette.secondary.main,color:e.palette.primary.main},wrapper:{position:"relative","&>div":{margin:0}},button:(t={height:50,"&>span>div":{width:"100% !important",height:"100% !important",borderRadius:0}},Object(ge.a)(t,e.breakpoints.up("md"),{background:"none",border:"none",color:e.palette.common.white,boxShadow:"none"}),Object(ge.a)(t,e.breakpoints.down("sm"),{width:50,padding:0}),t),userMenuItem:{backgroundColor:e.palette.primary.header,color:e.palette.common.white,borderTopLeftRadius:"4px",borderTopRightRadius:"4px","&:hover":{backgroundColor:e.palette.primary.header}},badge:{position:"absolute",top:0,right:0,fontSize:".65rem",background:e.palette.primary.delete,borderRadius:"50%",height:18,width:18,display:"flex",justifyContent:"center",alignItems:"center"},list:{paddingBottom:"0px",maxWidth:350},item:{height:"auto",whiteSpace:"normal",padding:e.spacing(1),"&>div":{width:"100%"}},nested:{paddingLeft:e.spacing(4)},listHeader:{paddingLeft:e.spacing(4),minHeight:64,backgroundColor:e.palette.secondary.main,color:e.palette.primary.main},urgent:{color:e.palette.error.main,margin:2},icon:{color:"dark"===e.palette.type?e.palette.common.white:e.palette.primary.main,margin:2}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.isAdminApp,i=e.type,o=Object(n.useContext)(Je),s=zt().session,d=pt(s,"companyId"),l=Object(n.useState)(!0),m=Object(c.a)(l,2),u=m[0],p=m[1],f=Ht({model:"tickets",query:{$populateAll:!0,$sort:{createdAt:-1}}}),h=f.list,y=f.loading,g=f.reload,v=Ht({model:"ticket_messages"}),b=v.list,E=v.reload,x=(v.loading,v.setQuery);Object(n.useEffect)((function(){x({ticketId:{$in:ft(h,(function(e){return e.id}))},viewedAt:null,companyId:d})}),[h,d,x]);var O=pt(s,"userId");yt(b,(function(e){return e.userId!==O}));Object(n.useEffect)((function(){var e=function(){console.log("nova mensagem de suport"),E()};return o.service("ticket_messages").on("created",e),o.service("ticket_messages").on("patched",e),function(){o.service("ticket_messages").removeListener("created",e),o.service("ticket_messages").removeListener("patched",e)}}),[o]),Object(n.useEffect)((function(){var e=function(){console.log("nova solicita\xe7\xe3o de suport"),g()};return o.service("tickets").on("created",e),o.service("tickets").on("patched",e),function(){o.service("tickets").removeListener("created",e),o.service("tickets").removeListener("patched",e)}}),[o]);var w=!y&&0===h.length;return r.a.createElement(ga.a,{component:"nav",className:t.ticketsList,"aria-labelledby":"Lista de tickets"},r.a.createElement("div",{style:{width:350}},"Menu"===i&&!a&&r.a.createElement(ba.a,{button:!0,component:st,to:"/support/",className:(t.addTicket,t.nested,t.listHeader)},r.a.createElement(Fa.a,null,r.a.createElement(ia.a,null,"help")),r.a.createElement(Ea.a,{primary:r.a.createElement(ya.a,{variant:"button"},"Abrir Novo")})),"Menu"!=i&&r.a.createElement(Zt.a,{variant:"dense"},!a&&r.a.createElement(aa.a,{variant:"contained",color:"secondary",component:st,to:"/support/",startIcon:r.a.createElement(ia.a,null,"edit")},"  Novo "),r.a.createElement("span",{style:{flex:1,color:"black"}}),r.a.createElement(Ha.a,{style:{margin:"4px"},value:u,control:r.a.createElement(Ma.a,{color:"secondary",onChange:function(){return p((function(e){return!e}))}}),label:"CONCLU\xcdDOS",labelPlacement:"start"})),!w&&!a&&ft(h,(function(e){return r.a.createElement(an,{key:e.id,ticket:e,type:i,reloadTicket:g,withoutClosedTickets:u})})),!w&&a&&r.a.createElement(dn,{model:yn.metadata,options:{dontTreeItemLink:a},query:yn.query,customContent:Object(be.a)({},yn.customContent,{customTree:function(e){var a=e.data,n=yt(h,(function(e){return e.companyId===a.id})),i=yt(n,(function(e){return e.ticketStatusId===parseInt(pt(o.get("config.ticket.status.init"),"value"))})),c=yt(n,(function(e){return e.ticketStatusId===parseInt(pt(o.get("config.ticket.status.urgent"),"value"))}));return r.a.createElement(Gt.a,{container:!0},c.length>=1&&r.a.createElement(Pa.a,{color:"secondary",badgeContent:c.length},r.a.createElement(Ja.a,{className:t.urgent}))," ",r.a.createElement("div",{style:{width:12}}),i.length>=1&&r.a.createElement(Pa.a,{color:"secondary",badgeContent:i.length},r.a.createElement($a.a,{className:t.icon}))," ",r.a.createElement("div",{style:{width:12}}))},afterTreeItem:function(e){var t=e.data;return r.a.createElement(ln,{isAdminApp:a,company:t,type:i,withoutClosedTickets:u})}})})))})),vn=a(173),bn=a(335),En=a.n(bn),xn=mt((function(e){return{root:{backgroundColor:e.palette.primary.header,color:e.palette.common.white,borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px"},wrapper:{position:"relative","&>div":{margin:0}},button:{width:50,"&>span>div":{width:"100% !important",height:"100% !important",borderRadius:0}},icon:{width:"18px !important",height:"18px !important",color:e.palette.common.white}}}),{withTheme:!0})((function(e){e.classes;var t=e.isAdminApp,a=Object(n.useContext)(Je),i=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("companyUUID"),e.next=3,Lt({client:a});case 3:window.location="/login/".concat(t?"admin":n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ba.a,{button:!0,onClick:i},r.a.createElement(Fa.a,null,r.a.createElement(En.a,null)),r.a.createElement(Ea.a,{primary:"Deslogar"}))})),On=function(e){var t=e.session,a=Object(n.useContext)(Je),r=Object(n.useState)(!1),i=Object(c.a)(r,2),o=i[0],s=i[1];a.socket.on("connect",(function(){return s(!0)}));var d=pt(t,"userId"),l=pt(t,"companyId"),m=Ht({model:"tickets",query:{$populateAll:!0,$sort:{createdAt:-1}}}),u=m.list,p=m.reload,f=Ht({model:"ticket_messages"}),h=f.list,y=f.reload,g=f.setQuery;return Object(n.useEffect)((function(){a.service("tickets").on("created",(function(){p()}))}),[o]),Object(n.useEffect)((function(){g({ticketId:{$in:ft(u,(function(e){return e.id}))},viewedAt:null,companyId:l})}),[u,l,g]),Object(n.useEffect)((function(){a.service("ticket_messages").on("created",(function(){console.log("nova mensagem..."),y()}))}),[o,y]),{userUnreadMessages:yt(h,(function(e){return e.userId!==d}))||[]}},wn=mt((function(e){return{badge:{right:29,top:14}}}))(Pa.a),jn=mt((function(e){var t;return{button:(t={height:50,color:e.palette.common.white,"&>span>div":{width:"100% !important",height:"100% !important",borderRadius:0}},Object(ge.a)(t,e.breakpoints.up("md"),{background:"none",border:"none",boxShadow:"none"}),Object(ge.a)(t,e.breakpoints.down("sm"),{width:50,padding:0}),t),userMenuItem:{backgroundColor:e.palette.primary.header,color:e.palette.common.white,borderTopLeftRadius:"4px",borderTopRightRadius:"4px","&:hover":{backgroundColor:e.palette.primary.header}},badge:{position:"absolute",top:0,right:0,fontSize:".65rem",background:e.palette.primary.delete,borderRadius:"50%",height:18,width:18,display:"flex",justifyContent:"center",alignItems:"center"},list:{paddingBottom:"0px",width:350,maxHeight:350},item:{height:"auto",whiteSpace:"normal",padding:e.spacing(1),"&>div":{width:"100%"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.isAdminApp,i=e.hasSession,o=e.session,s=e.swtichTheme,d=e.dark,l=Object(n.useState)(!1),m=Object(c.a)(l,2),u=m[0],p=m[1],f=On({session:o}).userUnreadMessages,h=function(){p((function(e){return!e}))},y=Object(n.useState)(!1),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useRef)(null),x=function(e){E.current.contains(e.target)||b(!1)},O=function(){b((function(e){return!e}))},w=pt(o,"user.name"),j="";return ft(xt(w," "),(function(e){return j+=jt(e[0])})),r.a.createElement(r.a.Fragment,null,r.a.createElement(wn,{badgeContent:f.length,color:"secondary"},r.a.createElement(oa,{className:t.button,buttonRef:function(e){E.current=e},"aria-owns":v?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:O,type:"icon",variants:"navbar",icon:"account_circle",text:a?"Admin":w})),r.a.createElement(ua.a,{open:v,anchorEl:E.current,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,n=e.placement;return r.a.createElement(pa.a,Object.assign({},t,{id:"menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(fa.a,{style:{width:350}},r.a.createElement(ha.a,{onClickAway:x},r.a.createElement(ga.a,{component:"nav","aria-labelledby":"Menu do Usu\xe1rio"},r.a.createElement(ba.a,null,r.a.createElement(Fa.a,null,r.a.createElement(Ma.a,{edge:"start",color:"secondary",onChange:s,checked:d})),r.a.createElement(Ea.a,{primary:"Tema Escuro"})),r.a.createElement(va.a,null),!a&&r.a.createElement(ba.a,{button:!0,component:st,to:"/administration/reset-password",onClick:O},r.a.createElement(Fa.a,null,r.a.createElement(ia.a,null,"lock_outlined")),r.a.createElement(Ea.a,{primary:"Alterar Senha"})),r.a.createElement(xn,null),r.a.createElement(va.a,null),r.a.createElement(ba.a,{button:!0,component:st,to:"/help/home",onClick:O},r.a.createElement(Fa.a,null,r.a.createElement(Wa.a,null)),r.a.createElement(Ea.a,{primary:"Manual Wiki"})),r.a.createElement(ba.a,{button:!0,onClick:h},r.a.createElement(Fa.a,null,r.a.createElement(_a.a,null)),r.a.createElement(Ea.a,{primary:"Suporte T\xe9cnico"}),u?r.a.createElement(za.a,null):r.a.createElement(Ba.a,null)),r.a.createElement(qa.a,{style:{maxHeight:"250px",overflowY:"overlay",overflowX:"hidden"},in:u,timeout:"auto",unmountOnExit:!0},r.a.createElement(gn,{hasSession:i,session:o,isAdminApp:a,type:"Menu",handleToggle:O}))))))})))})),kn=[{icon:"assignment",href:"/master-data",text:"Cadastros",permissions:["writeMasterData","readMasterData"]},{icon:"assessment",href:"/dashboard",text:"Painel de Controle",permissions:["readProductionOrders","readProductionOrderReports","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"]},{icon:"table_chart",href:"/reports",text:"Relat\xf3rios",permissions:["readProductionOrderReports"]},{icon:"settings_applications",href:"/administration",text:"Configura\xe7\xf5es",permissions:["crudAdminData","crudUserData"]}],Nn=[{icon:"domain",href:"/sysadmin/companies",text:"Clientes"},{icon:"memory",href:"/sysadmin/sensors",text:"Sensores"},{icon:"assignment",href:"/sysadmin/master-data",text:"Cadastros"}],Sn=lt(mt((function(e){var t;return{"@global":{"::-webkit-scrollbar":{width:"6px",height:"6px",scrollbarWidth:"thin"},"::-webkit-scrollbar-track":{background:"transparent"},"::-webkit-scrollbar-track-piece":{backgroundColor:"transparent"},"::-webkit-scrollbar-thumb":{background:"rgba(0, 0, 0, 0.54)",borderRadius:"3px"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}},root:(t={height:"100vh",flexWrap:"nowrap",flexGrow:1},Object(ge.a)(t,e.breakpoints.down("md"),{fontSize:14}),Object(ge.a)(t,e.breakpoints.down("xs"),{fontSize:12}),t),title:{flex:1},main:Object(ge.a)({overflowY:"auto",display:"flex",flexGrow:1},e.breakpoints.down("sm"),{flexDirection:"column"}),home:{marginRight:e.spacing(2)},content:Object(ge.a)({overflowX:"hidden",overflowY:"auto",flexGrow:1,flexWrap:"nowrap",padding:e.spacing(3)},e.breakpoints.down("xs"),{padding:e.spacing(1)})}}),{withTheme:!0})((function(e){var t=e.location.pathname,a=e.classes,i=e.children,o=e.swtichTheme,c=e.dark,s=zt({dependencies:[t]}),d=s.session,l=s.permissions,m=d&&d.isAdmin,u=-1!==t.indexOf("login"),p=!u&&d,f=m?Nn:kn,h=Object(n.useContext)(Je),y=h.get("cloudURL").includes("heroku")||h.get("cloudURL").includes("localhost");return r.a.createElement(Gt.a,{container:!0,direction:"column",className:a.root},r.a.createElement(Xt.a,{position:"static"},r.a.createElement(Zt.a,null," ",y&&r.a.createElement("span",null,"DEV"),!m&&!p&&r.a.createElement(Kt.a,{className:a.home,alt:"Logo",src:Sa.a,component:st,to:"/"})," ",p&&m&&r.a.createElement(oa,{type:"icon",text:"SysAdmin",icon:"settings",variants:"navbar",component:st,to:"/sysadmin"}),!d&&!u&&r.a.createElement(ma,null),p&&r.a.createElement(da,{actions:yt(f,(function(e){return!e.permissions||_t({privileges:e.permissions,permissions:l})}))}),p&&r.a.createElement(Ta,{hasSession:p,session:d,isAdminApp:m}),p&&r.a.createElement(jn,{hasSession:p,session:d,isAdminApp:m,swtichTheme:o,dark:c}))),r.a.createElement("main",{className:a.main},r.a.createElement(Gt.a,{container:!0,direction:"column",className:a.content},i)))}))),In=function(e){var t=zt({privileges:e.permissions}),a=t.session,n=t.loading,i=t.hasAccess;if(n)return r.a.createElement(ka,null);var o=localStorage.getItem("companyUUID");return a&&i?r.a.createElement(ct,e):r.a.createElement(it,{push:!0,to:o?"/login/".concat(o):"/"})},Cn=function(e){var t=zt(),a=t.session;return t.loading?r.a.createElement(ka,null):pt(a,"isAdmin")?r.a.createElement(ct,e):r.a.createElement(it,{push:!0,to:"/login/admin"})},An=function(e){var t=zt(),a=t.session;if(t.loading)return r.a.createElement(ka,null);var n=localStorage.getItem("companyUUID");return a?r.a.createElement(ct,e):r.a.createElement(it,{push:!0,to:n?"/login/".concat(n):"/"})},Dn=mt((function(e){return{grid:Object(ge.a)({minHeight:64,zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2),padding:"0 ".concat(e.spacing(3),"px"),backgroundColor:e.palette.secondary.main},e.breakpoints.down("xs"),{margin:-e.spacing(1),marginBottom:e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)"),padding:"0 ".concat(e.spacing(1),"px"),minHeight:56}),link:{"& a":{minHeight:0}},firstLink:{"& a":{paddingLeft:0}},wrapper:{display:"flex",color:"#000000de"},arrow:{fontSize:"1.25rem"},button:{color:"#000000de"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.links;return r.a.createElement(Gt.a,{container:!0,alignItems:"center",className:t.grid},ft(a,(function(e,a){var n=e.text,i=e.href;return r.a.createElement(r.a.Fragment,{key:a},0!==a&&r.a.createElement(Gt.a,{item:!0,className:t.wrapper},r.a.createElement(ia.a,{className:t.arrow},"arrow_forward_ios")),r.a.createElement(Gt.a,{item:!0,className:ut(t.link,Object(ge.a)({},t.firstLink,0===a))},i?r.a.createElement(aa.a,{className:t.button,component:st,to:i},n):r.a.createElement(aa.a,{className:t.button},n)))})))})),Tn=a(678),Pn=a(339),Mn=a.n(Pn),Fn=mt((function(e){return{toolbar:{padding:0,minHeight:40,marginBottom:e.spacing(1)},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2),zIndex:1}}}),{withTheme:!0})((function(e){var t=e.classes,a=(e.model,e.options),n=void 0===a?{}:a,i=zt().permissions;return!n.dontCreate&&_t({privileges:n.writePermissions,permissions:i})&&r.a.createElement(Tn.a,{color:"secondary","aria-label":"criar",className:t.fab},r.a.createElement(Mn.a,null))})),qn=a(679),Rn=mt((function(e){return{card:{display:"flex",position:"relative"},content:{flex:1,padding:e.spacing(1)},header:{minHeight:40,marginBottom:e.spacing(1)},avatar:{marginRight:e.spacing(1)},controls:{width:"unset"},loader:{height:"100%",width:"100%",background:"rgba(255,255,255,.5)",zIndex:1,position:"absolute",right:0,top:0,padding:"0 8px","&>div":{position:"relative",top:"50%"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.model,n=e.fields,i=e.data,o=e.handleDelete,c=e.loading,s=e.options,d=void 0===s?{}:s,l=e.customContent,m=void 0===l?{}:l,u=e.customActions,p=zt().permissions;return r.a.createElement(Ia.a,{className:t.card},c&&r.a.createElement("div",{className:t.loader},r.a.createElement(ka,null)),r.a.createElement(qn.a,{className:t.content},r.a.createElement(Gt.a,{container:!0,alignItems:"center",className:t.header},i.image&&r.a.createElement(Kt.a,{alt:i.name,src:i.image,className:t.avatar}),r.a.createElement(ya.a,{component:"h5",variant:"h5"},i.name)),r.a.createElement(Gt.a,{container:!0,spacing:2},ft(n,(function(e){var t=e.identity,a=e.text,n=e.hasIdentity,o=e.customData;return"name"!==t&&(pt(i,t)||o)&&r.a.createElement(Gt.a,{item:!0,key:t},r.a.createElement(ya.a,{variant:"subtitle1",color:"textSecondary"},a),r.a.createElement(ya.a,{component:"p"},o&&o({data:i}),!o&&r.a.createElement(r.a.Fragment,null,n&&i.identity?"".concat(i.identity," - "):"",pt(i,t))))})))),r.a.createElement(Gt.a,{container:!0,direction:"column",className:t.controls},!d.dontEdit&&(!m.dontEdit||m.dontEdit({data:i}))&&r.a.createElement(oa,{type:"icon",text:"Editar",icon:"edit_icon",variants:"editAction",component:st,to:"".concat(a.formPath,"/").concat(i.id)}),_t({privileges:d.writePermissions,permissions:p})&&!d.dontDelete&&(!m.dontDelete||m.dontDelete({data:i}))&&r.a.createElement(oa,{type:"icon",text:"Deletar",icon:"delete",variants:"deleteAction",onClick:o(i)}),u&&u({isList:!0,data:i})))})),_n=mt((function(e){return{container:{flexWrap:"nowrap"},grid:{overflowY:"auto"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.model,n=e.fields,i=e.query,o=void 0===i?{}:i,c=e.options,s=void 0===c?{}:c,d=e.customContent,l=void 0===d?{}:d,m=e.customActions,u=Jt({model:a.name,query:o}),p=u.list,f=u.handleDelete,h=u.deleteRef,y=u.deleteLoading,g=u.findLoading,v=u.errors,b=!g&&!v&&0===p.length;return r.a.createElement(Gt.a,{container:!0,direction:"column",className:t.container},r.a.createElement(Fn,{model:a,options:s}),g&&r.a.createElement(ka,null),v&&r.a.createElement(sn,{errors:v}),b&&r.a.createElement(wa,null),!g&&r.a.createElement(Gt.a,{className:t.grid,container:!0,spacing:1},ft(p,(function(e){return r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,key:e.id},r.a.createElement(Rn,{model:a,fields:n,data:e,loading:h[e.id]&&y,handleDelete:f,options:s,customContent:l,customActions:m}))}))))})),Un=a(683),Wn=a(684),Ln=a(681),zn=a(682),Yn=a(685),Bn=a(332),Hn=a(680),Vn=mt((function(e){return{menu:{height:300},icon:{color:e.palette.common.white}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.field,i=e.query,o=void 0===i?{}:i,s=e.setFindQuery,d=Object(n.useState)({}),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)(),f=Object(c.a)(p,2),h=f[0],y=f[1],g=Object(n.useState)(),v=Object(c.a)(g,2),b=v[0],E=v[1],x=Ht({model:pt(a,"model.service"),query:pt(a,"model.query")}).list,O=Object(n.useState)(null),w=Object(c.a)(O,2),j=w[0],k=w[1],N=function(){return k(null)},S=function(e){var t=e.id;return function(){u((function(e){return e[t]?delete e[t]:e[t]=!0,e})),N()}},I=JSON.stringify(m),C=JSON.stringify(o);Object(n.useEffect)((function(){s((function(e){var t=Object(be.a)({},e,{},JSON.parse(C)),n=pt(a,"model.identity")||pt(a,"identity"),r=Object.keys(JSON.parse(I));return n&&r.length?t[n]={$in:r}:delete t[n],t}))}),[I,C,a,s]),Object(n.useEffect)((function(){s((function(e){var t=Object(be.a)({},e,{},JSON.parse(C)),n=pt(a,"filter.identity")||pt(a,"identity");return n&&h?t[n]={$like:"%".concat(h,"%")}:delete t[n],t}))}),[C,h,a,s]),Object(n.useEffect)((function(){s((function(e){var t=Object(be.a)({},e,{},JSON.parse(C)),n=pt(a,"filter.identity")||pt(a,"identity");return n&&b?t.$sort=Object(ge.a)({},n,b):"identity"!==n&&"name"!==n&&delete t.$sort[n],t}))}),[C,b,a,s]);var A=pt(a,"model.customName");return r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a,{"aria-owns":j?"filter-".concat(a.text):void 0,"aria-haspopup":"true",onClick:function(e){return k(e.currentTarget)}},r.a.createElement(ya.a,{variant:"body1"},a.text),r.a.createElement(ia.a,{className:t.icon},"arrow_drop_down"),(Object.keys(m).length>0||h||b)&&r.a.createElement(ia.a,{className:t.icon},"filter_list")),(a.model||a.filter)&&r.a.createElement(Bn.a,{className:t.menu,id:"filter-".concat(a.text),anchorEl:j,open:!!j,onClose:N},r.a.createElement(Hn.a,{onClick:function(){E(1),N()}},1===b&&r.a.createElement(ia.a,null,"done"),"Ordena\xe7\xe3o ascendente"),r.a.createElement(Hn.a,{onClick:function(){E(-1),N()}},-1===b&&r.a.createElement(ia.a,null,"done"),"Ordena\xe7\xe3o descendente"),r.a.createElement(Hn.a,{onClick:function(){u({}),y(),E(),N()}},"Remover filtros"),a.filter&&r.a.createElement(Hn.a,null,r.a.createElement(la.a,{name:a.identity,label:"Pesquisa",value:h,onChange:function(e){var t=e.target;y(t.value)}})),ft(x,(function(e){return r.a.createElement(Hn.a,{key:e.id,onClick:S({id:e.id})},m[e.id]&&r.a.createElement(ia.a,null,"done"),!A&&e.name,A&&A({data:e}))}))))})),Jn=mt((function(e){return{row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.primary.table}},actions:{position:"relative",justifyContent:"center",display:"flex"},loader:{height:"100%",width:"100%",background:"rgba(255,255,255,.5)",zIndex:1,position:"absolute",right:0,top:0,padding:"0 8px","&>div":{position:"relative",top:25}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.model,n=e.fields,i=e.data,o=e.handleDelete,c=e.loading,s=e.options,d=void 0===s?{}:s,l=e.customContent,m=void 0===l?{}:l,u=e.customActions,p=zt().permissions;return r.a.createElement(Ln.a,{className:t.row,key:i.id},ft(n,(function(e){var t=e.identity,a=e.hidden,n=e.hasIdentity,o=e.customData;return r.a.createElement(ra.a,{key:t,only:a?"md":"xs"},r.a.createElement(zn.a,null,r.a.createElement(ya.a,{variant:"body2"},o&&o({data:i}),!o&&r.a.createElement(r.a.Fragment,null,n&&i.identity?"".concat(i.identity," - "):"",pt(i,t)))))})),r.a.createElement(zn.a,null,r.a.createElement("div",{className:t.actions},c&&r.a.createElement("div",{className:t.loader},r.a.createElement(ka,null)),!d.dontEdit&&(!m.dontEdit||m.dontEdit({data:i}))&&r.a.createElement(oa,{type:"icon",text:"Editar",icon:"edit_icon",variants:"editAction",component:st,to:"".concat(a.formPath,"/").concat(i.id)}),_t({privileges:d.writePermissions,permissions:p})&&!d.dontDelete&&(!m.dontDelete||m.dontDelete({data:i}))&&r.a.createElement(oa,{type:"icon",text:"Deletar",icon:"delete",variants:"deleteAction",onClick:o(i)}),u&&u({isList:!0,data:i}))))})),Qn=mt((function(e){return{root:{flex:1,overflow:"hidden"},scrollArea:{height:"100%",minHeight:"300px",overflow:"overlay"},container:{flex:1,overflow:"hidden"},actions:{justifyContent:"center",display:"flex"},header:{position:"sticky",top:0,zIndex:1,backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:e.spacing(1),"& p,& a span":{color:e.palette.common.white,textTransform:"uppercase"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.model,n=e.fields,i=e.query,o=void 0===i?{}:i,c=e.options,s=void 0===c?{}:c,d=e.customContent,l=void 0===d?{}:d,m=e.customActions,u=zt().permissions,p=Jt({model:a.name,query:o}),f=p.list,h=p.setFindQuery,y=p.handleDelete,g=p.deleteRef,v=p.deleteLoading,b=p.findLoading,E=p.errors,x=!b&&!E&&0===f.length;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.scrollArea,style:{width:"none"}},r.a.createElement(Un.a,{className:t.table},r.a.createElement(Wn.a,null,r.a.createElement(Ln.a,null,ft(n,(function(e){return r.a.createElement(ra.a,{key:e.identity,only:e.hidden?"md":"xs"},r.a.createElement(zn.a,{className:t.header},!(e.customContent&&e.customContent.dontFilter)&&r.a.createElement(Vn,{field:e,query:o,setFindQuery:h}),e.customContent&&e.customContent.dontFilter&&!e.customText&&r.a.createElement(ya.a,{variant:"body1"},e.text),e.customContent&&e.customContent.dontFilter&&e.customText&&e.customText()))})),r.a.createElement(zn.a,{className:t.header},!s.dontCreate&&_t({privileges:s.writePermissions,permissions:u})&&r.a.createElement("div",{className:t.actions},r.a.createElement(oa,{text:"Criar",icon:"add_icon",variants:"table",component:st,to:"".concat(a.formPath,"/new")}))))),r.a.createElement(Yn.a,null,(b||E||x)&&r.a.createElement(Ln.a,{className:t.row},r.a.createElement(zn.a,{colSpan:n.length+1},b&&r.a.createElement(ka,null),E&&r.a.createElement(sn,{errors:E}),x&&r.a.createElement(wa,null))),!b&&ft(f,(function(e){return r.a.createElement(Jn,{key:e.id,model:a,fields:n,data:e,loading:g[e.id]&&v,handleDelete:y,options:s,customContent:l,customActions:m})}))))))})),$n=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.model,a=e.fields,n=e.query,i=void 0===n?{}:n,o=e.options,c=void 0===o?{}:o,s=e.customContent,d=void 0===s?{}:s,l=e.customActions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{smDown:!0},r.a.createElement(Qn,{model:t,fields:a,query:i,options:c,customContent:d,customActions:l})),r.a.createElement(ra.a,{mdUp:!0},r.a.createElement(_n,{model:t,fields:a,query:i,options:c,customContent:d,customActions:l})))})),Gn=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.metadata,a=e.list,n=e.links,i=e.query,o=void 0===i?{}:i,c=e.options,s=void 0===c?{}:c,d=e.customContent,l=void 0===d?{}:d,m=e.customActions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Dn,{links:n}),r.a.createElement($n,{model:t,fields:a,query:o,options:s,customContent:l,customActions:m}))})),Xn=function(e){var t=e.metadata,a=e.list,n=e.links,i=e.query,o=void 0===i?{}:i,c=e.options,s=void 0===c?{}:c,d=e.customContent,l=void 0===d?{}:d,m=e.customActions;return r.a.createElement(Gn,{metadata:t,list:a,links:n,query:o,options:s,customContent:l,customActions:m})},Zn=lt(mt((function(e){return{container:{minHeight:44,marginBottom:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.history,a=e.classes,n=e.model,i=e.fields,o=e.formItem,c=e.handleSubmit,s=e.handleDelete,d=e.options,l=void 0===d?{}:d,m=e.customContent,u=void 0===m?{}:m,p=e.customActions;return r.a.createElement(Gt.a,{item:!0,container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center",className:a.container},!l.dontSave&&(!u.dontEdit||u.dontEdit({data:o}))&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(oa,{type:"submit",text:"Gravar",icon:"save",variants:"submit",onClick:c})),o.id&&!l.dontDelete&&(!u.dontDelete||u.dontDelete({data:o}))&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(oa,{text:"Deletar",icon:"delete",variants:"delete",onClick:s(o)})),o.id&&!l.dontCreate&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(oa,{text:"Criar Novo",icon:"add",component:st,to:"".concat(n.formPath,"/new")})),o.id&&!l.dontCreate&&!l.dontCopy&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(oa,{text:"Criar como Copia",icon:"file_copy",onClick:function(){var e=Object(be.a)({},o);delete e.id,delete e.uuid,localStorage.setItem("copy-".concat(n.name),JSON.stringify(e)),ft(St(i),(function(e){e.defaultValue&&window.localStorage.setItem("dont-default".concat(e.identity),!0)})),t.push("".concat(n.formPath,"/new"))}})),p&&p({isForm:!0,data:o}))}))),Kn=a(694),er=a(686),tr=a(692),ar=a(687),nr=function(e){var t=e.field,a=e.formItem,r=e.value,i=e.loading,o=e.handleChange,c=void 0===o?function(){}:o,s=Object(n.useContext)(Je);Object(n.useEffect)((function(){if(t.populate){var e=t.populate;Array.isArray(e)||(e=[e]),r&&ht(e,(function(e){a[e]!==r&&c({target:{name:e,value:r}})}))}}),[t,a,c,r]),Object(n.useEffect)((function(){var e=!0,n=function(){var e=Object(Ne.a)(ke.a.mark((function e(a){var n,r;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.config,e.next=3,Mt({client:s});case 3:(r=pt(s.get("config.".concat(n)),"value"))&&c({target:{name:t.identity,value:r}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!a[t.identity]){if(t.populate){var r=t.populate;Array.isArray(r)||(r=[r]);var o=!1;ht(r,(function(e){!o&&a[e]&&(c({target:{name:t.identity,value:a[e]}}),o=!0)})),o&&(e=!1)}if(e&&!Et(i)&&!i&&t.defaultValue)if(window.localStorage.getItem("dont-default".concat(t.identity)))window.localStorage.removeItem("dont-default".concat(t.identity));else{var d=t.defaultValue,l=pt(d,"config"),m=pt(d,"this"),u=pt(d,"customValue");l?n({config:l}):m?c({target:{name:t.identity,value:pt(a,m)}}):u?u({data:a,field:t,client:s,handleChange:c}):d&&c({target:{name:t.identity,value:d}})}}}),[s,t,c,a,i])},rr=a(357),ir=mt((function(e){return{popper:{zIndex:10,minWidth:300},wrapper:{position:"relative"},menu:{marginTop:e.spacing(1),minWidth:300,maxHeight:300,overflowY:"auto"},avatar:{width:e.spacing(4),height:e.spacing(4),marginRight:e.spacing(1),color:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.field,i=e.formItem,o=e.query,s=void 0===o?{}:o,d=e.value,l=e.handleChange,m=e.TextFieldProps,u=void 0===m?{}:m,p=e.InputProps,f=void 0===p?{}:p,h=pt(a,"model.hasIdentity"),y=pt(a,"model.customContent.queryField"),g=pt(a,"model.customName"),v={};h?v.identity=1:y?v[y]=1:v.name=1;var b=Object(be.a)({},s,{$sort:Object(be.a)({},v)}),E=a.model||"",x=pt(a,"model.this");x&&(E=pt(i,x));var O=pt(a,"model.service"),w=pt(a,"model.query"),j=function(){};O&&(w&&(b=Object(be.a)({},b,{},w)),j=pt(a,"model.useCustomQuery")||j,E=O),b=Object(be.a)({},b,{},j({data:i}));var k=Ht({model:E,query:b}),N=k.list,S=k.loading,I=k.errors,C=k.setModel,A=k.setQuery,D=Vt({model:E,id:d}),T=D.item,P=D.loading,M=D.setModel;Object(n.useEffect)((function(){C(E),M(E)}),[C,M,E]);var F=JSON.stringify(b);Object(n.useEffect)((function(){A(JSON.parse(F))}),[A,F]);var q=Object(n.useState)([]),R=Object(c.a)(q,2),_=R[0],U=R[1];Object(n.useEffect)((function(){E&&U(N)}),[E,N]),Object(n.useEffect)((function(){a.enum&&U(ft(a.enum,(function(e){return{id:e,name:e}})))}),[a.enum]);var W=wt((function(e){var t=e.value,a=kt(Ot(Nt(t))),n={};h?n.$or=[{identity:{$like:"%".concat(a,"%")}},{name:{$like:"%".concat(a,"%")}}]:y?(n[y]={$like:"%".concat(a,"%")},w&&w[y]&&(n[y]=Object(be.a)({},n[y],{},w[y]))):(n.name={$like:"%".concat(a,"%")},w&&w.name&&(n.name=Object(be.a)({},n.name,{},w.name))),A((function(e){return Object(be.a)({},e,{},n)}))}),300),L=!S&&0===_.length||!a.enum&&I,z=Object(n.useRef)(null),Y=Object(n.useRef)(null);Object(n.useEffect)((function(){P||a.enum||(pt(T,"id")&&z.current?z.current.selectItem(T):z.current.selectItem(null))}),[T,P,a.enum]);var B=pt(i,a.identity);Object(n.useEffect)((function(){a.enum&&B&&z.current&&z.current.selectItem({id:B,name:B,value:B})}),[B,a.enum]);var H=Object(n.useState)(),V=Object(c.a)(H,2),J=V[0],Q=V[1],$=function(e){e.target.select(),Q(!0)},G=function(){return Q(!1)},X=function(){window.localStorage.setItem("dont-default".concat(a.identity),!0),z.current.selectItem(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(rr.a,{ref:function(e){return z.current=e},onChange:function(e){var t=pt(e,"id")||null;"".concat(pt(T,"id"))!=="".concat(t)&&l({target:{name:a.identity,value:t},field:a}),t&&G()},onInputValueChange:function(e){return W({value:e})},itemToString:function(e){return g?g({data:e}):"".concat(pt(e,"identity")?"".concat(pt(e,"identity")," - "):"").concat(pt(e,"name")||"")}},(function(e){var n=e.getInputProps,i=e.getItemProps,o=(e.getMenuProps,e.isOpen),c=e.inputValue;return r.a.createElement("div",{className:t.wrapper},r.a.createElement(la.a,Object.assign({InputProps:Object(be.a)({inputRef:function(e){return Y.current=e}},f,{},n(),{onFocus:$,onBlur:G})},u)),!u.disabled&&!f.readOnly&&d&&r.a.createElement(oa,{type:"icon",text:"Deletar",icon:"close",variants:"deleteAction clearAction",onClick:X}),r.a.createElement(ua.a,{open:J||o,anchorEl:Y.current,className:t.popper},r.a.createElement(fa.a,{square:!0,style:{width:Y.current?Y.current.clientWidth:null},className:t.menu},L&&r.a.createElement(Hn.a,{disabled:!0},r.a.createElement(wa,null)),!L&&(!!c||!S)&&ft(_,(function(e){return r.a.createElement(Hn.a,Object.assign({},i({item:e}),{key:e.id,value:e.id,selected:d===e.id}),e.image&&r.a.createElement(Kt.a,{alt:e.name,src:e.image,className:t.avatar}),!e.image&&a.icon&&"svg"===a.icon.type&&r.a.createElement("img",{className:t.avatar,alt:"icon",src:a.icon.src}),!e.image&&a.icon&&!a.icon.type&&r.a.createElement(ia.a,{className:t.avatar},a.icon),!g&&r.a.createElement(ya.a,{variant:"body1"},e.identity?"".concat(e.identity," - "):"",e.name),g&&r.a.createElement(ya.a,{variant:"body1"},g({data:e})))})))))})),a.loading&&r.a.createElement(ka,null))})),or=a(26),cr=function(e){var t=e.inputRef,a=e.onChange,n=e.name,i=e.value,o=Object(ea.a)(e,["inputRef","onChange","name","value"]);return r.a.createElement(or.a,Object.assign({},o,{allowEmptyFormatting:!0,thousandSeparator:".",decimalSeparator:",",decimalScale:0,type:"text",value:i,onValueChange:function(e){var t=e.floatValue;parseFloat(i)!==t&&a({target:{name:n,value:t||0}})},getInputRef:t}))},sr=mt((function(e){var t;return{wrapper:{position:"relative"},option:{padding:"0 ".concat(e.spacing(2),"px")},textField:(t={margin:0,minWidth:250,backgroundColor:e.palette.common.white,'& input,& div[aria-haspopup="true"]':{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},'& label[data-shrink="false"]':{top:-12}},Object(ge.a)(t,e.breakpoints.down("md"),{minWidth:200}),Object(ge.a)(t,e.breakpoints.down("xs"),{minWidth:170}),t),checkbox:{padding:e.spacing(1),minWidth:"unset"},label:{margin:0},error:{color:"#f44336",margin:0,fontSize:"0.75rem",marginTop:e.spacing(1)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.field,i=e.formItem,o=e.formErrors,s=e.query,d=void 0===s?{}:s,l=e.handleChange,m=pt(a,"model.hasIdentity"),u=pt(a,"model.customContent.queryField"),p={};m?p.identity=1:u?p[u]=1:p.name=1;var f=Object(be.a)({},d,{$sort:Object(be.a)({},p)}),h=a.model||"",y=pt(a,"model.this");y&&(h=pt(i,y));var g=pt(a,"model.service"),v=pt(a,"model.query"),b=function(){};g&&(v&&(f=Object(be.a)({},f,{},v)),b=pt(a,"model.useCustomQuery")||b,h=g),f=Object(be.a)({},f,{},b({data:i}));var E=Ht({model:h,query:f}),x=E.list,O=E.loading,w=E.errors,j=E.setModel,k=E.setQuery;Object(n.useEffect)((function(){j(h)}),[h,j]);var N=JSON.stringify(f);Object(n.useEffect)((function(){k(JSON.parse(N))}),[N,k]);var S=Object(n.useState)([]),I=Object(c.a)(S,2),C=I[0],A=I[1];Object(n.useEffect)((function(){h&&A(x)}),[x,h]);var D=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o,c,s;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.arraySplice,n=t.identitySplice,r=t.arrayPush,i=t.identityPush,o=t.field,c=t.id,-1===(s=bt(a,{id:c}))){e.next=6;break}return a.splice(s,1),e.next=6,l({target:{name:n,value:a},field:o});case 6:return r.push({id:c}),e.abrupt("return",l({target:{name:i,value:r},field:o}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.id;return function(){var e=Object(Ne.a)(ke.a.mark((function e(n){var r,o,c;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pt(n,"target.checked"),o=pt(i,a.identity)||[],c=pt(i,"".concat(a.identity,":delete"))||[],!r){e.next=8;break}return e.next=6,D({arraySplice:c,identitySplice:"".concat(a.identity,":delete"),arrayPush:o,identityPush:a.identity,identity:a.identity,field:a,id:t});case 6:e.next=10;break;case 8:return e.next=10,D({arraySplice:o,identitySplice:a.identity,arrayPush:c,identityPush:"".concat(a.identity,":delete"),field:a,id:t});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=!O&&0===C.length||!a.enum&&w,M=pt(o,a.identity),F=pt(a,"customContent.customOptionContent");return r.a.createElement("div",{className:t.wrapper},r.a.createElement(ya.a,{variant:"body1"},a.text),!!M&&r.a.createElement(ya.a,{className:t.error,variant:"body1"},"string"===typeof M?M:"Campo obrigat\xf3rio."),r.a.createElement(ga.a,{className:t.options},P&&r.a.createElement(ba.a,{disabled:!0},r.a.createElement(wa,null)),!P&&!O&&ft(C,(function(e){return r.a.createElement(ba.a,{className:t.option,button:!0,key:e.id},r.a.createElement(Ha.a,{className:t.label,control:r.a.createElement(Kn.a,{className:ut(t.textfield,t.checkbox),checked:!!vt(pt(i,a.identity),{id:e.id}),name:a.identity,onChange:T({id:e.id}),color:"primary"}),label:e.name}),F&&F({option:e,field:a,data:i}))}))))})),dr=a(97),lr=a(340),mr=a(237),ur=a.n(mr),pr=a(341),fr=a.n(pr),hr=(a(536),mt((function(e){var t;return{textField:(t={margin:0,minWidth:250,'& input,& div[aria-haspopup="true"]':{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},'& label[data-shrink="false"]':{top:-12}},Object(ge.a)(t,e.breakpoints.down("md"),{minWidth:200}),Object(ge.a)(t,e.breakpoints.down("xs"),{minWidth:170}),t),inputBootstrap:{borderRadius:4,position:"relative",backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:14,width:"auto","& div":{padding:"0 !important"},"& ::before":{display:"none"},"& ::after":{display:"none"}},checkboxLabel:{marginLeft:"-".concat(e.spacing(1),"px")},checkbox:{padding:e.spacing(1),minWidth:"unset"},editor:{backgroundColor:e.palette.common.white},readOnly:{backgroundColor:e.palette.primary.form,pointerEvents:"none"},disabled:{backgroundColor:e.palette.primary.form,pointerEvents:"none"},fullWidth:{width:"100%",minWidth:"100%"},short:{width:80,minWidth:"unset"},setup:Object(ge.a)({width:225,minWidth:"unset"},e.breakpoints.down("md"),{width:150}),wiki:{background:"none","& label, & :before":{display:"none"},"& > div":{margin:0},"& input":{padding:0}},display:{width:"100%","& fieldset":{border:"none"}},error:{color:"#f44336",margin:0,fontSize:"0.75rem",marginTop:e.spacing(1)},contact:{backgroundColor:"transparent !important"}}}),{withTheme:!0})((function(e){var t,a=e.classes,i=e.field,o=e.formItem,s=e.formErrors,d=e.loading,l=e.query,m=void 0===l?{}:l,u=e.options,p=void 0===u?{}:u,f=e.handleChange,h=void 0===f?function(){}:f,y=Object(n.useRef)(),g=function(e){switch(e.type){case"integer":case"decimal":case"year":return"number";case"date":case"datetime":case"string":default:return"text"}}(i),v=function(e){var t=e.formItem,a=e.field,n=pt(t,a.identity);switch(n=Et(n)?"":n,a.type){case"date":case"datetime":case"time":return new Date(n||Date.now());default:return n}}({formItem:o,field:i}),b="boolean"===typeof i.required?i.required:!!pt(o,i.required),E={};"integer"===i.type&&(E.inputComponent=cr),i.autoFocus&&(E.autoFocus=!0);var x=Et(i.disabled)?!Et(p.disabled)&&p.disabled:i.disabled,O=pt(i,"readOnly.ifThis"),w=pt(i,"readOnly.until"),j=pt(i,"readOnly.customIf"),k=pt(i,"variants.useVariantIf"),N=function(){},S=function(){};N=pt(i,"readOnly.useCustomIf")||N,S=pt(i,"variants.useVariantIf")||S;var I=N({data:o}),C=S({data:o}),A=Et(I)?Et(i.readOnly)?!Et(p.readOnly)&&p.readOnly:i.readOnly:I,D=Et(C)?!Et(i.variants)&&i.variants:C;w&&(A=!pt(o,w)),O&&(A=!!pt(o,O)),j&&(A=j({data:o})),k&&(D=k({data:o}));var T=Object(n.useState)(A),P=Object(c.a)(T,2),M=P[0],F=P[1],q=Object(n.useState)(D),R=Object(c.a)(q,2),_=R[0],U=R[1];Object(n.useEffect)((function(){F(A)}),[A]),Object(n.useEffect)((function(){U(D)}),[D]),M&&(E.readOnly=!0),Object(n.useEffect)((function(){i.max&&y.current&&(y.current.maxLength=i.max)}),[i.max]),Object(n.useEffect)((function(){!Et(i.maxValue)&&y.current&&(y.current.max=i.maxValue)}),[i.maxValue]),Object(n.useEffect)((function(){!Et(i.minValue)&&y.current&&(y.current.min=i.minValue)}),[i.minValue]),nr({field:i,formItem:o,value:v,loading:d,handleChange:h});var W=function(e){switch(e.field.type){case"date":return er.a;case"datetime":return tr.a;case"time":return ar.a;default:return la.a}}({field:i}),L=function(e){switch(e.field.type){case"date":return"DD/MM/YYYY";case"datetime":return"DD/MM/YYYY HH:mm";case"time":return"HH:mm";default:return""}}({field:i}),z=function(e){return"boolean"===i.type?h({target:{name:i.identity,value:pt(e,"target.checked")},field:i}):e.target?h({target:e.target,field:i}):h({target:{name:i.identity,value:e.toISOString()},field:i})},Y=pt(s,i.identity),B=Object(n.useState)(dr.EditorState.createEmpty()),H=Object(c.a)(B,2),V=H[0],J=H[1];Object(n.useEffect)((function(){if("content"===i.type){var e=fr()(v),t=dr.ContentState.createFromBlockArray(e.contentBlocks);kt(ur()(Object(dr.convertToRaw)(V.getCurrentContent())))!==kt(v)&&J(dr.EditorState.createWithContent(t))}}),[v]);var Q={error:!!Y,helperText:Y?"string"===typeof Y?Y:"Campo obrigat\xf3rio.":"",disabled:!!x,required:b,name:i.identity,label:i.text,margin:"normal",className:ut(a.textField,(t={},Object(ge.a)(t,a.readOnly,M),Object(ge.a)(t,a.disabled,x),t),ft(xt(_," "),(function(e){return a[e]})),ft(xt(i.variants," "),(function(e){return a[e]})))};return"time"===i.type&&(Q.ampm=!1,Q.disableOpenOnEnter=!0,Q.keyboard=!0),"datetime"===i.type&&(Q.ampm=!1),"checklist"===i.type?r.a.createElement(sr,{field:i,query:m,formItem:o,formErrors:s,handleChange:h}):i.model||i.enum?r.a.createElement(ir,{field:i,query:m,formItem:o,value:v,handleChange:h,TextFieldProps:Q,InputProps:E}):"content"===i.type?r.a.createElement("div",{className:ut(Object(ge.a)({},a.editor,!M))},!!Y&&r.a.createElement(ya.a,{className:a.error,variant:"body1"},"string"===typeof Y?Y:"Campo obrigat\xf3rio."),r.a.createElement(lr.Editor,{readOnly:M,toolbarHidden:M,editorState:V,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:function(e){J(e),h({target:{name:i.identity,value:e?ur()(Object(dr.convertToRaw)(e.getCurrentContent())):""},field:i})}})):"boolean"===i.type?r.a.createElement(Ha.a,{className:a.checkboxLabel,control:r.a.createElement(Kn.a,{className:ut(a.textfield,a.checkbox),checked:!!pt(o,i.identity),name:i.identity,onChange:z,disabled:M,color:"primary"}),label:i.text}):r.a.createElement(W,Object.assign({format:L,type:g,value:v,checked:v,onChange:z,InputProps:E,inputRef:function(e){return y.current=e},multiline:"longtext"===i.type},Q))}))),yr=mt((function(e){return{nested:{width:"auto",alignItems:"center",flexWrap:"nowrap"},fullWidth:{width:"100%"},inputBootstrap:{width:"auto",alignItems:"center",flexWrap:"nowrap","& div:first-child":{flexDirection:"column"},"& div:last-child":{height:"100% !important","& div, & textarea":{height:"100% !important",padding:"0 !important"}}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.fields,i=e.formItem,o=e.formErrors,s=e.handleChange,d=e.loading,l=e.query,m=void 0===l?{}:l,u=e.options,p=void 0===u?{}:u,f=e.deep,h=void 0===f?0:f;return ft(a,(function(e,a){var l=e.fields||Array.isArray(e),u={};l&&(u.spacing=2);var f=pt(e,"show.ifThis"),y=function(){},g=(y=pt(e,"show.useCustomIf")||y)({data:i}),v=Et(g)?!!Et(e.show)||e.show:g;f&&(v=i[f]);var b=Object(n.useState)(v),E=Object(c.a)(b,2),x=E[0],O=E[1];return Object(n.useEffect)((function(){O(v)}),[v]),r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(Gt.a,Object.assign({item:!0,container:l,className:ut(Object(ge.a)({},t.nested,l&&0!==h),ft(xt(e.variants," "),(function(e){return t[e]})))},u),l&&r.a.createElement(yr,{fields:e.fields||e,formItem:i,formErrors:o,handleChange:s,loading:d,query:m,options:p,deep:h+1}),!l&&x&&r.a.createElement(hr,{field:e,formItem:i,formErrors:o,handleChange:s,query:m,options:p,loading:d})),e.customData&&r.a.createElement(Gt.a,{item:!0},e.customData({data:i,field:e})))}))})),gr=yr,vr=function(e){var t=e.fields,a=e.options,r=void 0===a?{}:a;Object(n.useEffect)((function(){var e=function(e){if(13===e.which){e.preventDefault();var a=St(t),n=e.target;if("INPUT"===n.nodeName){var r=a[bt(a,{identity:n.name})+1];r&&document.querySelector("input[name=".concat(r.identity,"]")).focus()}else document.querySelector("input[name=".concat(pt(a,"0.identity"),"]")).focus()}};return r.dontUseEnter||document.addEventListener("keypress",e),function(){return document.removeEventListener("keypress",e)}}),[t,r.dontUseEnter])},br=lt(mt((function(e){return{container:{flexWrap:"nowrap",overflow:"hidden"},tree:{flex:1,maxWidth:"25%",overflowY:"auto",overflowX:"hidden"},wrapper:{flex:1,overflowX:"auto"},form:{flex:1,width:"100%",overflowY:"auto",overflowX:"hidden",padding:"".concat(e.spacing(1),"px 0")},fullWidth:{overflowX:"auto","&>div":{width:"100%"}}}}),{withTheme:!0})((function(e){var t=e.history,a=e.classes,i=e.model,o=e.treeModel,s=e.fields,d=e.formErrors,l=void 0===d?{}:d,m=e.data,u=e.query,p=void 0===u?{}:u,f=e.hooks,h=void 0===f?{}:f,y=e.options,g=void 0===y?{}:y,v=e.loading,b=e.errors,E=e.customContent,x=void 0===E?{}:E,O=e.customActions,w=zt().permissions,j=Object(n.useState)(),k=Object(c.a)(j,2),N=k[0],S=k[1],I=Object(n.useState)(),C=Object(c.a)(I,2),A=C[0],D=C[1],T=Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S(Date.now()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),P=Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(Date.now()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()})),M=Object(n.useCallback)((function(e){var a=e.data;(function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pt(m,"id")===a.id||g.noRedirect||t.push("".concat(i.formPath,"/").concat(a.id));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i.formPath,g.noRedirect,m]),F=Yt({model:i.name,fields:s,data:m,hooks:Dt({hooks:h,identity:"afterSubmit",hooksToAdd:[T,M]})}),q=F.formItem,R=F.formErrors,_=F.handleChange,U=F.handleSubmit,W=F.loading,L=F.errors,z=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.noRedirect||t.push(i.listPath);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Bt({model:i.name,data:m,hooks:Object(be.a)({},Dt({hooks:h,identity:"beforeDelete"}),{},Dt({hooks:h,identity:"afterDelete",hooksToAdd:[z,P]}))}),B=Y.handleDelete,H=Y.loading,V=Y.errors;vr({fields:s,options:g});var J=b||L||V,Q=v||W||H,$=_t({privileges:g.writePermissions,permissions:w}),G=$&&(!g.dontSave||q.id&&!g.dontDelete||q.id&&!g.dontCreate),X=localStorage.getItem("copy-".concat(i.name)),Z=JSON.stringify(JSON.parse(X||"{}"));Object(n.useEffect)((function(){var e=JSON.parse(Z);localStorage.removeItem("copy-".concat(i.name)),Object.keys(e).length>0&&setTimeout((function(){return ft(St(s),(function(t){var a=pt(e,t.identity);a&&_({target:{name:t.identity,value:a},field:t})}))}),0)}),[Z,i.name,s,_]);var K=function(e){e.preventDefault(),Q||U(e)},ee=!Et(q.id);return!g.isAdmin&&g.chatSupport&&(g=Object(be.a)({},g,{readOnly:ee,dontSave:ee})),g.isAdmin&&g.chatSupport&&(g=Object(be.a)({},g,{readOnly:!0})),r.a.createElement(Gt.a,{container:!0,spacing:2,className:ut(a.container,"form-container")},!g.dontShowTree&&r.a.createElement(ra.a,{smDown:!0},r.a.createElement(Gt.a,{item:!0,className:a.tree},r.a.createElement(fa.a,{elevation:4},r.a.createElement(dn,{model:o||i,reload:N,reloadTree:T,query:p,customContent:x})))),r.a.createElement(Gt.a,{item:!0,className:a.wrapper},!q.id&&x.replaceNewItem&&r.a.createElement(Gt.a,null,x.replaceNewItem({reloadHomeHook:P,reloadHome:A})),(q.id&&x.replaceNewItem||q.id&&!x.replaceNewItem||!q.id&&!x.replaceNewItem||!q.id&&x.replaceNewItem&&!g.isAdmin)&&r.a.createElement(Gt.a,{container:!0,direction:"column",component:"form",onSubmit:function(e){if(e.preventDefault(),g.saveOnEnter){if(Q)return;U(e)}},className:ut(a.container,"form-wrapper")},x.beforeForm&&r.a.createElement(Gt.a,null,x.beforeForm({data:q})),g.chatSupport&&q.id&&!g.isAdmin&&G||G&&r.a.createElement(Zn,{model:i,fields:s,formItem:q,handleSubmit:K,handleDelete:B,options:g,customContent:x,customActions:O}),Q&&r.a.createElement(ka,null),J&&r.a.createElement(sn,{errors:x.customError?x.customError({errors:J}):J}),r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2,className:a.form},r.a.createElement(gr,{fields:s,formErrors:Object(be.a)({},l,{},R),formItem:q,handleChange:_,loading:v,options:Object(be.a)({},g,{readOnly:!$||g.readOnly})}),x.afterForm&&r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2,className:a.fullWidth},x.afterForm({data:q,handleChange:_,reloadTree:T,handleSubmit:K}))))))}))),Er=lt(mt((function(e){return{}}),{withTheme:!0})((function(e){var t=e.match.params,a=(e.classes,e.metadata),n=e.form,i=e.links,o=e.query,c=void 0===o?{}:o,s=e.options,d=void 0===s?{}:s,l=e.customContent,m=void 0===l?{}:l,u=e.customActions,p=Vt({model:a.name,id:pt(t,a.paramsProp)}),f=p.item,h=p.loading,y=p.errors;return r.a.createElement(r.a.Fragment,null,!d.dontUseBreadcrumbs&&r.a.createElement(Dn,{links:[].concat(Object(ve.a)(i),[{text:pt(f,"id")?m.customBreadCrumbsName?m.customBreadCrumbsName({data:f}):f.name:a.newItemText,href:"".concat(a.formPath,"/").concat(pt(t,a.paramsProp))}])}),r.a.createElement(br,{model:a,fields:n,data:f,query:c,options:d,loading:h,errors:y,customContent:m,customActions:u}))}))),xr=function(e){var t=e.metadata,a=e.form,n=e.links,i=e.query,o=void 0===i?{}:i,c=e.options,s=void 0===c?{}:c,d=e.customContent,l=void 0===d?{}:d,m=e.customActions;return r.a.createElement(Er,{metadata:t,form:a,links:n,query:o,options:s,customContent:l,customActions:m})},Or=a(688),wr=mt((function(e){return{card:{height:"100%",width:"100%",textDecoration:"none",boxShadow:"none",background:"none"},title:{display:"flex",alignItems:"center"},area:{height:"100%",width:"100%",position:"relative",paddingLeft:e.spacing(3),display:"flex",justifyContent:"left"},kpi:Object(ge.a)({fontSize:"1.5rem",position:"absolute",right:30,bottom:10,display:"flex",flexDirection:"column",alignItems:"center"},e.breakpoints.down("sm"),{position:"static",flexDirection:"row",fontSize:"1rem","& > span:first-of-type":{order:1,marginLeft:e.spacing(1)}}),icon:{height:50,width:50,fontSize:50,color:"dark"===e.palette.type?e.palette.common.white:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.name,n=e.icon,i=e.svgIcon,o=e.description,c=e.href,s=e.kpi,d={};return c&&(d.component=st,d.to=c),r.a.createElement(Ia.a,Object.assign({className:t.card},d),r.a.createElement(Or.a,{className:t.area},n&&"svg"===n.type&&r.a.createElement("img",{className:t.icon,alt:"icon",src:n.src}),n&&!n.type&&r.a.createElement(ia.a,{className:t.icon},n),i,r.a.createElement(qn.a,null,r.a.createElement(ya.a,{className:t.title,variant:"h5"},a),r.a.createElement(ya.a,{component:"p"},o),!Et(s)&&r.a.createElement("div",{className:t.kpi},s))))})),jr=mt((function(e){return{panel:{},header:{backgroundColor:e.palette.primary.main,"&>div":{alignItems:"center"}},gridItem:{outline:"solid lightgrey 1px",outlineOffset:"-4px"},disabled:{pointerEvents:"none",background:"lightgrey"},icon:{marginRight:e.spacing(1),color:"white"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.actions,i=zt().permissions,o=Object(n.useState)(0),s=Object(c.a)(o,2),d=s[0],l=s[1],m=function(e){var t=e.index;return function(){d===t?l():l(t)}};return r.a.createElement(r.a.Fragment,null,ft(yt(a,(function(e){return!e.permissions||_t({privileges:e.permissions,permissions:i})})),(function(e,a){var n=e.name,o=e.icon,c=e.svgIcon,s=e.actions;return r.a.createElement(nn.a,{key:n,className:t.panel,expanded:d===a,onChange:m({index:a})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(ia.a,{style:{color:"white"}},"expand_more_icon")},!c&&o&&r.a.createElement(ia.a,{className:t.icon},o),c,r.a.createElement(ya.a,{variant:"h5",style:{color:"white"}},n)),r.a.createElement(on.a,null,r.a.createElement(Gt.a,{container:!0,spacing:1},ft(yt(s,(function(e){return!e.permissions||_t({privileges:e.permissions,permissions:i})})),(function(e){var a=e.name,n=e.description,i=e.href,o=e.disabled;return r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,lg:4,key:a,className:ut(t.gridItem,Object(ge.a)({},t.disabled,o))},r.a.createElement(wr,{name:a,description:n,href:i}))})))))})))})),kr=function(e){var t=e.actions;return r.a.createElement(jr,{actions:t})},Nr=[[[{text:"Turno",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}],[{text:"Hora Inicio",identity:"startTime",required:!0,type:"time"},{text:"Hora Fim",identity:"endTime",required:!0,type:"time"}]],[{text:"Seg",identity:"monday",type:"boolean"},{text:"Ter",identity:"tuesday",type:"boolean"},{text:"Qua",identity:"wednesday",type:"boolean"},{text:"Qui",identity:"thursday",type:"boolean"},{text:"Sex",identity:"friday",type:"boolean"},{text:"Sab",identity:"saturday",type:"boolean"},{text:"Dom",identity:"sunday",type:"boolean"}]],Sr=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.expanded,n=e.handleExpand,i=e.handleSubmit,o=e.FormRef,c=e.setFormRef,s="new"===a;return r.a.createElement(nn.a,{className:t.panel,expanded:s,onChange:n({id:"new"})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{title:"Criar novo turno para o local"},r.a.createElement(ia.a,null,"add_icon")),!s&&r.a.createElement(ya.a,null,"Criar novo turno para o local:"))},s&&r.a.createElement(oa,{text:"Gravar Turno",variants:"header",onClick:function(e){e.stopPropagation(),i()}})),r.a.createElement(on.a,{className:t.details,ref:c({id:"new"})},!o.current&&r.a.createElement(ya.a,null,"Placeholder")))})),Ir=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header,"&>div":{alignItems:"center"}},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.turn,n=e.expanded,i=e.handleExpand,o=e.handleSubmit,c=e.handleDelete,s=e.FormRef,d=e.setFormRef,l=e.options,m=void 0===l?{}:l,u=n===a.id;return r.a.createElement(nn.a,{className:t.panel,expanded:u,onChange:i(Object(be.a)({},a,{id:a.id}))},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(ia.a,null,"expand_more_icon")},r.a.createElement(ya.a,null,pt(a,"name")," (",f()(pt(a,"startTime")).format("HH:mm"),"-",f()(pt(a,"endTime")).format("HH:mm")," ",pt(a,"monday")?"Seg":""," ",pt(a,"tuesday")?"Ter":""," ",pt(a,"wednesday")?"Qua":""," ",pt(a,"thursday")?"Qui":""," ",pt(a,"friday")?"Sex":""," ",pt(a,"saturday")?"Sab":""," ",pt(a,"sunday")?"Dom":"",")"),u&&r.a.createElement(r.a.Fragment,null,!m.readOnly&&r.a.createElement(oa,{text:"Gravar Turno",variants:"header",onClick:function(e){e.stopPropagation(),o({turn:a})}}),!m.readOnly&&r.a.createElement(oa,{text:"Remover",variants:"delete header",onClick:function(e){e.stopPropagation(),c({turn:a})}}))),r.a.createElement(on.a,{className:t.details,ref:d({id:a.id})},!s.current&&r.a.createElement(ya.a,null,"Placeholder")))})),Cr=a(614),Ar=mt((function(e){return{container:{flexWrap:"nowrap","& .form-container":{margin:0,width:"100%","&>div":{padding:0}},"& .form-wrapper>div":{overflowY:"hidden"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.fields,n=e.formItem,i=e.formErrors,o=e.handleChange,c=e.FormRef,s=e.options,d=void 0===s?{}:s;return r.a.createElement(Cr.a,{container:c.current},r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:2,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(gr,{fields:a,formItem:n,formErrors:i,handleChange:o,options:d}))))})),Dr=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.plant,a=e.handleChange,i=e.options,o=void 0===i?{}:i,s=zt().permissions,d=Object(n.useContext)(Je),l=Object(n.useState)({}),m=Object(c.a)(l,2),u=m[0],p=m[1],h=Object(n.useState)({}),y=Object(c.a)(h,2),g=y[0],v=y[1],b={plantId:t.id},E=Ht({model:"turns",query:Object(be.a)({},b,{$populateAll:!0})}),x=E.list,O=E.reload,w=E.setQuery,j=JSON.stringify(b);Object(n.useEffect)((function(){w((function(e){return Object(be.a)({},e,{},JSON.parse(j))})),D()}),[j,w]);var k=Object(n.useRef)(null),N={},S=function(e){var t=e.id;return function(e){return N[t]=e}},I=Object(n.useState)(),C=Object(c.a)(I,2),A=C[0],D=C[1],T=function(e){var t=e.id,a=Object(ea.a)(e,["id"]);return function(){k.current=N[t],P(),A===t?(D(),k.current=null):(D(t),p(Object(be.a)({id:t},a)))}},P=function(){v({}),p({})},M=function(){O()},F=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var a,n,r,i,o=arguments;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>0&&void 0!==o[0]?o[0]:{},n=a.turn,v({}),r=!0,Tt({fields:Nr,formItem:u,setFormErrors:v})||(r=!1),(i=Object(be.a)({},b,{},n,{},u,{id:pt(n,"id")})).monday||i.tuesday||i.wednesday||i.thursday||i.friday||i.saturday||i.sunday||(r=!1,v((function(e){return Object(be.a)({},e,{name:"Selecione pelo menos um dia"})}))),ht(x,(function(e){if("".concat(e.id)!=="".concat(i.id)){var t=f()(e.startTime).set({year:2019,month:0,date:1}),a=f()(e.endTime).set({year:2019,month:0,date:1});t.isSameOrAfter(a,"minute")&&t.subtract(1,"days");var n=f()(i.startTime).set({year:2019,month:0,date:1}),o=f()(i.endTime).set({year:2019,month:0,date:1});n.isSameOrAfter(o,"minute")&&n.subtract(1,"days"),(e.monday&&i.monday||e.tuesday&&i.tuesday||e.wednesday&&i.wednesday||e.thursday&&i.thursday||e.friday&&i.friday||e.saturday&&i.saturday||e.sunday&&i.sunday)&&(n.isBetween(t,a,"minute")||o.isBetween(t,a,"minute"))&&(r=!1,v((function(e){return Object(be.a)({},e,{startTime:"O hor\xe1rio marcado se sobrep\xf5e a outro turno"})})))}})),r){e.next=9;break}return e.abrupt("return");case 9:return i.id||(i.startTime=f()(i.startTime).subtract(1,"hours").toDate(),i.endTime=f()(i.endTime).subtract(1,"hours").toDate()),e.next=12,d.service("plants").patch(t.id,{turns:[i]});case 12:M(),P(),D();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.turn,window.confirm("Voc\xea quer apagar o item?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d.service("turns").remove(a.id);case 5:M();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=Math.round(10*gt(x,(function(e,t){var a=yt(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],(function(e){return!!t[e]})).length,n=f()(t.endTime).diff(t.startTime,"minutes");return n<0&&(n=1440+n),e+a*n}),0)/60)/10;e&&(d.service("plants").patch(t.id,{hoursPerWeek:e}),a({target:{name:"hoursPerWeek",value:e}})),a({target:{name:"turns",value:x},field:{type:"table"}})}),[d,t.id,x,a]);var R=_t({privileges:o.writePermissions,permissions:s});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0},ft(x,(function(e,t){return r.a.createElement(Ir,{key:t,turn:e,expanded:A,handleExpand:T,handleSubmit:F,handleDelete:q,FormRef:k,setFormRef:S,options:{readOnly:!R}})}))),R&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(Sr,{expanded:A,handleExpand:T,handleSubmit:F,FormRef:k,setFormRef:S})),k.current&&r.a.createElement(Ar,{fields:Nr,formItem:u,formErrors:g,handleChange:function(e){var t=e.target;return p((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))}))},FormRef:k,options:{readOnly:!R}}))})),Tr=[[[{text:"Descri\xe7\xe3o",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Data Inicio",identity:"startDate",required:!0,type:"datetime"},{text:"Data Fim",identity:"endDate",required:!0,type:"datetime"}],[{text:"N\xe3o Trabalhado",identity:"noWorkDay",type:"boolean",defaultValue:!0},{text:"Data Recorrente",identity:"recurring",type:"boolean"}]]],Pr=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.expanded,n=e.handleExpand,i=e.handleSubmit,o=e.FormRef,c=e.setFormRef,s="new"===a;return r.a.createElement(nn.a,{className:t.panel,expanded:s,onChange:n({id:"new"})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{title:"Criar novo feriado para o local"},r.a.createElement(ia.a,null,"add_icon")),!s&&r.a.createElement(ya.a,null,"Criar novo feriado para o local:"))},s&&r.a.createElement(oa,{text:"Gravar Feriado",variants:"header",onClick:function(e){e.stopPropagation(),i()}})),r.a.createElement(on.a,{className:t.details,ref:c({id:"new"})},!o.current&&r.a.createElement(ya.a,null,"Placeholder")))})),Mr=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header,"&>div":{alignItems:"center"}},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.holiday,n=e.expanded,i=e.handleExpand,o=e.handleSubmit,c=e.handleDelete,s=e.FormRef,d=e.setFormRef,l=e.options,m=void 0===l?{}:l,u=n===a.id,p=f()(pt(a,"startDate")),h=f()(pt(a,"endDate"));return r.a.createElement(nn.a,{className:t.panel,expanded:u,onChange:i(Object(be.a)({},a,{id:a.id}))},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(ia.a,null,"expand_more_icon")},r.a.createElement(ya.a,null,pt(a,"name")," (",p.format("DD/MM/YYYY"),p.isSame(h,"day")?"":"-\n          ".concat(h.format("DD/MM/YYYY"))," ",pt(a,"noWorkDay")?"N\xe3o Trabalhado":""," ",pt(a,"recurring")?"Recorrente":"",")"),u&&r.a.createElement(r.a.Fragment,null,!m.readOnly&&r.a.createElement(oa,{text:"Gravar Feriado",variants:"header",onClick:function(e){e.stopPropagation(),o({holiday:a})}}),!m.readOnly&&!pt(a,"isSystemHoliday")&&r.a.createElement(oa,{text:"Remover",variants:"delete header",onClick:function(e){e.stopPropagation(),c({holiday:a})}}))),r.a.createElement(on.a,{className:t.details,ref:d({id:a.id})},!s.current&&r.a.createElement(ya.a,null,"Placeholder")))})),Fr=mt((function(e){return{container:{flexWrap:"nowrap","& .form-container":{margin:0,width:"100%","&>div":{padding:0}},"& .form-wrapper>div":{overflowY:"hidden"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.fields,n=e.formItem,i=e.formErrors,o=e.handleChange,c=e.FormRef,s=e.options,d=void 0===s?{}:s;return r.a.createElement(Cr.a,{container:c.current},r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:2,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(gr,{fields:a,formItem:n,formErrors:i,handleChange:o,options:d}))))})),qr=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.plant,a=e.options,i=void 0===a?{}:a,o=zt().permissions,s=Object(n.useContext)(Je),d=Object(n.useState)({}),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)({}),h=Object(c.a)(p,2),y=h[0],g=h[1],v={plantId:t.id},b=Ht({model:"holidays",query:Object(be.a)({},v,{$populateAll:!0})}),E=b.list,x=b.reload,O=b.setQuery,w=JSON.stringify(v);Object(n.useEffect)((function(){O((function(e){return Object(be.a)({},e,{},JSON.parse(w))})),A()}),[w,O]);var j=Object(n.useRef)(null),k={},N=function(e){var t=e.id;return function(e){return k[t]=e}},S=Object(n.useState)(),I=Object(c.a)(S,2),C=I[0],A=I[1],D=function(e){var t=e.id,a=Object(ea.a)(e,["id"]);return function(){j.current=k[t],T(),C===t?(A(),j.current=null):(A(t),u(Object(be.a)({id:t},a)))}},T=function(){g({}),u({})},P=function(){x()},M=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var a,n,r,i,o=arguments;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>0&&void 0!==o[0]?o[0]:{},n=a.holiday,g({}),r=!0,Tt({fields:Tr,formItem:m,setFormErrors:g})||(r=!1),i=Object(be.a)({},v,{},n,{},m,{id:pt(n,"id")}),r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,s.service("plants").patch(t.id,{holidays:[i]});case 9:P(),T(),A();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.holiday,window.confirm("Voc\xea quer apagar o item?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s.service("holidays").remove(a.id);case 5:P();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=_t({privileges:i.writePermissions,permissions:o});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0},ft(yt(E,(function(e){return f()(e.startDate).year()===f()().year()})).sort((function(e,t){return f()(e.startDate).diff(f()(t.startDate),"minutes")})),(function(e,t){return r.a.createElement(Mr,{key:t,holiday:e,expanded:C,handleExpand:D,handleSubmit:M,handleDelete:F,FormRef:j,setFormRef:N,options:{readOnly:!q}})}))),q&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(Pr,{expanded:C,handleExpand:D,handleSubmit:M,FormRef:j,setFormRef:N})),j.current&&r.a.createElement(Fr,{fields:Tr,formItem:m,formErrors:y,handleChange:function(e){var t=e.target;return u((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))}))},FormRef:j,options:{readOnly:!q}}))})),Rr=a(76),_r=a(176),Ur=a.n(_r),Wr=mt((function(e){return{deviceURL:{textDecoration:"underline",cursor:"pointer"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=void 0===a?{}:a,i=Ht({model:"sensors",query:{machineId:n.id}}).list,o=pt(i,"0")||{},c="".concat(n.identity," - ").concat(n.name),s="http://".concat(o.ip,":3030/?name=").concat(window.escape(c));return r.a.createElement("span",{className:t.deviceURL,onClick:function(){return window.open(s,c,"width=650,height=350,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no,directories=no,status=no")}},o.identity?"".concat(o.identity," - "):"",o.name||"")})),Lr=Wr,zr=mt((function(e){return{deviceURL:{color:"".concat(e.palette.common.white," !important"),textDecoration:"underline !important",cursor:"pointer"}}}),{withTheme:!0})((function(e){var t=e.classes,a=$t().sensorsURL;return a?r.a.createElement("a",{className:t.deviceURL,href:a,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(ya.a,{variant:"body1"},"Sensor")):r.a.createElement(ya.a,{variant:"body1"},"Sensor")})),Yr=zr,Br=[{text:"Cod M\xe1quina",identity:"identity",filter:{type:"string"}},{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Tipo",identity:"machine_type.name",model:{service:"machine_types",identity:"machineTypeId"}},{text:"Modelo",identity:"model",hidden:!0,filter:{type:"string"}},{text:"Local",identity:"plant.name",model:{service:"plants",identity:"plantId"}},{text:"Sensor",identity:"sensor",customContent:{dontFilter:!0},customText:function(){return r.a.createElement(Yr,null)},customData:function(e){var t=Object.assign({},e);return r.a.createElement(Lr,t)}},{text:"Status",identity:"machine_status.name",customContent:{dontFilterWhenChild:!0},model:{service:"machine_statuses",identity:"machineStatusId"}}],Hr=[[{text:"Foto",identity:"image",type:"image"}],[{text:"Cod Barra",identity:"barcode",type:"string"},{text:"Cod M\xe1quina",identity:"identity",max:10,autoFocus:!0,required:!0,type:"string"},{text:"Status",identity:"machineStatusId",required:!0,model:"machine_statuses",defaultValue:{config:"machine.status.init"}},{text:"Local",identity:"plantId",required:!0,model:{service:"plants",useCustomQuery:function(){var e=Object(n.useContext)(Je);return{plantStatusId:pt(e.get("config.plant.status.active"),"value")}}}}],[{text:"Nome",identity:"name",required:!0,type:"string"},[{text:"Ciclo M\xe9dio",identity:"idealCycle",type:"decimal",readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return"N1"===pt(t,"company.level")}}},{text:"UM",identity:"idealCycleUM",variants:"short",model:{service:"measurement_units",query:{type:"time"}},required:"idealCycle"}],{text:"Tipo",identity:"machineTypeId",model:"machine_types"},{text:"Tipo de Bico",identity:"nozzleType",model:"nozzle_types"}],[[{text:"Fabricante",identity:"maker",type:"string"},{text:"Ano Fabrica\xe7\xe3o",identity:"manufactureYear",type:"year"}],[{text:"Modelo",identity:"model",type:"string"},{text:"Num Serie",identity:"serialNr",type:"string"},{text:"Fim Garantia",identity:"endGuarantee",type:"date"}]],[[{text:"Dist Colunas Comprimento",identity:"distanceColumnsLength",populate:["distanceColumnsWidth"],type:"decimal"},{text:"X"}],[{text:"Largura",identity:"distanceColumnsWidth",type:"decimal"},{text:"UM",identity:"distanceColumnsUM",variants:"short",populate:["distanceColumnsLengthUM","distanceColumnsWidthUM"],required:[["distanceColumnsLength","distanceColumnsWidth"]],model:{service:"measurement_units",query:{type:"distance"}}}],[{text:"Dim Placa Comprimento",identity:"plateSizeLength",populate:["plateSizeWidth"],type:"decimal"},{text:"X"}],[{text:"Largura",identity:"plateSizeWidth",type:"decimal"},{text:"UM",identity:"plateSizeUM",variants:"short",populate:["plateSizeLengthUM","plateSizeWidthUM"],required:[["plateSizeLength","plateSizeWidth"]],model:{service:"measurement_units",query:{type:"distance"}}}]],[[{text:"For\xe7a de Fechamento",identity:"lockingForce",type:"decimal"},{text:"UM",identity:"lockingForceUM",variants:"short",model:{service:"measurement_units",query:{type:"force"}},required:"lockingForce"}],[{text:"Curso Abertura",identity:"openingStroke",type:"decimal"},{text:"UM",identity:"openingStrokeUM",variants:"short",model:{service:"measurement_units",query:{type:"distance"}},required:"openingStroke"}],[{text:"Di\xe2metro Anel Central",identity:"centralRingDiameter",type:"decimal"},{text:"UM",identity:"centralRingDiameterUM",variants:"short",model:{service:"measurement_units",query:{type:"distance"}},required:"centralRingDiameter"}],[{text:"Di\xe2metro Rosca de Inje\xe7\xe3o",identity:"injectionThreadDiameter",type:"decimal"},{text:"UM",identity:"injectionThreadDiameterUM",variants:"short",model:{service:"measurement_units",query:{type:"distance"}},required:"injectionThreadDiameter"}]],[{text:"Altura M\xednima Molde",identity:"minMoldHeight",type:"decimal"},[{text:"Altura M\xe1xima Molde",identity:"maxMoldHeight",type:"decimal"},{text:"UM",identity:"moldHeightUM",variants:"short",populate:["minMoldHeightUM","maxMoldHeightUM"],required:[["minMoldHeight","maxMoldHeight"]],model:{service:"measurement_units",query:{type:"distance"}}}],[{text:"Peso M\xe1ximo Molde",identity:"maxMoldWeight",type:"decimal"},{text:"UM",identity:"maxMoldWeightUM",variants:"short",model:{service:"measurement_units",query:{type:"mass"}},required:"maxMoldWeight"}]]],Vr={name:"machines",icon:{type:"svg",src:Ur.a},listPath:"/master-data/machines",formPath:"/master-data/machines",paramsProp:"machineId",newItemText:"Nova M\xe1quina"},Jr={metadata:Vr,list:Br,form:Hr,links:[{text:"Cadastros",href:"/master-data"},{text:"M\xe1quinas",href:"/master-data/machines"}],options:{readPermissions:["readMasterData"],writePermissions:["writeMasterData"]},customContent:{customBreadCrumbsName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name)}},query:{$sort:{identity:1}}},Qr=a(177),$r=a.n(Qr),Gr=[{text:"Cod Molde",identity:"identity",filter:{type:"string"}},{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Cavidades",identity:"cavities",filter:{type:"string"}},{text:"Ciclo M\xe9dio",identity:"idealCycle",customContent:{dontFilter:!0},customData:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.idealCycle||""," ").concat(a.idealCycle&&pt(a,"ideal_cycle_measurement_unit.name")||"")}},{text:"Status",identity:"mold_status.name",model:{service:"mold_statuses",identity:"moldStatusId"}}],Xr={name:"molds",icon:{type:"svg",src:$r.a},listPath:"/master-data/molds",formPath:"/master-data/molds",paramsProp:"moldId",newItemText:"Novo Molde"},Zr={metadata:Xr,list:Gr,form:[[{text:"Foto",identity:"image",type:"image"}],[{text:"Cod Barra",identity:"barcode",type:"string"},{text:"Cod Molde",identity:"identity",max:10,autoFocus:!0,required:!0,type:"string"},{text:"Status",identity:"moldStatusId",required:!0,model:"mold_statuses",defaultValue:{config:"mold.status.init"}}],[{text:"Nome",identity:"name",required:!0,type:"string"},{text:"Cavidades",identity:"cavities",required:!0,type:"integer"},[{text:"Ciclo M\xe9dio",identity:"idealCycle",type:"decimal"},{text:"UM",identity:"idealCycleUM",variants:"short",model:{service:"measurement_units",query:{type:"time"}},required:"idealCycle"}]],[[{text:"Fabricante",identity:"maker",type:"string"},{text:"Ano Fabrica\xe7\xe3o",identity:"manufactureYear",type:"year"}],[{text:"Num Serie",identity:"serialNr",type:"string"},{text:"Fim Garantia",identity:"endGuarantee",type:"date"}]],[{text:"Tipo de Bico",identity:"nozzleType",model:"nozzle_types"},{text:"Comprimento",identity:"length",type:"decimal"},{text:"Largura",identity:"width",type:"decimal"},[{text:"Altura",identity:"height",type:"decimal"},{text:"UM",identity:"UM",variants:"short",populate:["lengthUM","widthUM","heightUM"],required:[["length","width","height"]],model:{service:"measurement_units",query:{type:"distance"}},defaultValue:{config:"mold.size.um"}}],[{text:"Di\xe2metro Anel Central",identity:"centralRingDiameter",type:"decimal"},{text:"UM",identity:"centralRingDiameterUM",variants:"short",model:{service:"measurement_units",query:{type:"distance"}},required:"centralRingDiameter"}],[{text:"Peso do Molde",identity:"weight",type:"decimal"},{text:"UM",identity:"weightUM",variants:"short",model:{service:"measurement_units",query:{type:"mass"}},required:"weight",defaultValue:{config:"mold.weight.um"}}]]],links:[{text:"Cadastros",href:"/master-data"},{text:"Moldes",href:"/master-data/molds"}],options:{readPermissions:["readMasterData"],writePermissions:["writeMasterData"]},customContent:{customBreadCrumbsName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name)}},query:{$sort:{identity:1}}},Kr=[{text:"Cod Produto",identity:"identity",filter:{type:"string"}},{text:"Nome",identity:"name",filter:{type:"string"}},{text:"UM do Produto",identity:"measurement_unit.name",model:{service:"measurement_units",identity:"UM",query:{type:"quantity"}}},{text:"Cor",identity:"color",filter:{type:"string"}},{text:"Peso",identity:"weight",customContent:{dontFilter:!0},customData:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.weight||""," ").concat(a.weight&&pt(a,"weight_measurement_unit.name")||"")}},{text:"Status",identity:"product_status.name",customContent:{dontFilterWhenChild:!0},model:{service:"product_statuses",identity:"productStatusId"}}],ei={metadata:{name:"products",icon:"style",listPath:"/master-data/products",formPath:"/master-data/products",paramsProp:"productId",newItemText:"Novo Produto"},list:Kr,form:[{text:"Foto",identity:"image",type:"image"},[{text:"Cod Produto",identity:"identity",max:10,autoFocus:!0,required:!0,type:"string"},{text:"Status",identity:"productStatusId",required:!0,model:"product_statuses",defaultValue:{config:"product.status.init"}}],[{text:"Nome",identity:"name",required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"UM do Produto",identity:"UM",model:{service:"measurement_units",query:{type:"quantity"}}}],[[{text:"Peso do Produto",identity:"weight",type:"decimal"},{text:"UM",identity:"weightUM",variants:"short",model:{service:"measurement_units",query:{type:"mass"}},required:"weight",defaultValue:{config:"product.weight.um"}}],{text:"Cor",identity:"color",type:"string"}],[{text:"Vers\xe3o V\xe1lida",identity:"version",type:"string"},{text:"Desenho",identity:"design",type:"string"}]],links:[{text:"Cadastros",href:"/master-data"},{text:"Produtos",href:"/master-data/products"}],options:{readPermissions:["readMasterData"],writePermissions:["writeMasterData"]},customContent:{customBreadCrumbsName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name)}},query:{$sort:{identity:1}}},ti=[{text:"Cod Sensor",identity:"identity",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"name",filter:{type:"string"}},{text:"M\xe1quina",hasIdentity:!0,identity:"machine",model:{service:"machines",identity:"machineId",customName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name||"")}},customData:function(e){var t=e.data,a=(t=void 0===t?{}:t).machine;return"".concat(pt(a,"identity")?"".concat(pt(a,"identity")," - "):"").concat(pt(a,"name")||"")}},{text:"Status",identity:"sensor_status.name",model:{service:"sensor_statuses",identity:"sensorStatusId"}}],ai=[[{text:"Cod Barra",identity:"barcode",variants:"display",readOnly:!0,type:"string"},{text:"Cod Sensor",identity:"identity",max:10,variants:"display",readOnly:!0,type:"string"}],[{text:"Status",identity:"sensorStatusId",required:!0,model:"sensor_statuses",defaultValue:{config:"sensor.status.init"}},{text:"Descri\xe7\xe3o",identity:"name",autoFocus:!0,type:"string"},{text:"M\xe1quina",icon:"build",identity:"machineId",model:{service:"machines",hasIdentity:!0,useCustomQuery:function(e){e.data;var t=Ht({model:"sensors",query:{machineId:{$ne:null}}}).list;return t.length?{id:{$nin:ft(t,(function(e){return e.machineId}))}}:{}}}}],[{text:"MAC",identity:"mac",variants:"display",readOnly:!0,type:"string"},{text:"IP",identity:"ip",variants:"display",readOnly:!0,type:"string"}]],ni={metadata:{name:"sensors",icon:"memory",listPath:"/master-data/sensors",formPath:"/master-data/sensors",paramsProp:"sensorId",newItemText:"Novo Sensor"},list:ti,form:ai,links:[{text:"Cadastros",href:"/master-data"},{text:"Sensores",href:"/master-data/sensors"}],options:{dontCreate:!0,dontDelete:!0,readPermissions:["readMasterData"],writePermissions:["writeMasterData"]},customContent:{customBreadCrumbsName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name)}},query:{$sort:{identity:1}}},ri=function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name||"")},ii=function(e){var t=e.identity;return function(e){var a=e.data,n=void 0===a?{}:a;return"".concat(pt(n,"".concat(t,".identity"))?"".concat(pt(n,"".concat(t,".identity"))," - "):"").concat(pt(n,"".concat(t,".name"))||"")}},oi=[{text:"M\xe1quina",hasIdentity:!0,identity:"machine",customData:ii({identity:"machine"}),model:{service:"machines",identity:"machineId",customName:ri}},{text:"Molde",hasIdentity:!0,identity:"mold",customData:ii({identity:"mold"}),model:{service:"molds",identity:"moldId",customName:ri}},{text:"Produto",hasIdentity:!0,identity:"product",customData:ii({identity:"product"}),model:{service:"products",identity:"productId",customName:ri}},{text:"Ciclo Ideal",identity:"idealCycle",customContent:{dontFilter:!0},customData:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.idealCycle||""," ").concat(a.idealCycle&&pt(a,"ideal_cycle_measurement_unit.name")||"")}}],ci=[[{text:"M\xe1quina",identity:"machineId",variants:"fullWidth",required:!0,model:{service:"machines",hasIdentity:!0,useCustomQuery:function(){var e=Object(n.useContext)(Je);return{machineStatusId:pt(e.get("config.machine.status.active"),"value")}}}}],[{text:"Molde",identity:"moldId",variants:"fullWidth",required:!0,model:{service:"molds",hasIdentity:!0,useCustomQuery:function(){var e=Object(n.useContext)(Je);return{moldStatusId:pt(e.get("config.mold.status.active"),"value")}}},handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.handleChange;e.item;pt(a,"target.value")||n({target:{name:"productId",value:null}})}}],[{text:"Produto",identity:"productId",variants:"fullWidth",readOnly:{until:"moldId"},required:!0,model:{service:"products",hasIdentity:!0,useCustomQuery:function(e){var t=e.data,a=void 0===t?{}:t,r=Object(n.useContext)(Je),i={productStatusId:pt(r.get("config.product.status.active"),"value")},o=Vt({model:"molds",id:a.moldId}).item;return pt(o,"id")?Object(be.a)({},i,{id:{$in:ft(o.products,(function(e){return e.id}))}}):i}}}],[{text:"Ciclo Ideal",identity:"idealCycle",required:!0,type:"decimal",handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.handleChange,r=function(e){var t=e.value,a=e.factor;return Math.round(parseFloat(t,"10")*a*100)/100},i=pt(a,"target.value");i&&(n({target:{name:"minCycle",value:r({value:i,factor:.9})}}),n({target:{name:"maxCycle",value:r({value:i,factor:1.1})}}))}},{text:"Ciclo Min",identity:"minCycle",type:"decimal"},[{text:"Ciclo Max",identity:"maxCycle",type:"decimal"},{text:"UM",identity:"UM",variants:"short",required:[["idealCycle","minCycle","maxCycle"]],populate:["idealCycleUM","minCycleUM","maxCycleUM"],model:{service:"measurement_units",query:{type:"time"}}}]],[{text:"Ciclo de Alerta",identity:"warningCycle",type:"decimal"},{text:"Montagem (min)",identity:"setupInMinutes",required:!0,type:"integer"},{text:"SetUp Inje\xe7\xe3o (min)",identity:"setupInjectionMinutes",type:"integer"},{text:"SetUp Automa\xe7\xe3o (min)",identity:"setupAutoMinutes",type:"integer"},{text:"Desmontagem (min)",identity:"setupOutMinutes",required:!0,type:"integer"}],[{text:"UM",identity:"idealCycleUM",variants:"short",show:{useCustomIf:function(){return!1}},model:{service:"measurement_units",query:{type:"time"}}},{text:"UM",identity:"minCycleUM",variants:"short",show:{useCustomIf:function(){return!1}},model:{service:"measurement_units",query:{type:"time"}}},{text:"UM",identity:"maxCycleUM",variants:"short",show:{useCustomIf:function(){return!1}},model:{service:"measurement_units",query:{type:"time"}}}]],si={metadata:{name:"machine_mold_products",listPath:"/master-data/setups",formPath:"/master-data/setups",paramsProp:"setupId",newItemText:"Novo Tempo de Configura\xe7\xe3o"},list:oi,form:ci,links:[{text:"Cadastros",href:"/master-data"},{text:"Tempos de Configura\xe7\xe3o",href:"/master-data/setups"}],query:{$populateAll:!0,$sort:{machineId:1}},options:{readPermissions:["readMasterData"],writePermissions:["writeMasterData"]},customContent:{customBreadCrumbsName:function(e){var t=e.data;return"Setup ".concat((void 0===t?{}:t).id)},customTreeName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(ri({data:a.machine})," / ").concat(ri({data:a.mold})," / ").concat(ri({data:a.product}))},customError:function(e){var t=e.errors,a=void 0===t?{}:t;return"Validation error"===a.message?"Uma configura\xe7\xe3o de tempos com esta m\xe1quina / molde / produto j\xe1 existe.":a}}},di=Jr,li=Zr,mi=ei,ui=ni,pi=si,fi=[[{text:"Cavidades (PC ou KIT)",identity:"cavities",autoFocus:!0,required:!0,type:"integer"}]],hi=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.expanded,n=e.handleExpand,i=e.handleSubmit,o=e.FormRef,c=e.setFormRef,s="new"===a;return r.a.createElement(nn.a,{className:t.panel,expanded:s,onChange:n({id:"new",productId:"new"})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{title:"Criar novo produto para o molde"},r.a.createElement(ia.a,null,"add_icon")),!s&&r.a.createElement(ya.a,null,"Criar novo produto para o molde:"))},s&&r.a.createElement(oa,{text:"Gravar Produto",variants:"header",onClick:function(e){e.stopPropagation(),i()}})),r.a.createElement(on.a,{className:t.details,ref:c({id:"new"})},!o.current&&r.a.createElement(ya.a,null,"Placeholder")))})),yi=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header},details:{padding:e.spacing(2)},fullWidth:{width:"100%",overflowX:"auto"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.query,n=void 0===a?{}:a,i=e.expanded,o=e.handleExpand,c=e.handleSubmit,s=e.FormRef,d=e.setFormRef,l=function(e){var t=e.data;return function(e){e.preventDefault(),c({product:t})}};return r.a.createElement(nn.a,{className:t.panel,expanded:"list"===i,onChange:o({id:"list"})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{title:"Adicionar produto para o molde"},r.a.createElement(ia.a,null,"add_icon")),"list"!==i&&r.a.createElement(ya.a,null,"Adicionar produto para o molde:"))}),r.a.createElement(on.a,{className:t.details},r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:2},r.a.createElement(Gt.a,{item:!0,ref:d({id:"list"})},!s.current&&r.a.createElement(ya.a,null,"Placeholder")),r.a.createElement(Gt.a,{item:!0,className:t.fullWidth},r.a.createElement($n,{model:mi.metadata,fields:yt(mi.list,(function(e){return pt(e,"customContent.dontFilterWhenChild")&&(e.customContent=Object(be.a)({},e.customContent||{},{dontFilter:!0})),!e.hidden})),query:Object(be.a)({},n,{$sort:{identity:1}}),options:{dontEdit:!0,dontDelete:!0,dontCreate:!0},customActions:function(e){var t=e.isList,a=e.data;return t&&r.a.createElement(oa,{text:"Adicionar",icon:"add_icon",type:"icon",onClick:l({data:a})})}})))))})),gi=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header,"&>div":{alignItems:"center"}},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=e.expanded,i=e.handleExpand,o=e.handleSubmit,c=e.handleDelete,s=e.FormRef,d=e.setFormRef,l=e.options,m=void 0===l?{}:l,u=n===a.productId;return r.a.createElement(nn.a,{className:t.panel,expanded:u,onChange:i(Object(be.a)({},a,{id:a.productId}))},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(ia.a,null,"expand_more_icon")},r.a.createElement(ya.a,null,pt(a,"product.identity")," - ",pt(a,"product.name")," (",a.cavities," ","Cavidades)"),u&&r.a.createElement(r.a.Fragment,null,!m.readOnly&&r.a.createElement(oa,{text:"Gravar Produto",variants:"header",onClick:function(e){var t=e.data;return function(e){e.stopPropagation(),o({product:t.product})}}({data:a})}),!m.readOnly&&r.a.createElement(oa,{text:"Remover do Molde",variants:"delete header",onClick:function(e){var t=e.data;return function(e){e.stopPropagation(),c({product:t.product})}}({data:a})}),r.a.createElement(oa,{text:"Setups",variants:"submit header",component:st,to:"".concat(pt(li,"metadata.formPath"),"/").concat(a.moldId,"/products/").concat(a.productId)}))),r.a.createElement(on.a,{className:t.details,ref:d({id:a.productId})},!s.current&&r.a.createElement(ya.a,null,"Placeholder")))})),vi=mt((function(e){return{container:{flexWrap:"nowrap","& .form-container":{margin:0,width:"100%","&>div":{padding:0}},"& .form-wrapper>div":{overflowY:"hidden"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.fields,n=(e.mold,e.formItem),i=e.formErrors,o=e.handleChange,c=e.afterChange,s=e.FormRef,d=e.options,l=void 0===d?{}:d,m=Vt({model:pt(mi,"metadata.name"),id:n.productId}),u=m.item,p=m.loading,f=m.errors;return r.a.createElement(Cr.a,{container:s.current},r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:2,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(gr,{fields:a,formItem:n,formErrors:i,handleChange:o,options:l})),n.productId&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(br,{model:mi.metadata,fields:mi.form,data:u,formErrors:i,loading:p,errors:f,hooks:{afterChange:c},options:Object(be.a)({},mi.options,{noRedirect:!0,dontSave:!0,dontCreate:!0,dontDelete:!0,dontShowTree:!0})}))))})),bi=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.mold,a=e.reloadTree,i=e.options,o=void 0===i?{}:i,s=zt().permissions,d=Object(n.useContext)(Je),l=Object(n.useState)({cavities:t.cavities}),m=Object(c.a)(l,2),u=m[0],p=m[1],f=Object(n.useState)({}),h=Object(c.a)(f,2),y=h[0],g=h[1],v=function(e){var t=e.target;return p((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))}))},b={moldId:t.id},E=Ht({model:"mold_products",query:Object(be.a)({},b,{$populateAll:!0})}),x=E.list,O=E.reload,w=E.setQuery,j=JSON.stringify(b);Object(n.useEffect)((function(){w((function(e){return Object(be.a)({},e,{},JSON.parse(j))})),T()}),[j,w]);var k={productStatusId:pt(d.get("config.product.status.active"),"value"),id:{$nin:ft(x,(function(e){return e.productId}))}},N=Object(n.useRef)(null),S={},I=function(e){var t=e.id;return function(e){return S[t]=e}},C=Object(n.useState)(),A=Object(c.a)(C,2),D=A[0],T=A[1],P=function(e){var a=e.id,n=Object(ea.a)(e,["id"]);return function(){N.current=S[a],M(),D===a?(T(),N.current=null):(T(a),p(Object(be.a)({cavities:t.cavities,id:a},n)))}},M=function(){g({}),p({cavities:t.cavities})},F=function(){a(),O()},q=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,e.abrupt("return",v({target:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var a,n,r,i,o,c=arguments;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>0&&void 0!==c[0]?c[0]:{},n=a.product,g({}),r=!0,Tt({fields:fi,formItem:u,setFormErrors:g})||(r=!1),(i=parseInt(u.cavities,"10"))<=0&&(g((function(e){return Object(be.a)({},e,{cavities:!0})})),r=!1),i>t.cavities&&(g((function(e){return Object(be.a)({},e,{cavities:"Cavidades do molde excedidas."})})),r=!1),o=Object(be.a)({},b,{},n,{},u,{id:pt(n,"id"),productId:pt(n,"id")}),Tt({fields:mi.form,formItem:o,setFormErrors:g})||(r=!1),r){e.next=11;break}return e.abrupt("return");case 11:return e.prev=11,e.next=14,d.service("molds").patch(t.id,{products:[o]});case 14:F(),M(),T(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),ht(e.t0.errors,(function(e){var t=e.path,a=e.validatorKey,n=xt(t,"_")[0],r=vt(St(mi.form),{identity:n});"not_unique"===a&&r&&g((function(e){return Object(be.a)({},e,{identity:"J\xe1 existe um registro com esse ".concat(r.text)})}))}));case 22:case"end":return e.stop()}}),e,null,[[11,19]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.product,window.confirm("Voc\xea quer apagar o item?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d.service("mold_products").remove(null,{query:Object(be.a)({},b,{productId:a.id})});case 5:F();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=_t({privileges:o.writePermissions,permissions:s});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0},ft(x,(function(e,t){return r.a.createElement(gi,{key:t,data:e,expanded:D,handleExpand:P,handleSubmit:R,handleDelete:_,FormRef:N,setFormRef:I,options:{readOnly:!U}})}))),U&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(hi,{expanded:D,handleExpand:P,handleSubmit:R,FormRef:N,setFormRef:I}),r.a.createElement(yi,{query:k,expanded:D,setExpanded:T,handleExpand:P,handleSubmit:R,FormRef:N,setFormRef:I})),N.current&&r.a.createElement(vi,{fields:fi,mold:t,formItem:u,formErrors:y,handleChange:v,afterChange:q,FormRef:N,options:{readOnly:!U}}))})),Ei=[[{text:"Ciclo Ideal",identity:"idealCycle",autoFocus:!0,required:!0,type:"decimal"},{text:"Ciclo Min",identity:"minCycle",type:"decimal"},[{text:"Ciclo Max",identity:"maxCycle",type:"decimal"},{text:"UM",identity:"UM",variants:"short",required:[["idealCycle","minCycle","maxCycle"]],populate:["idealCycleUM","minCycleUM","maxCycleUM"],model:{service:"measurement_units",query:{type:"time"}}}]],[{text:"Ciclo de Alerta",identity:"warningCycle",type:"decimal"},{text:"Montagem (min)",identity:"setupInMinutes",required:!0,type:"integer"},{text:"SetUp Inje\xe7\xe3o (min)",identity:"setupInjectionMinutes",type:"integer"},{text:"SetUp Automa\xe7\xe3o (min)",identity:"setupAutoMinutes",type:"integer"},{text:"Desmontagem (min)",identity:"setupOutMinutes",required:!0,type:"integer"}]],xi=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header},details:{padding:e.spacing(2)},fullWidth:{width:"100%",overflowX:"auto"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.query,n=void 0===a?{}:a,i=e.expanded,o=e.handleExpand,c=e.handleSubmit,s=e.FormRef,d=e.setFormRef,l=function(e){var t=e.data;return function(e){e.preventDefault(),c({machine:t})}};return r.a.createElement(nn.a,{className:t.panel,expanded:"list"===i,onChange:o({id:"list"})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{title:"Adicionar m\xe1quina setup"},r.a.createElement(ia.a,null,"add_icon")),"list"!==i&&r.a.createElement(ya.a,null,"Adicionar m\xe1quina setup:"))}),r.a.createElement(on.a,{className:t.details},r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:2},r.a.createElement(Gt.a,{item:!0,ref:d({id:"list"})},!s.current&&r.a.createElement(ya.a,null,"Placeholder")),r.a.createElement(Gt.a,{item:!0,className:t.fullWidth},r.a.createElement($n,{model:di.metadata,fields:yt(di.list,(function(e){return pt(e,"customContent.dontFilterWhenChild")&&(e.customContent=Object(be.a)({},e.customContent||{},{dontFilter:!0})),!e.hidden})),query:Object(be.a)({},n,{$sort:{identity:1}}),options:{dontEdit:!0,dontDelete:!0,dontCreate:!0},customActions:function(e){var t=e.isList,a=e.data;return t&&r.a.createElement(oa,{text:"Adicionar",icon:"add_icon",type:"icon",onClick:l({data:a})})}})))))})),Oi=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header,"&>div":{alignItems:"center"}},details:{padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=e.expanded,i=e.handleExpand,o=e.handleSubmit,c=e.handleDelete,s=e.FormRef,d=e.setFormRef,l=e.options,m=void 0===l?{}:l,u=n===a.machineId;return r.a.createElement(nn.a,{className:t.panel,expanded:u,onChange:i(Object(be.a)({},a,{id:a.machineId}))},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(ia.a,null,"expand_more_icon")},r.a.createElement(ya.a,null,pt(a,"machine.identity")," - ",pt(a,"machine.name")),u&&r.a.createElement(r.a.Fragment,null,!m.readOnly&&r.a.createElement(oa,{text:"Gravar SetUps",variants:"header",onClick:function(e){var t=e.data;return function(e){e.stopPropagation(),o({machine:t.machine})}}({data:a})}),!m.readOnly&&r.a.createElement(oa,{text:"Deletar",variants:"delete header",onClick:function(e){var t=e.data;return function(e){e.stopPropagation(),c({machine:t.machine})}}({data:a})}))),r.a.createElement(on.a,{className:t.details,ref:d({id:a.machineId})},!s.current&&r.a.createElement(ya.a,null,"Placeholder")))})),wi=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.fields,a=e.formItem,n=e.formErrors,i=e.handleChange,o=e.FormRef,c=e.options,s=void 0===c?{}:c;return r.a.createElement(Cr.a,{container:o.current},r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2},r.a.createElement(gr,{fields:t,formItem:a,formErrors:n,handleChange:i,options:s})))})),ji=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.mold,a=e.product,i=e.options,o=zt().permissions,s=Object(n.useContext)(Je),d=Object(n.useState)({}),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)({}),f=Object(c.a)(p,2),h=f[0],y=f[1],g={productId:a.id,moldId:null};t&&(g.moldId=t.id);var v=Ht({model:"machine_mold_products",query:Object(be.a)({},g,{$populateAll:!0})}),b=v.list,E=v.reload,x=v.setQuery,O=JSON.stringify(g);Object(n.useEffect)((function(){x((function(e){return Object(be.a)({},e,{},JSON.parse(O))})),A()}),[x,O]);var w={machineStatusId:pt(s.get("config.machine.status.active"),"value"),id:{$nin:ft(b,(function(e){return parseInt(e.machineId,"10")}))}},j=Object(n.useRef)(null),k={},N=function(e){var t=e.id;return function(e){return k[t]=e}},S=Object(n.useState)(),I=Object(c.a)(S,2),C=I[0],A=I[1],D=function(e){var t=e.id,a=Object(ea.a)(e,["id"]);return function(){j.current=k[t],T(),C===t?(A(),j.current=null):(A(t),u(Object(be.a)({id:t},a)))}},T=function(){y({}),u({})},P=function(){E()},M=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.machine,y({}),Tt({fields:Ei,formItem:m,setFormErrors:y})){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,s.service("machines").patch(a.id,{products:[Object(be.a)({},m,{},g,{machineId:a.id})]});case 6:P();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.machine,window.confirm("Voc\xea quer apagar o item?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s.service("machine_mold_products").remove(null,{query:Object(be.a)({},g,{machineId:a.id})});case 5:P();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(e){var t=e.value,a=e.factor;return Math.round(parseFloat(t,"10")*a*100)/100};m.idealCycle&&u((function(t){return Object(be.a)({},t,{minCycle:e({value:t.idealCycle,factor:.9}),maxCycle:e({value:t.idealCycle,factor:1.1})})}))}),[m.idealCycle]);var q=_t({privileges:i.writePermissions,permissions:o});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0},ft(b,(function(e,t){return r.a.createElement(Oi,{key:t,data:e,expanded:C,handleExpand:D,handleSubmit:M,handleDelete:F,FormRef:j,setFormRef:N,options:{readOnly:!q}})}))),q&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(xi,{query:w,expanded:C,handleExpand:D,handleSubmit:M,FormRef:j,setFormRef:N})),j.current&&r.a.createElement(wi,{fields:Ei,formItem:m,formErrors:h,handleChange:function(e){var t=e.target;return u((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))}))},FormRef:j,options:{readOnly:!q}}))})),ki=[[{text:"Nome",identity:"name",type:"string",required:!0},{text:"Descri\xe7\xe3o",identity:"content",type:"content",required:!0}]],Ni={form:ki,metadata:{name:"wiki_sections",paramsProp:"wikiSectionId",newItemText:"Nova Se\xe7\xe3o"}},Si=mt((function(e){return{container:{flexWrap:"nowrap","& .form-container":{margin:0,width:"100%","&>div":{padding:0}},"& .form-wrapper>div":{overflowY:"hidden"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.formItem,n=e.formErrors,i=e.handleChange,o=e.options,c=void 0===o?{}:o,s=St(Ni.form);return c.readOnly?ht(s,(function(e){return e.variants="wiki"})):ht(s,(function(e){return e.variants=""})),r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:2,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(gr,{fields:c.readOnly?Ni.form[0].slice(1):Ni.form,formItem:a,formErrors:n,handleChange:i,options:c})))})),Ii=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header},details:{display:"flex",flexDirection:"column",flexWrap:"nowrap",padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.loading,i=e.expanded,o=e.handleExpand,s=e.handleSubmit,d=e.options,l=void 0===d?{}:d,m=Object(n.useState)({}),u=Object(c.a)(m,2),p=u[0],f=u[1],h=Object(n.useState)({}),y=Object(c.a)(h,2),g=y[0],v=y[1],b=function(){v({}),f({}),o({id:"new"})},E=i.new;return r.a.createElement(r.a.Fragment,null,r.a.createElement(nn.a,{className:t.panel,expanded:E,onChange:o({id:"new"})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{title:"Criar nova Se\xe7\xe3o"},r.a.createElement(ia.a,null,"add_icon")),!E&&r.a.createElement(ya.a,null,"Criar nova Se\xe7\xe3o:"))},E&&r.a.createElement(oa,{text:"Gravar Se\xe7\xe3o",variants:"header",onClick:function(e){e.stopPropagation(),s({wikiSection:p,setFormErrors:v,resetForm:b})}})),r.a.createElement(on.a,{className:t.details},a.new&&r.a.createElement(ka,null),r.a.createElement(Si,{formItem:p,formErrors:g,handleChange:function(e){var t=e.target;return f((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,Et(t.value)?t.value||null:jt(t.value)))}))},options:l}))))})),Ci=mt((function(e){return{panel:{margin:0},header:{backgroundColor:e.palette.primary.header,"&>div":{alignItems:"center"}},details:{display:"flex",flexDirection:"column",flexWrap:"nowrap",padding:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.wikiSection,i=e.loading,o=e.expanded,s=e.handleExpand,d=e.handleSubmit,l=e.handleDelete,m=e.options,u=void 0===m?{}:m,p=Object(n.useState)(Object(be.a)({},a)),f=Object(c.a)(p,2),h=f[0],y=f[1],g=Object(n.useState)({}),v=Object(c.a)(g,2),b=v[0],E=v[1],x=function(){E({})},O=o[a.id];return r.a.createElement(nn.a,{className:t.panel,expanded:O,onChange:s({id:a.id})},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(ia.a,null,"expand_more_icon")},r.a.createElement(ya.a,null,pt(a,"name")),O&&r.a.createElement(r.a.Fragment,null,!u.readOnly&&r.a.createElement(oa,{text:"Gravar Se\xe7\xe3o",variants:"header",onClick:function(e){e.stopPropagation(),d({wikiSection:h,setFormErrors:E,resetForm:x})}}),!u.readOnly&&r.a.createElement(oa,{text:"Remover da P\xe1gina",variants:"delete header",onClick:function(e){e.stopPropagation(),l({wikiSection:a})}}))),r.a.createElement(on.a,{className:t.details},i[a.id]&&r.a.createElement(ka,null),r.a.createElement(Si,{formItem:h,formErrors:b,handleChange:function(e){var t=e.target;return y((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,Et(t.value)?t.value||null:jt(t.value)))}))},options:u})))})),Ai=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.wikiPage,a=e.options,i=void 0===a?{}:a,o=zt().permissions,s=Object(n.useContext)(Je),d={wikiPageId:t.id},l=Ht({model:"wiki_sections",query:Object(be.a)({},d,{$populateAll:!0})}),m=l.list,u=l.reload,p=l.setQuery,f=JSON.stringify(d);Object(n.useEffect)((function(){p((function(e){return Object(be.a)({},e,{},JSON.parse(f))}))}),[f,p]);var h=Object(n.useState)({}),y=Object(c.a)(h,2),g=y[0],v=y[1],b=Object(n.useState)({}),E=Object(c.a)(b,2),x=E[0],O=E[1],w=function(e){var t=e.id;return function(){return v((function(e){return Object(be.a)({},e,Object(ge.a)({},t,!e[t]))}))}},j=function(){u()},k=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var a,n,r,i,o,c,l,m,u=arguments;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>0&&void 0!==u[0]?u[0]:{},n=a.wikiSection,r=a.setFormErrors,i=void 0===r?function(){}:r,o=a.resetForm,c=void 0===o?function(){}:o,O((function(e){return Object(be.a)({},e,Object(ge.a)({},n.id||"new",!0))})),i({}),l=!0,m=Object(be.a)({},d,{},n,{id:pt(n,"id")}),Tt({fields:ki,formItem:m,setFormErrors:i})||(l=!1),l){e.next=9;break}return O((function(e){return Object(be.a)({},e,Object(ge.a)({},n.id||"new",!1))})),e.abrupt("return");case 9:return e.next=11,s.service("wiki_pages").patch(t.id,{wiki_sections:[m]});case 11:j(),c(),O((function(e){return Object(be.a)({},e,Object(ge.a)({},n.id||"new",!1))}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.wikiSection,window.confirm("Voc\xea quer apagar o item?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s.service("wiki_sections").remove(null,{query:Object(be.a)({},d,{id:a.id})});case 5:j();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=_t({privileges:i.writePermissions,permissions:o});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0},ft(m,(function(e,t){return r.a.createElement(Ci,{key:t,wikiSection:e,loading:x,expanded:g,handleExpand:w,handleSubmit:k,handleDelete:N,options:{readOnly:!S||i.readOnly}})}))),S&&!i.readOnly&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(Ii,{loading:x,expanded:g,handleExpand:w,handleSubmit:k,options:{readOnly:!S||i.readOnly}})))})),Di=a(342),Ti=a.n(Di),Pi=mt((function(e){return{date:{fontSize:"0.8em",color:"grey"},response:{textAlign:"end"},colored:{backgroundColor:"rgba(0, 0, 0, .14)",padding:15,borderRadius:"6px"},listTextWrap:{wordWrap:"break-word"},viewed:{fontSize:"14px",marginBottom:"-2px",marginLeft:"5px"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.session,n=e.message,i=pt(a,"userId"),o=r.a.createElement("span",{style:{minWidth:"33%"}}),c=pt(n,"user.name");return r.a.createElement(r.a.Fragment,null,i!==n.userId&&r.a.createElement(ba.a,null,r.a.createElement(Ga.a,null,r.a.createElement(Kt.a,{style:{backgroundColor:"#424242",height:40,width:40,padding:4},alt:"Admin MP",src:null===n.user.companyId?"https://www.monitorprod.com.br/static/media/logo.10c8593f.svg":null},null===n.user.companyId?null:r.a.createElement(Ti.a,{color:"secondary"}))),r.a.createElement(Ea.a,{className:t.listTextWrap,primary:r.a.createElement(ya.a,{component:"span",variant:"body2",color:"textPrimary"},n.text),secondary:r.a.createElement(ya.a,{className:t.date},"".concat(c," - ").concat(f()(n.createdAt).format("DD/MM/YYYY HH:mm")),r.a.createElement(ia.a,{className:t.viewed},Et(n,"viewedAt")?"done":"done_all"))}),o),i===n.userId&&r.a.createElement(ba.a,{className:t.response},o,r.a.createElement(Ea.a,{className:b()(t.colored,t.listTextWrap),primary:r.a.createElement(ya.a,{component:"span",variant:"body2",color:"textPrimary"},n.text),secondary:r.a.createElement(ya.a,{className:t.date},"".concat(c," - ").concat(f()(n.createdAt).format("DD/MM/YYYY HH:mm")),r.a.createElement(ia.a,{className:t.viewed},null===n.viewedAt?"done":"done_all"))})))})),Mi=a(698),Fi=a(343),qi=new Fi.Dropbox({accessToken:"9OIaDmlW_AAAAAAAAAAAZ5y1VH8VNnTZDTZfAlbAD0mi0UgcueJQQR16PWtmt1S7",fetch:fetch}),Ri=qi,_i=mt((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center"},input:{color:e.palette.common.white,borderRadius:"6px",marginLeft:e.spacing(1),padding:"4px 10px",flex:1},appBar:{top:"auto",bottom:0,backgroundColor:"#424242",zIndex:"auto"},iconButton:{padding:10},divider:{backgroundColor:"#ffffff1f",height:28,margin:4}}}),{withTheme:!0})((function(e){var t=e.formItem,a=e.handleChange,i=e.handleSubmit,o=e.ticketClosed,s=e.setFormErrors,d=e.resetForm,l=e.data,m=e.classes,u=e.ticket,p=Object(n.useState)(),f=Object(c.a)(p,2),h=f[0],y=f[1],g=Object(n.useState)("cloud_upload"),v=Object(c.a)(g,2),b=v[0],E=v[1];return Object(n.useEffect)((function(){if(void 0!==h)if(E("loop"),h.size<157286400)Ri.filesUpload({path:"/support/"+u.id+"/"+h.name,contents:h}).then((function(e){E("done")})).catch((function(e){E("error")}));else{for(var e=[],t=0;t<h.size;){var a=Math.min(8e6,h.size-t);e.push(h.slice(t,t+a)),t+=a}e.reduce((function(e,t,a,n){return 0===a?e.then((function(){return Ri.filesUploadSessionStart({close:!1,contents:t}).then((function(e){return e.session_id}))})):a<n.length-1?e.then((function(e){var n={session_id:e,offset:8e6*a};return Ri.filesUploadSessionAppendV2({cursor:n,close:!1,contents:t}).then((function(){return e}))})):e.then((function(e){var a={session_id:e,offset:h.size-t.size},n={path:"/"+h.name,mode:"add",autorename:!0,mute:!1};return Ri.filesUploadSessionFinish({cursor:a,commit:n,contents:t})}))}),Promise.resolve()).then((function(e){document.getElementById("results").appendChild(document.createTextNode("File uploaded!"))})).catch((function(e){console.error(e)}))}}),[h]),r.a.createElement(Xt.a,{position:"static",className:m.appBar},r.a.createElement(Zt.a,null,r.a.createElement("input",{id:"files",name:"files",type:"file",size:"1",onChange:function(e){y(e.target.files[0])},style:{display:"none"}}),r.a.createElement(ta.a,{className:m.iconButton,"aria-label":"menu",onClick:function(){return document.getElementById("files").click()}},r.a.createElement(ia.a,{style:{color:"white"}},"attach_file")),r.a.createElement(ia.a,null,b),r.a.createElement(Mi.a,{className:m.input,placeholder:"Nova Mensagem",inputProps:{"aria-label":"Nova Mensagem"},value:t.text,readOnly:l.ticketStatusId===o,onChange:a,onKeyPress:function(e){13===e.which&&i({message:t,setFormErrors:s,resetForm:d})}}),r.a.createElement(va.a,{className:m.divider,orientation:"vertical"}),r.a.createElement(ta.a,{style:{color:"#ffb300"},className:m.iconButton,"aria-label":"Enviar",onClick:function(){return i({message:t,setFormErrors:s,resetForm:d})}},r.a.createElement(ia.a,null,"send"))))})),Ui=lt(mt((function(e){return{appbarRoot:{zIndex:"auto"},root:{width:"inherit",overflowX:"auto",paddingBottom:0,paddingTop:0,display:"flex",flexDirection:"column",flex:1,height:"calc(100vh - 177px)"},question:{},response:{textAlign:"end"},inline:{display:"inline"},subheader:{backgroundColor:"#ffb300",color:"#424242",top:"10px",left:"50%",transform:"translateX(-50%)",width:"150px",borderRadius:"50px",height:"30px",lineHeight:"30px",textAlign:"center"},urgent:{color:"red"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.ticket,i=e.session,o=e.data,s=(e.match.params,Object(n.useContext)(Je)),d=pt(s.get("config.ticket.status.closed"),"value"),l=(pt(a,"ticket_status.name"),Object(n.useRef)(null)),m=Object(n.useState)({}),u=Object(c.a)(m,2),p=(u[0],u[1]),f=Object(n.useState)(null),h=Object(c.a)(f,2),y=h[0],g=h[1],v=Object(n.useState)({text:""}),b=Object(c.a)(v,2),E=b[0],x=b[1],O=Object(n.useState)({}),w=Object(c.a)(O,2),j=w[0],k=w[1],N=Object(n.useState)([]),S=Object(c.a)(N,2),I=S[0],C=S[1];s.socket.on("connect",(function(){return g(!0)})),Object(n.useEffect)((function(){s.service("ticket_messages").on("created",(function(e){console.log(e),C((function(t){return[].concat(Object(ve.a)(t),[t[I.length+1]=e])}))}))}),[y]);var A={ticketId:a.id},D=Ht({model:"ticket_messages",query:{$markAsViewed:{viewedAt:null}}}),T=D.list,P=(D.reload,D.setQuery),M=D.loading;Object(n.useEffect)((function(){console.log("nova mensagem n\xe3o lida"),C(T)}),[T]);var F=JSON.stringify(A);Object(n.useEffect)((function(){P((function(e){return Object(be.a)({},e,{},JSON.parse(F))}))}),[F,P]);var q=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a,n,r,o,c,d,l,m=arguments;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.message,n=t.setFormErrors,r=void 0===n?function(){}:n,o=t.resetForm,c=void 0===o?function(){j()}:o,p((function(e){return Object(be.a)({},e,Object(ge.a)({},a.id||"new",!0))})),r({}),d=!0,l=Object(be.a)({},A,{},E,{userId:pt(i,"userId")}),Tt({formItem:l,setFormErrors:r})||(d=!1),d){e.next=9;break}return p((function(e){return Object(be.a)({},e,Object(ge.a)({},a.id||"new",!1))})),e.abrupt("return");case 9:return e.next=11,s.service("ticket_messages").create(l);case 11:c(),p((function(e){return Object(be.a)({},e,Object(ge.a)({},a.id||"new",!1))}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){I.length>0&&!M&&l.current.scrollTo(0,1e4)}),[I,M]),r.a.createElement("div",null,r.a.createElement(Xt.a,{position:"static",className:t.appbarRoot,color:"secondary"},r.a.createElement(Zt.a,{variant:"dense"},r.a.createElement(ya.a,{variant:"h6",color:"inherit",style:{textTransform:"capitalize"}},a.id,": ",void 0!=a.title&&a.title.toLowerCase()))),r.a.createElement(ga.a,{ref:l,className:t.root},0!==I.length&&!M&&ft(I.sort((function(e,t){return e.id-t.id})),(function(e){return r.a.createElement(Pi,{key:e.id,session:i,ticket:a,message:e})}))),r.a.createElement(_i,{ticket:a,formItem:E,handleChange:function(e){x({text:e.target.value})},handleSubmit:q,ticketClosed:d,setFormErrors:k,resetForm:function(){k({}),x({text:""})},data:o}))}))),Wi=Sn,Li=In,zi=Cn,Yi=An,Bi=Xn,Hi=xr,Vi=kr,Ji=wr,Qi=br,$i=Dr,Gi=qr,Xi=bi,Zi=ji,Ki=Ai,eo=hr,to=gr,ao=dn,no=Dn,ro=ka,io=sn,oo=wa,co=oa,so=Ui,lo=function(e){var t=e.history,a=e.permissions;return _t({privileges:["readProductionOrders","readProductionOrderReports"],permissions:a})?t.push("/dashboard/production"):_t({privileges:["readMasterData","writeMasterData"],permissions:a})?t.push("/master-data"):_t({privileges:["crudAdminData","crudUserData"],permissions:a})?t.push("/administration"):t.push("/")},mo=lt(mt((function(e){return{wrapper:{width:400,marginTop:e.spacing(10),padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},textField:{margin:0,minWidth:250},footer:{width:400,justifyContent:"space-around",marginTop:e.spacing(2),"& p":{cursor:"pointer",color:e.palette.primary.header}},success:{margin:"0 auto ".concat(e.spacing(1),"px"),backgroundColor:e.palette.secondary.main,whiteSpace:"pre-wrap","&>div":{padding:0}}}}),{withTheme:!0})((function(e){var t=e.history,a=e.match.params,i=e.classes,o=zt(),s=o.session,d=o.loading,l=o.permissions,m=Object(n.useContext)(Je),u=Object(n.useState)({companyUUID:a.companyUUID}),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(),k=Object(c.a)(j,2),N=k[0],S=k[1],I=function(e){var t=e.target;S(!1),h((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))}))},C=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt({client:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(Ne.a)(ke.a.mark((function e(n){var r;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!v){e.next=3;break}return e.abrupt("return");case 3:return b(!0),w(),e.prev=5,e.next=8,Wt(Object(be.a)({client:m},f));case 8:if(r=e.sent,"admin"!==a.companyUUID||!r.isAdmin){e.next=13;break}t.push("/sysadmin/companies"),e.next=18;break;case 13:if("admin"===a.companyUUID||r.isAdmin){e.next=17;break}lo({history:t,permissions:Ut({payload:r})}),e.next=18;break;case 17:throw new Error;case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(5),e.next=24,C();case 24:w("As credenciais de usu\xe1rio especificadas est\xe3o incorretas");case 25:return e.prev=25,b(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[5,20,25,28]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(Ne.a)(ke.a.mark((function e(n){var r;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:return b(!0),w(),e.prev=4,e.next=7,Wt(Object(be.a)({client:m},f));case 7:if(r=e.sent,"admin"===a.companyUUID||r.isAdmin){e.next=12;break}t.push("/administration/reset-password"),e.next=13;break;case 12:throw new Error;case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(4),e.next=19,C();case 19:w("As credenciais de usu\xe1rio especificadas est\xe3o incorretas");case 20:return e.prev=20,b(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,15,20,23]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:if(b(!0),w(),e.prev=4,!f.email){e.next=11;break}return e.next=8,m.service("users").patch(null,{},{query:{email:f.email,$forgotPassword:!0}});case 8:S(!0),e.next=12;break;case 11:throw new Error;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),w("Conta de usu\xe1rio n\xe3o encontrada");case 17:return e.prev=17,b(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),P=JSON.stringify(s||{}),M=JSON.stringify(l);return Object(n.useEffect)((function(){var e=JSON.parse(P),n=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt({client:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d||("admin"===a.companyUUID&&pt(e,"isAdmin")?t.push("/sysadmin/companies"):"admin"!==a.companyUUID&&pt(e,"userId")&&!pt(e,"isAdmin")?lo({history:t,permissions:JSON.parse(M)}):n())}),[m,P,d,t,a.companyUUID,M]),r.a.createElement(Gt.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(fa.a,{className:i.wrapper},r.a.createElement("form",null,r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:3},v&&r.a.createElement(ro,null),O&&r.a.createElement(io,{errors:O}),N&&r.a.createElement(cn.a,{className:i.success,message:"Email enviado"}),r.a.createElement(Gt.a,{item:!0,container:!0,direction:"column",alignItems:"center",spacing:0},r.a.createElement(Kt.a,{className:i.avatar},r.a.createElement(ia.a,null,"lock_outlined")),r.a.createElement(ya.a,{variant:"h6"},"Iniciar Sess\xe3o")),r.a.createElement(Gt.a,{item:!0},r.a.createElement(la.a,{fullWidth:!0,required:!0,type:"text",name:"email",label:"Email",inputProps:{autoComplete:"email",autoFocus:!0},className:i.textField,value:f.email||"",onChange:I,margin:"normal"})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(la.a,{fullWidth:!0,required:!0,type:"password",name:"password",label:"Senha",inputProps:{autoComplete:"password"},className:i.textField,value:f.password||"",onChange:I,margin:"normal"})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,{text:"Entrar",color:"secondary",type:"submit",fullWidth:!0,variants:"submit",onClick:A}))))),"admin"!==a.companyUUID&&r.a.createElement(Gt.a,{className:i.footer,container:!0,alignItems:"center",spacing:0},r.a.createElement(Gt.a,{item:!0,onClick:T},r.a.createElement(ya.a,{variant:"body1"},"Esqueceu a senha")),r.a.createElement(Gt.a,{item:!0,onClick:D},r.a.createElement(ya.a,{variant:"body1"},"Mudar senha"))))}))),uo={tree:[{text:"Nome",identity:"name",type:"string"}],form:[[{text:"Nome",identity:"name",type:"string",required:!0},{text:"Descri\xe7\xe3o",identity:"content",type:"content"}]],links:[{text:"Cadastro",href:"/sysadmin"},{text:"Wiki",href:"/help/home"}],metadata:{name:"wiki_pages",paramsProp:"wikiPageId",listPath:"/help/home",formPath:"/help",newItemText:"Novo"},query:{wikiPageId:null},options:{dontUseBreadcrumbs:!0,dontUseEnter:!0}},po=mt((function(e){return{item:{paddingLeft:function(t){var a=t.deep,n=void 0===a?0:a;return"".concat(e.spacing(2*(n+2)),"px")}}}}),{withTheme:!0})((function(e){var t=e.data,a=e.deep,i=void 0===a?0:a,o=e.classes,s=e.isAdminApp,d=Object(n.useState)(),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(Date.now()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement(Gt.a,null,r.a.createElement(ao,{model:Object(be.a)({},uo.metadata),reload:m,reloadTree:p,query:{wikiPageId:t.id},deep:i+1,options:{dontShowNotFound:!s},customContent:{afterTree:function(e){var a=e.reloadTree;return s&&r.a.createElement(Gt.a,{item:!0,className:o.item},r.a.createElement(Qi,{model:uo.metadata,fields:uo.tree,data:{wikiPageId:t.id},hooks:{afterSubmit:a},options:Object(be.a)({},uo.options,{dontSave:!0,dontCreate:!0,dontDelete:!0,dontShowTree:!0,saveOnEnter:!0})}))},afterTreeItem:function(e){var t=e.data,a=e.reloadTree;return t.id&&r.a.createElement(po,{data:t,reload:a,reloadTree:p,deep:i+1,isAdminApp:s})}}}))})),fo=po,ho=a(178),yo=a.n(ho),go={contact:[{variants:"inputBootstrap",fields:[[{text:"Seu nome",identity:"name",type:"string",required:!0,variants:"inputBootstrap"},{text:"Seu e-mail",identity:"email",type:"string",required:!0,variants:"inputBootstrap"},{text:"Seu telefone",identity:"phone",type:"string",required:!0,variants:"inputBootstrap"}],[{text:"Sua mensagem",identity:"message",type:"longtext",required:!0,variants:"inputBootstrap"}]]}],links:[{text:"Wiki",href:"/help/home"}],metadata:{name:"site_contacts",formPath:"/help/home",newItemText:"Novo"}},vo=lt(mt((function(){return{container:{textAlign:"center"},hrStyle:{width:"200px",alignItems:"center",justifyContent:"center",textAlign:"center"},buttonForm:{border:"none",backgroundColor:"#f5b61d",padding:"10px 20px",fontSize:"18px",width:"250px",color:"white",transition:"1s","&:hover":{backgroundColor:"#e2a30a",transition:"1s"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.reloadHome;return r.a.createElement(Gt.a,{container:!0,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement("h1",null,"Bem-vindo ao Wiki"),r.a.createElement("img",{src:yo.a,alt:""}),r.a.createElement("hr",{className:t.hrStyle}),r.a.createElement("h3",null,"Contate-nos"),r.a.createElement(Qi,{model:go.metadata,fields:go.contact,options:{dontSave:!0,dontCreate:!0,dontDelete:!0,dontShowTree:!0,dontRedirect:!0},hooks:{afterDelete:a},customContent:{afterForm:function(e){var a=e.handleSubmit;return r.a.createElement(co,{className:t.buttonForm,text:"Enviar",onClick:a})}}})))}))),bo=mt((function(e){return{item:{paddingLeft:"".concat(e.spacing(2),"px")}}}),{withTheme:!0})((function(e){var t=e.classes,a=zt().session,n=a&&a.isAdmin,i=St(uo.form);return ht(i,n?function(e){return e.variants=""}:function(e){return e.variants="wiki"}),Hi(Object(be.a)({},uo,{options:Object(be.a)({},uo.options,{readOnly:!n,dontSave:!n,dontDelete:!n,dontCreate:!n}),customContent:{afterForm:function(e){var t=e.data;return t.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ki,{options:{readOnly:!n},wikiPage:t}))},afterTreeItem:function(e){var t=e.data,a=e.reloadTree;return t.id&&r.a.createElement(fo,{data:t,reloadTree:a,isAdminApp:n})},afterTree:function(e){var a=e.reloadTree;return n&&r.a.createElement(Gt.a,{item:!0,className:t.item},r.a.createElement(Qi,{model:uo.metadata,fields:uo.tree,hooks:{afterSubmit:a},options:Object(be.a)({},uo.options,{dontSave:!0,dontCreate:!0,dontDelete:!0,dontShowTree:!0,saveOnEnter:!0})}))},replaceNewItem:function(){return r.a.createElement(vo,null)}}}))})),Eo=function(e){var t=e.data,a=void 0===t?{}:t,n=pt({ABERTO:{style:{fontSize:"14px",width:"90px",borderRadius:"20px",backgroundColor:"rgb(129, 215, 66)",color:"white",textAlign:"center"}},FECHADO:{style:{fontSize:"14px",width:"90px",borderRadius:"20px",backgroundColor:"rgb(51, 51, 51)",color:"white",textAlign:"center"}},URGENTE:{style:{fontSize:"14px",width:"90px",borderRadius:"20px",backgroundColor:"red",color:"white",textAlign:"center"}}}[a.ticket_status.name],"style");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ya.a,{variant:"body1"},a.title),r.a.createElement(ya.a,{variant:"subtitle2"},f()(a.createdAt).format("DD/MMM/YYYY HH:mm")),r.a.createElement("div",{style:Object(be.a)({},n)},a.ticket_status.name))},xo={form:[[{text:"Titulo",identity:"title",type:"string",required:!0,customTree:Eo}],[{text:"Criado em",identity:"createdAt",type:"datetime",readOnly:!0},{text:"Status",identity:"ticketStatusId",required:!0,model:"ticket_statuses",defaultValue:{config:"ticket.status.init"},readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return!pt(t,"isAdmin")}}}]],links:[{text:"Tickets",href:"/support"}],metadata:{name:"tickets",paramsProp:"ticketId",listPath:"/support",formPath:"/support",newItemText:"Novo"},query:{$sort:{title:1},$populateAll:!0},customContent:{customTree:Eo}},Oo=mt((function(e){return{logo:{width:250},headerLogo:{textAlign:"center"},tree:{height:"100%",width:"25%",overflowY:"auto",overflowX:"hidden"},wrapper:{borderLeft:"solid 2px #00000075",flex:1,overflowX:"auto",display:"flex",flexDirection:"column"},container:{margin:"-24px",width:"calc(100% + 48px)",height:"calc(100% + 48px)",overflow:"overlay"},containerButton:{padding:"6px 16px",minHeight:44,marginBottom:e.spacing(2)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.match.params,i=Object(n.useContext)(Je),o=zt().session,c=pt(o,"isAdmin"),s=Vt({model:"tickets",id:a.ticketId}),d=s.item,l=s.loading,m=s.errors,u=s.reload,p=Ht({model:"tickets",query:{$populateAll:!0,$sort:{createdAt:-1}}}),f=(p.list,p.reload);return Object(n.useEffect)((function(){var e=wt((function(){return u()}),300),t=function(t){"".concat(t.id)==="".concat(a.ticketId)&&e()};return i.service("tickets").on("patched",t),function(){return i.service("tickets").removeListener("patched",t)}}),[i,a.ticketId,u]),r.a.createElement(Gt.a,{container:!0,className:t.container},r.a.createElement(gn,{isAdminApp:c}),r.a.createElement(Gt.a,{item:!0,className:t.wrapper},d&&r.a.createElement(so,{id:"chat",ticket:d,session:o,data:d}),!d&&!c&&r.a.createElement("div",{style:{margin:"24px"}},r.a.createElement(Qi,{model:xo.metadata,fields:xo.form,data:d,formErrors:m,loading:l,options:{dontDelete:!0,dontCreate:!0,chatSupport:!0,isAdmin:c,dontShowTree:!0,dontUseEnter:!0},hooks:{afterSubmit:[function(){u(),f()}]}}))))})),wo=(a(537),a(538),a(539),a(540),a(344)),jo=a.n(wo),ko=a(345),No=a.n(ko),So=a(346),Io=a.n(So),Co=a(347),Ao=a.n(Co),Do=a(348),To=a.n(Do),Po=a(349),Mo=a.n(Po),Fo=a(350),qo=a.n(Fo),Ro=a(351),_o=a.n(Ro),Uo=a(352),Wo=a.n(Uo),Lo=a(353),zo=a.n(Lo),Yo=a(354),Bo=a.n(Yo),Ho=mt((function(e){return{grid:{height:"100%"}}}),{withTheme:!0})((function(e){e.classes,e.title;var t=Object(n.useContext)(Je),a=Object(n.useState)({name:"",email:"",phone:"",message:""}),i=Object(c.a)(a,2),o=i[0],s=i[1],d=Object(n.useState)(),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)(),f=Object(c.a)(p,2),h=f[0],y=f[1],g=function(e){var t=e.target;s((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))})),u(!1)},v=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.name&&o.email&&o.phone&&o.message){e.next=2;break}return e.abrupt("return",y(!0));case 2:return y(!1),e.next=5,t.service("site_contacts").create(o);case 5:u(!0),s({name:"",email:"",phone:"",message:""});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{lang:"pt-br",style:{margin:"-24px"}},r.a.createElement("div",null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),r.a.createElement("meta",{name:"description",content:""}),r.a.createElement("meta",{name:"author",content:""}),r.a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:qo.a}),r.a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:_o.a}),r.a.createElement("title",null,"MonitorProd"),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Montserrat:400,700",rel:"stylesheet",type:"text/css"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Kaushan+Script",rel:"stylesheet",type:"text/css"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic",rel:"stylesheet",type:"text/css"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700",rel:"stylesheet",type:"text/css"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Ubuntu",rel:"stylesheet"})),r.a.createElement("div",{id:"page-top",className:"vsc-initialized"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark fixed-top",id:"mainNav"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand js-scroll-trigger",href:"#page-top"},r.a.createElement("img",{width:"182",className:"img-fluid d-block mx-auto",src:Mo.a,alt:""})),r.a.createElement("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},"Menu",r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},r.a.createElement("ul",{className:"navbar-nav text-uppercase ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link js-scroll-trigger",href:"#services"},"MonitorProd")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link js-scroll-trigger",href:"#tecnologias"},"Tecnologias")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link js-scroll-trigger",href:"#about"},"Sistema")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link js-scroll-trigger",href:"#contact"},"Contato")))))),r.a.createElement("header",{className:"masthead"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"intro-text"},r.a.createElement("div",{className:"intro-lead-in"},"Monitoramento de Produ\xe7\xe3o"),r.a.createElement("div",{className:"intro-heading text-uppercase",style:{color:"#e4b535"}},"MAIOR DESEMPENHO",r.a.createElement("br",null),"E PRODUTIVIDADE"),r.a.createElement("a",{className:"btn btn-primary btn-xl text-uppercase js-scroll-trigger",href:"#about"},"Como funciona")))),r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center",style:{paddingTop:"15px"}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",{className:"fa-stack fa-4x"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x text-primary"}),r.a.createElement("i",{className:"fas fa-sitemap fa-stack-1x fa-inverse"})),r.a.createElement("h4",{className:"service-heading"},"Conex\xe3o Inteligente"),r.a.createElement("p",{className:"text-muted"},r.a.createElement("br",null),"Acesso \xe1 qualquer hora, de qualquer lugar, via desktop, tablet ou mobile, sem operador de m\xe1quina e compatibilidade em multiplataformas.")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",{className:"fa-stack fa-4x"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x text-primary"}),r.a.createElement("i",{className:"fas fa-laptop fa-stack-1x fa-inverse"})),r.a.createElement("h4",{className:"service-heading"},"Monitoramento em",r.a.createElement("br",null),"Tempo Real"),r.a.createElement("p",{className:"text-muted"},"Linha de produ\xe7\xe3o acess\xedvel 24/7 com dados em nuvem. Melhor tomada de decis\xe3o para investimentos futuros.")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",{className:"fa-stack fa-4x"},r.a.createElement("i",{className:"fas fa-circle fa-stack-2x text-primary"}),r.a.createElement("i",{className:"fas fa-tachometer-alt fa-stack-1x fa-inverse"})),r.a.createElement("h4",{className:"service-heading"},"Melhor Custo-benef\xedcio"),r.a.createElement("p",{className:"text-muted"},r.a.createElement("br",null),"Desenvolvido para a ind\xfastria de pl\xe1stico, f\xe1cil opera\xe7\xe3o e instala\xe7\xe3o via wifi, com custo mais barato que uma hora-m\xe1quina."))))),r.a.createElement("section",{id:"services",className:"page-section clearfix"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"intro"},r.a.createElement("img",{className:"intro-img img-fluid mb-3 mb-lg-0 rounded",src:jo.a,alt:""}),r.a.createElement("div",{className:"intro-text left-0 text-center bg-faded p-5 rounded"},r.a.createElement("h2",{className:"section-heading mb-4"},r.a.createElement("span",{className:"section-heading-lower"},"Quem Somos")),r.a.createElement("p",{className:"mb-3"},"A monitorProd \xe9 uma empresa inovadora na \xe1rea da tecnologia e adepta do conceito IoT. Com foco no desenvolvimento de sistemas compostos por hardware + software que monitoram a produ\xe7\xe3o de pe\xe7as pl\xe1sticas injetadas, sua equipe \xe9 formada por profissionais da \xe1rea de moldes, inje\xe7\xe3o e de TI."),r.a.createElement("div",{className:"intro-button mx-auto"},r.a.createElement("a",{className:"btn btn-primary btn-xl js-scroll-trigger",href:"#contact"},"Entre em Contato")))))),r.a.createElement("section",{className:"showcase",id:"tecnologias"},r.a.createElement("div",{className:"container-fluid p-0"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 text-center"},r.a.createElement("h2",{className:"section-heading text-uppercase"},"Tecnologias"))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-6 order-lg-2 text-white showcase-img",style:{backgroundImage:"url('".concat(Wo.a,"')")}}),r.a.createElement("div",{className:"col-lg-6 order-lg-1 my-auto showcase-text"},r.a.createElement("h2",null,"Internet of Things"),r.a.createElement("p",{className:"lead mb-0"},"Com a internet das coisas, os sistemas ciber-f\xedsicos comunicam e cooperam entre si e com os humanos em tempo real, e atrav\xe9s da computa\xe7\xe3o em nuvem, ambos os servi\xe7os internos e intra-organizacionais s\xe3o oferecidos e utilizados pelos participantes da cadeia de valor."))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-6 text-white showcase-img",style:{backgroundImage:"url('".concat(zo.a,"')")}}),r.a.createElement("div",{className:"col-lg-6 my-auto showcase-text"},r.a.createElement("h2",null,"Industria 4.0"),r.a.createElement("p",{className:"lead mb-0"},'A Ind\xfastria 4.0 facilita a vis\xe3o e execu\xe7\xe3o de "F\xe1bricas Inteligentes" com as suas estruturas modulares, os sistemas ciber-f\xedsicos monitoram os processos f\xedsicos, criam uma c\xf3pia virtual do mundo f\xedsico e tomam decis\xf5es descentralizadas.'))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-6 order-lg-2 text-white showcase-img",style:{backgroundImage:"url('".concat(Bo.a,"')")}}),r.a.createElement("div",{className:"col-lg-6 order-lg-1 my-auto showcase-text"},r.a.createElement("h2",null,"Progressive Web Apps"),r.a.createElement("p",{className:"lead mb-0"},"MonitorProd pode ser utilizado em computadores, tablets e celulares e usa tecnologia PWA (Progressive Web Apps) o que facilita sua utiliza\xe7\xe3o em diversos dispositivos e sistemas operacionais como Windows, macOS, Linux, Android e iOS."))))),r.a.createElement("section",{id:"about",style:{backgroundColor:"#e9ecef"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 text-center",style:{paddingTop:"1rem"}},r.a.createElement("h2",{className:"section-heading text-uppercase"},"O Sistema"),r.a.createElement("p",{className:"lead mb-0"},"Ideal para empresas que querem aderir a Ind\xfastria 4.0,",r.a.createElement("br",null),"o sistema desenvolvido pela monitorProd monitora em tempo real os ciclos e as m\xe1quinas que est\xe3o paradas."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("ul",{className:"timeline"},r.a.createElement("li",null,r.a.createElement("div",{className:"timeline-image"},r.a.createElement("img",{className:"rounded-circle img-fluid",src:No.a,alt:""})),r.a.createElement("div",{className:"timeline-panel"},r.a.createElement("div",{className:"timeline-body"},r.a.createElement("p",{className:"lead mb-0"},"Para isso, conta com um hardware que fica instalado fisicamente na m\xe1quina injetora.")))),r.a.createElement("li",{className:"timeline-inverted"},r.a.createElement("div",{className:"timeline-image"},r.a.createElement("img",{className:"rounded-circle img-fluid",src:Io.a,alt:""})),r.a.createElement("div",{className:"timeline-panel"},r.a.createElement("div",{className:"timeline-body"},r.a.createElement("p",{className:"lead mb-0"},"A cada ciclo, \xe9 realizada a capta\xe7\xe3o de um sinal. A diferen\xe7a entre duas leituras fecha o tempo de um ciclo.")))),r.a.createElement("li",null,r.a.createElement("div",{className:"timeline-image"},r.a.createElement("img",{className:"rounded-circle img-fluid",src:Ao.a,alt:""})),r.a.createElement("div",{className:"timeline-panel"},r.a.createElement("div",{className:"timeline-body"},r.a.createElement("p",{className:"lead mb-0"},"Basicamente, num intervalo de 15 minutos, o hardware transfere dados para o servidor em nuvem.")))),r.a.createElement("li",{className:"timeline-inverted"},r.a.createElement("div",{className:"timeline-image"},r.a.createElement("img",{className:"rounded-circle img-fluid",src:To.a,alt:""})),r.a.createElement("div",{className:"timeline-panel"},r.a.createElement("div",{className:"timeline-body"},r.a.createElement("p",{className:"lead mb-0"},"Com isso, s\xe3o gerados c\xe1lculos de produtividade, comparando o ciclo real com o ciclo programado.")))),r.a.createElement("li",{className:"timeline-inverted"},r.a.createElement("div",{className:"timeline-image"},r.a.createElement("h4",null,"Venha inovar",r.a.createElement("br",null),"com a",r.a.createElement("br",null),"monitorProd")),r.a.createElement("div",{className:"timeline-panel timeline-panel__last"},r.a.createElement("div",{className:"timeline-body"},r.a.createElement("p",{className:"text-muted",style:{fontSize:"1.5rem",lineHeight:"2rem",color:"#000000 !important"}},"Venha inovar com a ",r.a.createElement("b",null,"monitorProd")))))))))),r.a.createElement("section",{id:"contact"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 text-center",style:{paddingTop:"1rem"}},r.a.createElement("h2",{className:"section-heading text-uppercase",style:{color:"#fff"}},"Entre em Contato"),r.a.createElement("h5",{className:"section-subheading text-muted",style:{color:"#fff"}},"Saiba mais sobre nossos servi\xe7os"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12",style:{paddingTop:"1rem",paddingBottom:"1rem"}},r.a.createElement("form",{id:"contactForm",name:"sentMessage",noValidate:"novalidate"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",id:"name",name:"name",type:"text",placeholder:"Seu nome *",required:"required","data-validation-required-message":"Por favor insira seu nome.",value:o.name,onChange:g}),r.a.createElement("p",{className:"help-block text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",id:"email",name:"email",type:"email",placeholder:"Seu e-mail *",required:"required","data-validation-required-message":"Por favor insira seu e-mail.",value:o.email,onChange:g}),r.a.createElement("p",{className:"help-block text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",id:"phone",name:"phone",type:"tel",placeholder:"Seu telefone *",required:"required","data-validation-required-message":"Por favor insira um telefone para contato.",value:o.phone,onChange:g}),r.a.createElement("p",{className:"help-block text-danger"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",id:"message",name:"message",placeholder:"Sua mensagem *",required:"required","data-validation-required-message":"Por favor insira uma mensagem.",value:o.message,onChange:g}),r.a.createElement("p",{className:"help-block text-danger"}))),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("div",{className:"col-lg-12 text-center"},r.a.createElement("div",{id:"success"},m&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-hidden":"true"},"\xd7"),r.a.createElement("strong",null,"Mensagem enviado.")),h&&r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-hidden":"true"},"\xd7"),r.a.createElement("strong",null,"Todos os campos s\xe3o de preenchimento obrigat\xf3rio."))),r.a.createElement("button",{id:"sendMessageButton",className:"btn btn-primary btn-xl text-uppercase",type:"button",onClick:v},"Enviar Mensagem")))))))),r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-8 text-center"},r.a.createElement("h2",{className:"mt-0"},r.a.createElement("img",{src:yo.a,style:{paddingTop:"100px"},alt:""})),r.a.createElement("hr",{className:"divider my-4"}),r.a.createElement("a",{href:"https://www.google.com/maps/place/Rua+Valenza,+154,+Colombo+-+PR",className:"text-muted mb-5",style:{color:"#000 !important"}},"Rua Valenza, 154 - Alphavile Empresarial ",r.a.createElement("br",null)," Colombo/PR - CEP 83413-576"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 ml-auto text-center"},r.a.createElement("i",{className:"fas fa-phone fa-3x mb-3 text-muted",style:{color:"#000 !important"}}),r.a.createElement("a",{className:"d-block",href:"tel:+5541991076618"},"+55 41 9 9107-6618"),r.a.createElement("a",{className:"d-block",href:"tel:+554131136618"},"+55 41 3113-6618")),r.a.createElement("div",{className:"col-lg-4 mr-auto text-center"},r.a.createElement("i",{className:"fas fa-envelope fa-3x mb-3 text-muted",style:{color:"#000 !important"}}),r.a.createElement("a",{className:"d-block",href:"mailto:contato@monitorprod.com.br",style:{color:"#000 !important"}},"contato@monitorprod.com.br")))),r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",{className:"copyright"},"Copyright \xa9 monitorProd 2019")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("ul",{className:"list-inline social-buttons"},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{href:"https://www.facebook.com/monitorProd/",target:"_blank"},r.a.createElement("i",{className:"fab fa-facebook-f"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{href:"https://www.linkedin.com/company/monitorprod",target:"_blank"},r.a.createElement("i",{className:"fab fa-linkedin-in"}))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"Desenvolvido por ",r.a.createElement("a",{href:"http://pierbotteroweb.me",target:"_blank"},"Pier Bottero Web")))))),r.a.createElement("script",{src:"https://pierbotteroweb.bitbucket.io/monitorProd/vendor/jquery/jquery.min.js"}),r.a.createElement("script",{src:"https://pierbotteroweb.bitbucket.io/monitorProd/vendor/bootstrap/js/bootstrap.bundle.min.js"}),r.a.createElement("script",{src:"https://pierbotteroweb.bitbucket.io/monitorProd/vendor/jquery-easing/jquery.easing.min.js"}),r.a.createElement("script",{src:"https://pierbotteroweb.bitbucket.io/monitorProd/js/jqBootstrapValidation.js"}),r.a.createElement("script",{src:"https://pierbotteroweb.bitbucket.io/monitorProd/js/agency.min.js"}))))})),Vo=mt((function(e){return{grid:{height:"100%"}}}),{withTheme:!0})((function(e){var t=e.classes;return r.a.createElement(Gt.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:t.grid},r.a.createElement(ya.a,{variant:"h2"},"Em Constru\xe7\xe3o"))})),Jo=a(169),Qo=function(e){return r.a.createElement(Jo.a,Object.assign({},e,{viewBox:"0 0 192 192"}),r.a.createElement("path",{d:"M98 172.32H32.5l-.53-.02-.52-.03-.52-.05-.52-.07-.5-.1-.5-.1-.5-.13-.48-.15-.48-.17-.46-.2-.46-.2-.45-.22-.44-.24-.42-.25-.42-.27-.4-.3-.4-.3-.38-.32-.37-.32-.36-.35-.34-.35-.33-.37-.3-.38-.3-.4-.3-.4-.27-.42-.25-.43-.24-.44-.22-.44-.2-.46-.18-.47-.17-.47-.15-.5-.14-.5-.1-.5-.1-.5-.07-.5-.06-.52-.03-.53-.01-.53.01-126.94.03-.54.06-.54.07-.53.1-.53.12-.52.13-.5.16-.5.18-.5.2-.5.2-.47.23-.46.25-.46.26-.44.28-.43.3-.43.3-.4.33-.4.34-.38.35-.37.37-.36.4-.34.4-.33.4-.3.42-.3.43-.28.45-.27.45-.24.46-.23.48-.22.48-.2.5-.17.5-.16.5-.14.52-.1.52-.1.54-.08.53-.05.55-.03.55-.02h65v29.36L68 62.8v66.97l30 13.76v28.8zm16-152.64l45.8.02.54.03.53.05.52.08.52.1.5.12.5.13.5.15.48.18.48.2.47.2.45.23.45.24.43.26.43.27.4.3.4.3.4.32.38.34.36.35.35.36.33.38.32.38.3.4.3.4.28.42.5.88.22.46.2.47.2.47.17.5.15.5.14.5.1.5.1.5.07.53.06.53.03.53.01.54-.04 127.42-.06.53-.07.52-.1.52-.1.5-.14.5-.15.5-.17.5-.2.48-.2.47-.23.45-.24.45-.26.44-.28.43-.3.4-.3.4-.32.4-.34.38-.35.37-.36.35-.38.33-.4.33-.4.3-.42.3-.43.28-.43.26-.45.24-.46.23-.47.2-.48.2-.48.17-.5.16-.5.13-.5.12-.52.1-.53.08-.53.05-.53.03-.55.02H114v-38.26l-29.45-13.2V71.72L114 58.5V19.68z"}))},$o=function(e){return r.a.createElement(Jo.a,Object.assign({},e,{viewBox:"0 0 24 24"}),r.a.createElement("path",{id:"mI",d:"m3.7773 4c-0.98489 0-1.7773 0.79245-1.7773 1.7773v12.445c0 0.98489 0.79245 1.7773 1.7773 1.7773h1.2227l2-2h10l2 2h1.2227c0.98489 0 1.7773-0.79246 1.7773-1.7773v-12.445c0-0.98489-0.79246-1.7773-1.7773-1.7773h-16.445zm0.22266 2h7v3h3 1 1l-1-2v-1h4v1l-1 2h1 1v2h-3-1-3-1-1v3h-7v-8z"}))},Go=mt((function(e){return{disabled:{pointerEvents:"none",background:"lightgrey"},icon:{color:"dark"===e.palette.type?e.palette.common.white:e.palette.primary.main,fontSize:50}}}),{withTheme:!0})((function(e){var t=e.classes,a=zt().session,n=pt(a,"company.level");return r.a.createElement(Gt.a,{container:!0,spacing:1},ft(function(e){var t=e.level,a=e.classes;return[{name:"M\xe1quinas",svgIcon:r.a.createElement($o,{className:a.icon}),href:"/master-data/machines"},{name:"Moldes",svgIcon:r.a.createElement(Qo,{className:a.icon}),href:"/master-data/molds"},{name:"Produtos",icon:"style",href:"/master-data/products",disabled:"N1"!==t},{name:"Sensores",icon:"memory",href:"/master-data/sensors"},{name:"Tempos de Configura\xe7\xe3o",icon:"access_time",href:"/master-data/setups",disabled:"N1"!==t}]}({level:n,classes:t}),(function(e){var a=e.name,n=e.icon,i=e.svgIcon,o=e.description,c=e.href,s=e.disabled;return r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,lg:4,key:a,className:ut(Object(ge.a)({},t.disabled,s))},r.a.createElement(Ji,{name:a,description:o,icon:n,svgIcon:i,href:c}))})))})),Xo=lt(mt((function(e){return{card:{color:e.palette.common.black,display:"flex",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},link:{paddingLeft:"".concat(e.spacing(1),"px"),textDecoration:"none"},selected:{backgroundColor:e.palette.primary.header},avatar:{marginRight:e.spacing(1),color:e.palette.primary.main},item:{flexWrap:"nowrap"}}}),{withTheme:!0})((function(e){var t=e.match.params,a=e.classes,n=e.model,i=e.mold,o=Vt({model:n.name,id:i.id}),c=o.item,s=!o.loading&&!pt(c,"products.length");return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(oo,null),ft(c.products,(function(e){return r.a.createElement(Gt.a,{item:!0,xs:12,key:e.id,className:ut(a.link,Object(ge.a)({},a.selected,parseInt(t.moldId,"10")===i.id&&parseInt(t.productId,"10")===e.id)),component:st,to:"".concat(n.formPath,"/").concat(i.id,"/products/").concat(e.id)},r.a.createElement("div",{className:a.card},r.a.createElement(Gt.a,{container:!0,alignItems:"center",className:a.item},e.image&&r.a.createElement(Kt.a,{alt:e.name,src:e.image,className:a.avatar}),!e.image&&n.icon&&r.a.createElement(ia.a,{className:a.avatar},n.icon),r.a.createElement(ya.a,{variant:"body1"},e.identity?"".concat(e.identity," - "):""," ",e.name))))})))}))),Zo=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=zt().session,a=pt(t,"company.level");return Hi(Object(be.a)({},Zr,{customContent:{afterForm:function(e){var t=e.data,n=e.reloadTree;return t.id&&"N1"===a&&r.a.createElement(Xi,{options:Zr.options,mold:t,reloadTree:n})},afterTreeItem:function(e){var t=e.data;return t.id&&"N1"===a&&r.a.createElement(Xo,{model:Object(be.a)({},Zr.metadata,{icon:"style"}),mold:t})}}}))})),Ko=lt(mt((function(e){return{}}),{withTheme:!0})((function(e){var t=e.match.params,a=(e.classes,Object(n.useContext)(Je)),i=Vt({model:pt(Zr,"metadata.name"),id:pt(t,pt(Zr,"metadata.paramsProp"))}),o=i.item,c=i.reload,s=Vt({model:pt(ei,"metadata.name"),id:pt(t,pt(ei,"metadata.paramsProp"))}),d=s.item,l=s.loading,m=s.errors,u=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,a.service("molds").patch(o.id,{products:[Object(be.a)({},n,{cavities:o.cavities})]});case 3:c();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(no,{links:[].concat(Object(ve.a)(Zr.links),[{text:pt(o,"id")?o.name:pt(Zr,"metadata.newItemText"),href:"".concat(pt(Zr,"metadata.formPath"),"/").concat(pt(t,pt(Zr,"metadata.paramsProp")))},{text:pt(d,"id")?d.name:pt(ei,"metadata.newItemText"),href:"".concat(pt(Zr,"metadata.formPath"),"/").concat(pt(t,pt(Zr,"metadata.paramsProp")),"/products/").concat(pt(t,pt(ei,"metadata.paramsProp")))}])}),r.a.createElement(Qi,{model:Object(be.a)({},ei.metadata,{formPath:"".concat(pt(Zr,"metadata.formPath"),"/").concat(pt(t,pt(Zr,"metadata.paramsProp")),"/products")}),treeModel:Zr.metadata,fields:ei.form,data:d,query:Zr.query,loading:l,errors:m,hooks:{afterSubmit:u},options:Object(be.a)({},ei.options,{dontRedirect:!0,dontCreate:!0,dontDelete:!0}),customContent:{afterForm:function(e){var t=e.data;return t.id&&r.a.createElement(Zi,{options:ei.options,mold:o,product:t})},afterTreeItem:function(e){var t=e.data;return t.id&&r.a.createElement(Xo,{model:Object(be.a)({},Zr.metadata,{icon:"style"}),mold:t})}}}))}))),ec=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,null,r.a.createElement(Li,{exact:!0,path:"/master-data",permissions:["readMasterData","writeMasterData"],component:Go}),r.a.createElement(Li,{exact:!0,path:"/master-data/machines",permissions:["readMasterData","writeMasterData"],component:function(){return Bi(di)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/machines/:machineId",permissions:["readMasterData","writeMasterData"],component:function(){return Hi(di)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/molds",permissions:["readMasterData","writeMasterData"],component:function(){return Bi(li)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/molds/:moldId",permissions:["readMasterData","writeMasterData"],component:Zo}),r.a.createElement(Li,{exact:!0,path:"/master-data/molds/:moldId/products/:productId",permissions:["readMasterData","writeMasterData"],component:Ko}),r.a.createElement(Li,{exact:!0,path:"/master-data/products",permissions:["readMasterData","writeMasterData"],component:function(){return Bi(mi)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/products/:productId",permissions:["readMasterData","writeMasterData"],component:function(){return Hi(mi)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/sensors",permissions:["readMasterData","writeMasterData"],component:function(){return Bi(ui)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/sensors/:sensorId",permissions:["readMasterData","writeMasterData"],component:function(){return Hi(ui)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/setups",permissions:["readMasterData","writeMasterData"],component:function(){return Bi(pi)}}),r.a.createElement(Li,{exact:!0,path:"/master-data/setups/:setupId",permissions:["readMasterData","writeMasterData"],component:function(){return Hi(pi)}}),r.a.createElement(Li,{default:!0,component:Vo})))},tc=function(e){var t=e.level;return[{name:"Sistema",icon:"domain",actions:[{name:"Grupos de Atributos",href:"/administration/attributes",permissions:["crudAdminData"]},{name:"Tipos de Ordem de Produ\xe7\xe3o",href:"/administration/production-order-types",permissions:["crudAdminData"],disabled:"N1"!==t},{name:"Eventos de Ordem de Produ\xe7\xe3o",href:"/administration/production-order-event-types",permissions:["crudAdminData"]},{name:"Motivos de Refugo",href:"/administration/waste-justifications",permissions:["crudAdminData"],disabled:"N1"!==t},{name:"Locais",href:"/administration/plants",permissions:["crudAdminData"]},{name:"Usu\xe1rios",href:"/administration/users",permissions:["crudUserData"]}],permissions:["crudAdminData","crudUserData"]},{name:"M\xe1quinas",svgIcon:r.a.createElement($o,{style:{fontSize:24,color:"white",marginRight:"8px"}}),actions:[{name:"Tipos de M\xe1quinas",href:"/administration/machine-types",permissions:["crudAdminData"]},{name:"Tipos de Bico",href:"/administration/nozzle-types",permissions:["crudAdminData"]}],permissions:["crudAdminData"]},{name:"Produtos",icon:"style",actions:[{name:"Tipos de Produtos",href:"/administration/product-mat-types",permissions:["crudAdminData"]}],permissions:["crudAdminData"],disabled:"N1"!==t}]},ac=function(){var e=zt().session,t=pt(e,"company.level");return Vi({actions:tc({level:t})})},nc=lt(mt((function(e){return{wrapper:{width:400,marginTop:e.spacing(10),padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},textField:{margin:0,minWidth:250,backgroundColor:e.palette.common.white},success:{margin:"0 auto ".concat(e.spacing(1),"px"),backgroundColor:e.palette.secondary.main,whiteSpace:"pre-wrap","&>div":{padding:0}}}}),{withTheme:!0})((function(e){e.history;var t=e.match.params,a=e.classes,i=zt().session,o=Object(n.useContext)(Je),s=Object(n.useState)({companyUUID:t.companyUUID}),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(),x=Object(c.a)(E,2),O=x[0],w=x[1],j=function(e){var t=e.target;m((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,t.value))}))},k=function(){var e=Object(Ne.a)(ke.a.mark((function e(a){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!f){e.next=3;break}return e.abrupt("return");case 3:if(h(!0),b(),e.prev=5,!(i.userId&&l.newPassword&&l.confirmPassword&&l.newPassword===l.confirmPassword)){e.next=13;break}return e.next=9,o.service("users").patch(i.userId,{password:l.newPassword});case 9:m({companyUUID:t.companyUUID}),w(!0),e.next=14;break;case 13:throw new Error;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),b("A senha deve ser confirmada");case 19:return e.prev=19,h(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Gt.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(fa.a,{className:a.wrapper},r.a.createElement("form",null,r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:10},f&&r.a.createElement(ro,null),v&&r.a.createElement(io,{errors:v}),O&&r.a.createElement(cn.a,{className:a.success,message:"Senha alterada"}),r.a.createElement(Gt.a,{item:!0,container:!0,direction:"column",alignItems:"center",spacing:0},r.a.createElement(Kt.a,{className:a.avatar},r.a.createElement(ia.a,null,"lock_outlined")),r.a.createElement(ya.a,{variant:"h6"},"Redefini\xe7\xe3o de Senha")),r.a.createElement(Gt.a,{item:!0},r.a.createElement(la.a,{fullWidth:!0,required:!0,type:"password",name:"newPassword",label:"Nova Senha",inputProps:{autoFocus:!0},className:a.textField,value:l.newPassword||"",onChange:j,margin:"normal"})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(la.a,{fullWidth:!0,required:!0,type:"password",name:"confirmPassword",label:"Confirmar Senha",className:a.textField,value:l.confirmPassword||"",onChange:j,margin:"normal"})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,{text:"Mudar senha",type:"submit",fullWidth:!0,variants:"submit",onClick:k}))))))}))),rc={metadata:{name:"plants",listPath:"/administration/plants",formPath:"/administration/plants",paramsProp:"plantId",newItemText:"Novo Local"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}},{text:"Status",identity:"plant_status.name",customContent:{dontFilterWhenChild:!0},model:{service:"plant_statuses",identity:"plantStatusId"}}],form:[[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"Status",identity:"plantStatusId",required:!0,model:"plant_statuses",defaultValue:{config:"plant.status.init"}}],[{text:"Horas Trabalhadas/Semana",identity:"hoursPerWeek",type:"decimal",readOnly:{ifThis:"turns.length"}},{text:"Tempo para notifica\xe7\xe3o (min)",identity:"notificationTimeMIN",type:"decimal",defaultValue:5,minValue:1,maxValue:15,handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.handleChange,r=pt(a,"target.value");r<1&&setTimeout((function(){n({target:{name:"notificationTimeMIN",value:1}})}),0),r>15&&setTimeout((function(){n({target:{name:"notificationTimeMIN",value:15}})}),0)}}]],[[{text:"Apontar Qualidade",identity:"qualityTrackType",required:!0,enum:["Q Refugo","Q Confirmada"],readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return"N1"!==pt(t,"company.level")}}},{text:"Frequencia",identity:"qualityTrackFrequency",required:!0,enum:["Turno","Diario","Encerramento"],readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return"N1"!==pt(t,"company.level")}}}],[{text:"Motivo Refugo",identity:"wasteJustification",type:"boolean",readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return"N1"!==pt(t,"company.level")}}},{text:"Refugo Automatico SETUP/PARADA PROG",identity:"wasteAutoTrack",type:"boolean",readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return"N1"!==pt(t,"company.level")}}},{text:"Notas para OP",identity:"PONotes",type:"boolean",readOnly:{useCustomIf:function(e){Object(Rr.a)(e);var t=zt().session;return"N1"!==pt(t,"company.level")}}}]]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Locais",href:"/administration/plants"}],options:{dontCopy:!0}},ic=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;return Hi(Object(be.a)({},rc,{customContent:{afterForm:function(e){var t=e.data,a=e.handleChange;return t.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement($i,{options:rc.options,plant:t,handleChange:a}),r.a.createElement(Gi,{options:rc.options,plant:t}))}}}))})),oc={metadata:{name:"attribute_groups",listPath:"/administration/attributes",formPath:"/administration/attributes",paramsProp:"attributeId",newItemText:"Novo Grupo de Atributos"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Grupos de Atributos",href:"/administration/attributes"}]},cc={metadata:{name:"production_order_types",listPath:"/administration/production-order-types",formPath:"/administration/production-order-types",paramsProp:"productionOrderTypeId",newItemText:"Novo Tipo de Ordem de Produ\xe7\xe3o"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"Tipo Em Produ\xe7\xe3o",identity:"isInProduction",type:"boolean"}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Tipos de Ordem de Produ\xe7\xe3o",href:"/administration/production-order-types"}]},sc=mt((function(e){return{color:{marginLeft:20,height:30,width:30,borderRadius:"50%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=void 0===a?{}:a;return r.a.createElement("div",{className:t.color,style:{background:Pt({data:n,path:"production_order_action_type.color"})}})})),dc={metadata:{name:"production_order_event_types",listPath:"/administration/production-order-event-types",formPath:"/administration/production-order-event-types",paramsProp:"productionOrderEventTypeId",newItemText:"Novo Evento de Ordem de Produ\xe7\xe3o"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}},{text:"Cor",identity:"color",customData:function(e){var t=Object.assign({},e);return r.a.createElement(sc,t)}},{text:"Tipo de Evento",identity:"production_order_action_type.name",model:{service:"production_order_action_types",identity:"productionOrderActionTypeId"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}],[{text:"\xcdcone",identity:"icon",type:"icon"},{text:"Tipo de Evento",identity:"productionOrderActionTypeId",model:{service:"production_order_action_types",query:{isSystemEvent:null}}}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Eventos de Ordem de Produ\xe7\xe3o",href:"/administration/production-order-event-types"}],customContent:{dontEdit:function(e){var t=e.data;return!pt(t,"isSystemEvent")},dontDelete:function(e){var t=e.data;return!pt(t,"isSystemEvent")}}},lc={metadata:{name:"machine_types",listPath:"/administration/machine-types",formPath:"/administration/machine-types",paramsProp:"machineTypeId",newItemText:"Novo Tipo de M\xe1quina"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Tipos de M\xe1quinas",href:"/administration/machine-types"}]},mc={metadata:{name:"nozzle_types",listPath:"/administration/nozzle-types",formPath:"/administration/nozzle-types",paramsProp:"nozzleTypeId",newItemText:"Novo Tipo de Bico"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Tipos de Bico",href:"/administration/nozzle-types"}]},uc={metadata:{name:"product_mat_types",listPath:"/administration/product-mat-types",formPath:"/administration/product-mat-types",paramsProp:"productMatTypeId",newItemText:"Novo Tipo de Produto"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Tipos de Produtos",href:"/administration/product-mat-types"}]},pc=mt((function(e){return{actions:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},loader:{height:"100%",width:"100%",background:"rgba(255,255,255,.5)",zIndex:1,position:"absolute",right:0,top:0,padding:"0 8px","&>div":{position:"relative",top:25}},icon:{fontSize:30,color:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,i=void 0===a?{}:a,o=(e.field,Object(n.useContext)(Je)),s=Object(n.useState)(),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),h(),e.prev=2,e.next=5,o.service("users").patch(i.id,{},{query:{$sendEmail:!0}});case 5:b(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),h(e.t0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return!!i.id&&r.a.createElement("div",{className:t.actions},l&&r.a.createElement("div",{className:t.loader},r.a.createElement(ka,null)),r.a.createElement(oa,{text:"(Re) Iniciar Senha",icon:"mail",onClick:E}),v&&r.a.createElement(ia.a,{className:t.icon},"done"),f&&r.a.createElement(sn,{errors:f}))})),fc=mt((function(e){return{actions:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},loader:{height:"100%",width:"100%",background:"rgba(255,255,255,.5)",zIndex:1,position:"absolute",right:0,top:0,padding:"0 8px","&>div":{position:"relative",top:25}},icon:{fontSize:30,color:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,i=void 0===a?{}:a,o=e.type,s=Object(n.useContext)(Je),d=Object(n.useState)(),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)(),f=Object(c.a)(p,2),h=f[0],y=f[1],g=Object(n.useState)(),v=Object(c.a)(g,2),b=v[0],E=v[1],x=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),y(),e.prev=2,e.next=5,s.service("users").patch(i.id,{},{query:{$sendReport:o}});case 5:E(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),y(e.t0);case 11:return e.prev=11,u(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return!!i.id&&r.a.createElement("div",{className:t.actions},m&&r.a.createElement("div",{className:t.loader},r.a.createElement(ka,null)),r.a.createElement(oa,{text:"Enviar Relat\xf3rio",icon:"mail",onClick:x}),b&&r.a.createElement(ia.a,{className:t.icon},"done"),h&&r.a.createElement(sn,{errors:h}))})),hc=mt((function(e){return{tooltip:{position:"absolute",right:-10},icon:{color:e.palette.primary.header},label:{color:e.palette.common.white}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.option,n=void 0===a?{}:a;e.data,e.field;return r.a.createElement(na.a,{className:t.tooltip,placement:"right",title:r.a.createElement(r.a.Fragment,null,n.writeMasterData&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Criar/Modificar Cadastros"),n.readMasterData&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Visualizar Cadastros"),n.crudAdminData&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Acesso a Dados Administra\xe7\xe3o"),n.crudUserData&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Cadastro Usuario/Perfil"),n.writeActiveProductionOrders&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Criar Ordens Produ\xe7\xe3o"),n.writeScheduledStopProductionOrders&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Criar Ordens N\xe3o Produ\xe7\xe3o"),n.openProductionOrders&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Liberar Ordens (sequenciaador)"),n.writeProductionOrderEvents&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Apontar Eventos Ordem"),n.editProductionOrderEvents&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Modificar Eventos Ordem"),n.readProductionOrders&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Visualizar Ordens"),n.readProductionOrderReports&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Visualizar Relatorios"),n.readPendingWaste&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Visualizar Refugo"),n.writePendingWaste&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Apontar Refugo"),n.editPendingWaste&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},"- Modificar Refugo"))},r.a.createElement(ia.a,{className:t.icon},"help"))})),yc=[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Email",identity:"email",filter:{type:"string"}},{text:"Perfis",identity:"roles",customContent:{dontFilter:!0},customData:function(e){var t=e.data;return ft((void 0===t?{}:t).roles,(function(e){return e.name})).join(", ")}},{text:"Status",identity:"user_status.name",model:{service:"user_statuses",identity:"userStatusId"}}],gc=[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Status",identity:"userStatusId",required:!0,model:"user_statuses",defaultValue:{config:"user.status.init"}},{text:"Data Inclus\xe3o",identity:"creationDate",readOnly:!0,show:{ifThis:"id"},type:"string",defaultValue:{customValue:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,n=void 0===a?{}:a,r=t.field,i=t.handleChange,o=f()(pt(n,"createdAt")).format("DD/MM/YYYY HH:mm"),i({target:{name:r.identity,value:o}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}],[{text:"Email",identity:"email",required:!0,type:"email",customData:function(e){var t=Object.assign({},e);return r.a.createElement(pc,t)}}],[{text:"Fone",identity:"phone",type:"string"}],[{text:"Enviar Relat\xf3rio de Produ\xe7\xe3o Diario",identity:"sendDailyReport",type:"boolean",customData:function(e){var t=Object.assign({},e);return r.a.createElement(fc,Object.assign({type:"sendDailyReport"},t))}}],[{text:"Enviar Relat\xf3rio de Produ\xe7\xe3o Semanal",identity:"sendWeeklyReport",type:"boolean",customData:function(e){var t=Object.assign({},e);return r.a.createElement(fc,Object.assign({type:"sendWeeklyReport"},t))}}],[{text:"Perfil Usuario",identity:"roles",model:{service:"roles",query:{name:{$nin:["sysadmin"]}}},type:"checklist",handleValidate:function(e){var t=e.data,a=pt(void 0===t?{}:t,"target.value");return!(!a||!a.length)||"Selecione pelo menos 1 perfil"},customContent:{customOptionContent:function(e){var t=Object.assign({},e);return r.a.createElement(hc,t)}}},{identity:"roles:delete",show:!1,type:"checklist"}]],vc=oc,bc=cc,Ec=dc,xc=lc,Oc=mc,wc=rc,jc=uc,kc={metadata:{name:"users",listPath:"/administration/users",formPath:"/administration/users",paramsProp:"userId",newItemText:"Novo Usu\xe1rio"},list:yc,form:gc,links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Usu\xe1rios",href:"/administration/users"}],query:{$sort:{name:1}}},Nc={metadata:{name:"waste_justifications",listPath:"/administration/waste-justifications",formPath:"/administration/waste-justifications",paramsProp:"wasteJustificationId",newItemText:"Novo Motivo de Refugo"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Administra\xe7\xe3o",href:"/administration"},{text:"Motivos de Refugo",href:"/administration/waste-justifications"}]},Sc=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,null,r.a.createElement(Li,{exact:!0,path:"/administration/reset-password",component:nc}),r.a.createElement(Li,{exact:!0,path:"/administration",permissions:["crudAdminData","crudUserData"],component:ac}),r.a.createElement(Li,{exact:!0,path:"/administration/attributes",permissions:["crudAdminData"],component:function(){return Bi(vc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/attributes/:attributeId",permissions:["crudAdminData"],component:function(){return Hi(vc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/production-order-types",permissions:["crudAdminData"],component:function(){return Bi(bc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/production-order-types/:productionOrderTypeId",permissions:["crudAdminData"],component:function(){return Hi(bc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/production-order-event-types",permissions:["crudAdminData"],component:function(){return Bi(Ec)}}),r.a.createElement(Li,{exact:!0,path:"/administration/production-order-event-types/:productionOrderEventTypeId",permissions:["crudAdminData"],component:function(){return Hi(Ec)}}),r.a.createElement(Li,{exact:!0,path:"/administration/plants",permissions:["crudAdminData"],component:function(){return Bi(wc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/plants/:plantId",permissions:["crudAdminData"],component:ic}),r.a.createElement(Li,{exact:!0,path:"/administration/machine-types",permissions:["crudAdminData"],component:function(){return Bi(xc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/machine-types/:machineTypeId",permissions:["crudAdminData"],component:function(){return Hi(xc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/nozzle-types",permissions:["crudAdminData"],component:function(){return Bi(Oc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/nozzle-types/:nozzleTypeId",permissions:["crudAdminData"],component:function(){return Hi(Oc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/product-mat-types",permissions:["crudAdminData"],component:function(){return Bi(jc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/product-mat-types/:productMatTypeId",permissions:["crudAdminData"],component:function(){return Hi(jc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/users",permissions:["crudUserData"],component:function(){return Bi(kc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/users/:userId",permissions:["crudUserData"],component:function(){return Hi(kc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/waste-justifications",permissions:["crudAdminData"],component:function(){return Bi(Nc)}}),r.a.createElement(Li,{exact:!0,path:"/administration/waste-justifications/:wasteJustificationId",permissions:["crudAdminData"],component:function(){return Hi(Nc)}}),r.a.createElement(Li,{default:!0,component:Vo})))},Ic=r.a.memo(mt((function(e){return{menu:{height:300},icon:{},filter:Object(ge.a)({display:"flex",alignItems:"center",margin:e.spacing(1),borderRadius:50},e.breakpoints.down("xs"),{margin:3,padding:2})}}),{withTheme:!0})((function(e){var t=e.classes,a=e.setQuery,i=void 0===a?function(){}:a,o=e.setFindQuery,s=void 0===o?function(){}:o,d=e.timeCarousel,l=Object(n.useContext)(Je),m=Object(n.useState)("TODAS"),u=Object(c.a)(m,2),p=u[0],f=u[1],h=Object(n.useState)({}),y=Object(c.a)(h,2),g=y[0],v=y[1],b=Object(n.useState)(!0),E=Object(c.a)(b,2),x=E[0],O=E[1],w=Ht({model:"plants",query:{$sort:{name:1},plantStatusId:pt(l.get("config.plant.status.active"),"value")},timeCarousel:d}),j=w.list,k=w.loading,N=Object(n.useState)(null),S=Object(c.a)(N,2),I=S[0],C=S[1],A=function(){return C(null)},D=function(e){var t=e.id;e.name;return function(){v((function(e){return e[t]?delete e[t]:e[t]=!0,e})),A()}},T=JSON.stringify(g);Object(n.useEffect)((function(){var e=JSON.parse(T);if(!k){if(x)return O(!1);var t=Object.keys(e);t.length?(f(ft(yt(j,(function(t){return e[t.id]})),(function(e){return e.name})).join(", ")),s((function(e){return Object(be.a)({},e,{plantId:{$in:t}})})),i({plantId:{$in:t}})):(f("TODAS"),s((function(e){return delete e.plantId,Object(be.a)({},e)})),i({})),localStorage.setItem("plant-filters",JSON.stringify(e))}}),[T,k,x,j,s,i]);var P=localStorage.getItem("plant-filters");return Object(n.useEffect)((function(){P&&v(JSON.parse(P))}),[P]),r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a,{variant:"outlined",color:"primary",className:t.filter,"aria-owns":I?"plant-filter":void 0,"aria-haspopup":"true",onClick:function(e){return C(e.currentTarget)}},r.a.createElement(ya.a,{variant:"body1"},p)),r.a.createElement(Bn.a,{className:t.menu,id:"plant-filter",anchorEl:I,open:!!I,onClose:A},r.a.createElement(Hn.a,{onClick:function(){v({}),A()}},"TODAS"),ft(j,(function(e){return r.a.createElement(Hn.a,{key:e.id,onClick:D(Object(be.a)({},e))},g[e.id]&&r.a.createElement(ia.a,{color:"primary"},"done"),e.name)}))))}))),Cc=[{name:"Produ\xe7\xe3o Ativa",icon:"view_agenda",href:"/dashboard/production",permissions:["readProductionOrders"]},{name:"Apontamento Refugo",icon:"vertical_split",href:"/dashboard/production-waste",permissions:["readProductionOrders"]},{name:"Hist\xf3rico de Produ\xe7\xe3o",icon:"view_day",href:"/dashboard/production-history",permissions:["readProductionOrderReports"]},{name:"Relat\xf3rio de Produ\xe7\xe3o",icon:"table_chart",href:"/dashboard/production-report",permissions:["readProductionOrderReports"]},{name:"Tempo Real",icon:"av_timer",permissions:["readProductionOrders","readProductionOrderReports"]}],Ac=mt((function(e){var t;return{icon:{marginLeft:e.spacing(1)},kpiLabel:{fontSize:".75rem"},toolbar:(t={zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2)},Object(ge.a)(t,e.breakpoints.down("xs"),{margin:-e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),Object(ge.a)(t,"backgroundColor",e.palette.secondary.main),t),export:{minWidth:"auto",color:e.palette.primary.main},disabled:{pointerEvents:"none",background:"lightgrey"}}}),{withTheme:!0})((function(e){var t=e.classes,a=zt(),i=a.session,o=a.permissions,s=pt(i,"company.level"),d=Object(n.useContext)(Je),l=Ft({client:d,type:"noJustified"}),m=Object(n.useState)(0),u=Object(c.a)(m,2),p=u[0],h=u[1],y=Object(n.useState)(0),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)({}),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(),k=Object(c.a)(j,2),N=k[0],S=k[1],I=Object(n.useState)(),C=Object(c.a)(I,2),A=C[0],D=C[1],T=JSON.stringify(O);Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,d.service("machines").find({query:Object(be.a)({},JSON.parse(T),{$reportLabels:{type:"inactiveMachines",sd:f()().subtract(1,"days").startOf("day").add(6,"hours"),ed:f()().subtract(1,"days").endOf("day").add(6,"hours")},machineStatusId:pt(d.get("config.machine.status.active"),"value")})});case 3:t=e.sent,h(t.inactiveMachines),S(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d,T]),Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,d.service("machines").find({query:Object(be.a)({},JSON.parse(T),{$reportLabels:{type:"pendingWaste",sd:qt({date:f()().subtract(7,"days").startOf("day").add(6,"hours")}),ed:qt({date:f()().subtract(1,"days").endOf("day").add(6,"hours")})},machineStatusId:pt(d.get("config.machine.status.active"),"value")})});case 3:t=e.sent,b(t.pendingWaste),D(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d,T]);var P=Pt({data:d.get("actionType.".concat(l)),path:"color"}),M=function(e){var a=e.index;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,pt(Cc,"".concat(a,".name"))),r.a.createElement(ia.a,{className:t.icon},"arrow_forward_ios"))},F=$t().sensorsURL,q=_t({privileges:["readProductionOrders","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],permissions:o}),R=_t({privileges:["readProductionOrderReports"],permissions:o}),_=_t({privileges:["readPendingWaste","writePendingWaste","editPendingWaste"],permissions:o});return r.a.createElement("div",{className:t.container},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(co,{className:t.export,component:st,to:"/reports/carousel",text:"Tela Cheia",icon:"view_carousel",variant:"toolbar",color:"primary"})),r.a.createElement(Ic,{setQuery:w})),r.a.createElement(Gt.a,{container:!0,spacing:2},r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2,className:t.kpi},q&&r.a.createElement(Gt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ji,{name:M({index:0}),description:pt(Cc,"0.description"),icon:pt(Cc,"0.icon"),href:pt(Cc,"0.href"),kpi:r.a.createElement(r.a.Fragment,null,N&&r.a.createElement(ro,null),!N&&r.a.createElement("span",{style:{color:P}},p),r.a.createElement("span",{className:t.kpiLabel,style:{color:P}},"M\xe1quinas paradas"))})),_&&r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,className:ut(Object(ge.a)({},t.disabled,"N1"!==s))},r.a.createElement(Ji,{name:M({index:1}),description:pt(Cc,"1.description"),icon:pt(Cc,"1.icon"),href:pt(Cc,"1.href"),kpi:"N1"===s&&r.a.createElement(r.a.Fragment,null,A&&r.a.createElement(ro,null),!A&&r.a.createElement("span",{style:{color:P}},v),r.a.createElement("span",{className:t.kpiLabel,style:{color:P}},"Apontamentos pendentes (7d)"))})),R&&r.a.createElement(Gt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ji,{name:M({index:2}),description:pt(Cc,"2.description"),icon:pt(Cc,"2.icon"),href:pt(Cc,"2.href")})),(q||R)&&F&&r.a.createElement(Gt.a,{item:!0,xs:12,sm:6},r.a.createElement("a",{href:F,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(Ji,{name:M({index:4}),description:pt(Cc,"4.description"),icon:pt(Cc,"4.icon")}))))))})),Dc=a(32),Tc=a.n(Dc),Pc=a(55),Mc=a.n(Pc);a(215),a(216),a(217),a(296);window,document,(Ve=Tc.a).plugins=Ve.plugins||{},Ve.plugins.targetLine=function(e){return function(t){t.on("created",(function(t){if(e.class="ct-target-line",t.axisX&&t.options.horizontalBars){var a=t.chartRect.x1+t.axisX.projectValue(e.value);t.svg.elem("line",{x1:a,x2:a,y1:t.chartRect.y1,y2:t.chartRect.y2},e.class)}else if(t.axisX&&!t.options.horizontalBars){var n=t.chartRect.y1-t.axisY.projectValue(e.value);t.svg.elem("line",{x1:t.chartRect.x1,x2:t.chartRect.x2,y1:n,y2:n},e.class)}else{e.class="ct-gauge-needle";var r=(t.chartRect.x1+t.chartRect.x2)/2,i=(t.chartRect.y1+t.chartRect.y2)/2,o=parseFloat(e.value),c=function(e){return 360*e}((o>105?105:o)/100/2)*Math.PI/180,s=r-150*Math.cos(c),d=i-150*Math.sin(c),l=r-5*Math.cos(c-Math.PI/2),m=i-5*Math.sin(c-Math.PI/2),u=r-5*Math.cos(c+Math.PI/2),p=i-5*Math.sin(c+Math.PI/2);t.svg.elem("circle",{cx:r,cy:i,r:5},e.class),t.svg.elem("path",{d:"M ".concat(l," ").concat(m," L ").concat(s," ").concat(d," L ").concat(u," ").concat(p)},e.class),t.svg.elem("text",{x:s,y:d-20,style:"fill:".concat(e.color,";stroke:").concat(e.color,";")},e.class)._node.innerHTML="".concat(At(parseFloat(e.value).toFixed(2)),"%")}}))}};var Fc=mt((function(e){return{}}),{withTheme:!0})((function(e){e.classes;var t=e.theme,a=e.value,n={height:300,startAngle:270,total:200,showLabel:!1,plugins:[Tc.a.plugins.targetLine({value:a,color:"#000"})]};return r.a.createElement(Mc.a,{type:"Pie",data:{series:[{value:50,offset:50,bgColor:"#FDBFC3"},{value:30,offset:80,bgColor:"#FFFFBF"},{value:20,offset:100,bgColor:"#DEEEE3"}]},options:n,listener:{draw:function(e){e.series&&e.element.attr({style:"fill: ".concat(e.series.bgColor,";")})}},style:{padding:t.spacing(2),marginTop:50}})})),qc=mt((function(e){var t,a;return{legend:(t={fontSize:"small"},Object(ge.a)(t,e.breakpoints.down("sm"),{fontSize:"xx-small"}),Object(ge.a)(t,"flexWrap","wrap"),Object(ge.a)(t,"display","flex"),Object(ge.a)(t,"margin","0 ".concat(e.spacing9,"px")),Object(ge.a)(t,"boxShadow","none"),Object(ge.a)(t,"background","none"),t),titleLegend:(a={margin:e.spacing(1)},Object(ge.a)(a,e.breakpoints.down("sm"),{margin:e.spacing(.5)}),Object(ge.a)(a,"display","flex"),Object(ge.a)(a,"width","fit-content"),Object(ge.a)(a,"alignItems","center"),a),iconLegend:{borderRadius:"50%",height:10,width:10,margin:5}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.theme,n=e.options,i=void 0===n?{}:n,o=e.data,c=Object(be.a)({chartPadding:30,labelOffset:70,height:300,showLabel:!1,labelDirection:"explode",labelInterpolationFnc:function(e){return"".concat(e,"%")}},i),s={draw:function(e){if(e.series||"label"===e.type){var t=Array.prototype.slice.call(pt(e,"element._node.parentElement.children")||[]).indexOf(pt(e,"element._node"));e.element.attr({style:"fill: ".concat(pt(e,"series.bgColor")||pt(o,"series.".concat(t,".bgColor")))})}}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mc.a,{type:"Pie",data:o,options:c,listener:s,style:{padding:a.spacing(2)}}),r.a.createElement(fa.a,{className:t.legend},te(o.labelsNames,(function(e,a){return r.a.createElement("div",{key:a,className:t.titleLegend},r.a.createElement("i",{className:t.iconLegend,style:{background:pt(o,"series.".concat(a,".bgColor"))}})," ",e)}))))})),Rc=mt((function(e){return{item:{"& canvas":Object(ge.a)({paddingLeft:e.spacing(3)},e.breakpoints.up("sm"),{height:"280px !important"})},header:{padding:e.spacing(2)},title:{color:"dark"===e.palette.type?e.palette.common.white:e.palette.common.black,display:"flex",alignItems:"center",fontSize:"1.5rem",textDecoration:"none"},wrapper:{display:"flex",position:"relative",paddingLeft:e.spacing(3),alignItems:"center"},linkIcon:{marginLeft:e.spacing(1)},icon:{fontSize:50,color:"dark"===e.palette.type?e.palette.common.white:e.palette.primary.main},legend:Object(ge.a)({flexWrap:"wrap",display:"flex",margin:"".concat(e.spacing(2),"px ").concat(e.spacing(2),"px 0"),boxShadow:"none",background:"none",fontSize:"small"},e.breakpoints.down("sm"),{fontSize:"xx-small"}),titleLegend:Object(ge.a)({display:"flex",width:"fit-content",alignItems:"center",textTransform:"uppercase",margin:e.spacing(1)},e.breakpoints.down("sm"),{margin:e.spacing(.5)}),iconLegend:{borderRadius:"50%",height:10,width:10,margin:5},kpiLabel:{fontSize:".75rem"},kpi:Object(ge.a)({fontSize:"1.5rem",position:"absolute",right:30,bottom:10,display:"flex",flexDirection:"column",alignItems:"center"},e.breakpoints.down("sm"),{position:"static",flexDirection:"row",fontSize:"1rem","& > span:first-of-type":{order:1,marginLeft:e.spacing(1)}})}}),{withTheme:!0})((function(e){var t=e.classes,a=e.theme,i=e.plantIdQuery,o=void 0===i?{}:i,s=Qe().session,d=pt(s,"company.level"),l=Object(n.useContext)(Je),m=Object(n.useState)(),u=Object(c.a)(m,2),p=u[0],h=u[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=JSON.stringify(o);Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,l.service("machines").find({query:Object(be.a)({},JSON.parse(E),{$reportYesterdaySummary:{sd:f()().subtract(1,"days").startOf("day").add(6,"hours"),ed:f()().subtract(1,"days").endOf("day").add(6,"hours")},machineStatusId:pt(l.get("config.machine.status.active"),"value")})});case 3:t=e.sent,j(t.graphOEE),T(t.graphInactivity),q(t.graphStats),h(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,E]),Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,l.service("machines").find({query:Object(be.a)({},JSON.parse(E),{$reportIndicators:{sd:f()().subtract(3,"days").startOf("day").add(6,"hours"),ed:f()().subtract(1,"days").endOf("day").add(6,"hours"),dates:[{sd:f()().subtract(7,"days").startOf("day").add(6,"hours"),ed:f()().subtract(7,"days").endOf("day").add(6,"hours")},{sd:f()().subtract(6,"days").startOf("day").add(6,"hours"),ed:f()().subtract(6,"days").endOf("day").add(6,"hours")},{sd:f()().subtract(5,"days").startOf("day").add(6,"hours"),ed:f()().subtract(5,"days").endOf("day").add(6,"hours")},{sd:f()().subtract(4,"days").startOf("day").add(6,"hours"),ed:f()().subtract(4,"days").endOf("day").add(6,"hours")},{sd:f()().subtract(3,"days").startOf("day").add(6,"hours"),ed:f()().subtract(3,"days").endOf("day").add(6,"hours")},{sd:f()().subtract(2,"days").startOf("day").add(6,"hours"),ed:f()().subtract(2,"days").endOf("day").add(6,"hours")},{sd:f()().subtract(1,"days").startOf("day").add(6,"hours"),ed:f()().subtract(1,"days").endOf("day").add(6,"hours")}]},machineStatusId:pt(l.get("config.machine.status.active"),"value")})});case 3:t=e.sent,(a=t.graphIndicators).series=a.series.slice(0,3),I(a),b(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,E]);var x=Object(n.useState)(),O=Object(c.a)(x,2),w=O[0],j=O[1],k=Object(n.useState)({}),N=Object(c.a)(k,2),S=N[0],I=N[1],C=Object(n.useState)({}),A=Object(c.a)(C,2),D=A[0],T=A[1],P=Object(n.useState)({}),M=Object(c.a)(P,2),F=M[0],q=M[1],R={height:250,axisX:{showGrid:!1},axisY:{offset:20,type:Tc.a.FixedScaleAxis,high:110,low:0,ticks:[0,20,40,60,80,100],labelInterpolationFnc:function(e){return"".concat(e,"%")}},plugins:[Tc.a.plugins.tooltip({appendToBody:!0,class:"gauge-tooltip",tooltipFnc:function(e,t){return At(parseFloat(t).toFixed(2))}})]},_={draw:function(e){e.series&&e.element.attr({style:"stroke: ".concat(e.series.bgColor,"; stroke-width: ").concat(window.outerWidth<=a.breakpoints.width("sm")?"15px":"30px")})}},U=Ft({client:l,type:"noJustified"}),W=Pt({data:l.get("actionType.".concat(U)),path:"color"}),L=Object(n.useState)(f()().subtract(7,"day").startOf("day").add(6,"hours")),z=Object(c.a)(L,1)[0],Y=Object(n.useState)(f()().subtract(1,"day").endOf("day").add(6,"hours")),B=Object(c.a)(Y,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,className:t.item,component:st,to:"/reports/production-oee"},r.a.createElement("div",{className:t.wrapper},r.a.createElement(ia.a,{className:t.icon},"donut_large"),r.a.createElement("div",{className:t.header},r.a.createElement(ya.a,{className:t.title,variant:"body1"},r.a.createElement("span",null,"OEE (ontem)"),r.a.createElement(ia.a,{className:t.linkIcon},"arrow_forward_ios")),"N1"!==d&&r.a.createElement("div",{className:t.kpi},r.a.createElement("span",{className:t.kpiLabel,style:{color:W}},"Qualidade assumida 100%")))),p&&r.a.createElement(ro,null),!p&&r.a.createElement(Fc,{value:w})),r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,className:t.item,component:st,to:"/reports/production-oee?sd=".concat(z.toISOString(),"&ed=").concat(B.toISOString())},r.a.createElement("div",{className:t.wrapper},r.a.createElement(ia.a,{className:t.icon},"view_week"),r.a.createElement("div",{className:t.header},r.a.createElement(ya.a,{className:t.title,variant:"body1"},r.a.createElement("span",null,"Indicadores (7 dias)"),r.a.createElement(ia.a,{className:t.linkIcon},"arrow_forward_ios")))),v&&r.a.createElement(ro,null),!v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Mc.a,{type:"Bar",className:"ct-indicators",data:S,options:R,listener:_,style:{padding:a.spacing(2)}}),r.a.createElement(fa.a,{className:t.legend},ft(["Disponibilidade","Qualidade","Performance"],(function(e,a){return r.a.createElement("div",{key:a,className:t.titleLegend},r.a.createElement("i",{className:t.iconLegend,style:{background:pt(S,"series.".concat(a,".bgColor"))}})," ",e)}))))),r.a.createElement(Gt.a,{item:!0,xs:12,sm:6,className:t.item},r.a.createElement("div",{className:t.wrapper},r.a.createElement(ia.a,{className:t.icon},"pie_chart"),r.a.createElement("div",{className:t.header},r.a.createElement(ya.a,{className:t.title,variant:"body1"},"Disponibilidade (ontem)"),r.a.createElement("div",{className:t.kpi},p&&r.a.createElement(ro,null),!p&&r.a.createElement("span",{style:{color:W}},At(parseFloat(F.graphTotalNonPlannedStoppedTime).toFixed(2))),r.a.createElement("span",{className:t.kpiLabel,style:{color:W}},"Horas paradas")))),p&&r.a.createElement(ro,null),!p&&r.a.createElement(qc,{data:D})))})),_c=[{name:"Produ\xe7\xe3o Ativa",icon:"view_agenda",href:"/dashboard/production",permissions:["readProductionOrders"]},{name:"Apontamento Refugo",icon:"vertical_split",href:"/dashboard/production-waste",permissions:["readProductionOrders"]},{name:"Hist\xf3rico de Produ\xe7\xe3o",icon:"view_day",href:"/dashboard/production-history",permissions:["readProductionOrderReports"]},{name:"Relat\xf3rio de Produ\xe7\xe3o",icon:"table_chart",href:"/reports/production-report",permissions:["readProductionOrderReports"]},{name:"Tempo Real",icon:"av_timer",permissions:["readProductionOrders","readProductionOrderReports"]}],Uc=mt((function(e){var t;return{icon:{marginLeft:e.spacing(1)},kpiLabel:{fontSize:".75rem"},toolbar:(t={zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2)},Object(ge.a)(t,e.breakpoints.down("xs"),{margin:-e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),Object(ge.a)(t,"backgroundColor",e.palette.secondary.main),t),export:{minWidth:"auto",color:e.palette.primary.main},disabled:{pointerEvents:"none",background:"lightgrey"}}}),{withTheme:!0})((function(e){var t=e.classes,a=zt().permissions,i=Object(n.useState)({}),o=Object(c.a)(i,2),s=o[0],d=o[1],l=_t({privileges:["readProductionOrderReports"],permissions:a});return r.a.createElement("div",{className:t.container},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(co,{className:t.export,component:st,to:"/reports/carousel",text:"Tela Cheia",icon:"view_carousel",variant:"toolbar",color:"primary"})),r.a.createElement(Ic,{setQuery:d})),r.a.createElement(Gt.a,{container:!0,spacing:2},r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2,className:t.kpi},l&&r.a.createElement(Gt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ji,{name:function(e){var a=e.index;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,pt(_c,"".concat(a,".name"))),r.a.createElement(ia.a,{className:t.icon},"arrow_forward_ios"))}({index:3}),description:pt(_c,"3.description"),icon:pt(_c,"3.icon"),href:pt(_c,"3.href")}))),l&&r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2},r.a.createElement(Rc,{plantIdQuery:s}))))})),Wc=mt((function(e){return{container:{width:50,height:50,marginRight:e.spacing(2),fontSize:"1rem"},currentCycle:{display:"inline-grid",lineHeight:"unset",marginTop:"2px",color:e.palette.common.white},standardCycle:{textAlign:"center",color:e.palette.common.white,fontSize:".65rem",borderTop:"solid 1px ".concat(e.palette.common.white)}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.productionOrder,i=e.noOPEventType,o=e.size,s=Object(n.useState)(),d=Object(c.a)(s,2),l=d[0],m=d[1],u=Object(n.useState)(),p=Object(c.a)(u,2),f=p[0],h=p[1],y=JSON.stringify(a||{});return Object(n.useEffect)((function(){h(pt(JSON.parse(y),"mostRecentEvent.0"))}),[y]),Object(n.useEffect)((function(){return m(Rt({data:JSON.parse(y)}).toFixed(1))}),[y]),r.a.createElement(Kt.a,{className:t.container,style:{width:"".concat(o,"px")||!1,height:"".concat(o,"px")||!1,background:Pt({data:f,path:"productionOrderEventType.production_order_action_type.color"})||Pt({data:i,path:"production_order_action_type.color"})}},r.a.createElement("div",{className:t.currentCycle},f?l:"ND",r.a.createElement(ya.a,{className:t.standardCycle},f&&(pt(a,"idealCycle")?r.a.createElement("span",null,pt(a,"idealCycle")):"ND"))))})),Lc=mt((function(e){return{content:{flexWrap:"nowrap"},link:{textDecoration:"none"},card:{}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.machine,i=e.productionOrder,o=e.lastEvent,s=e.setShowUndefinedAlert,d=e.setShowStoppedAlert,l=e.setShowNoActiveOPAlert,m=e.setShowMaxProductionAlert,u=zt().session,p=pt(u,"company.level"),h=Object(n.useContext)(Je),y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(),k=Object(c.a)(j,2),N=k[0],S=k[1],I=h.get("actionType.".concat(pt(h.get("config.productionOrder.eventType.noJustified"),"value"))),C=pt(v,"confirmedProduction")||pt(v,"totalProduction"),A=pt(v,"expectedProduction")-C,D=Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,n,r,i,o,c,s;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.service("production_orders").find({query:{machineId:a.id,$populateAll:!0,isActive:!0,$sort:{actualStartDate:1},$limit:1}});case 2:if(n=e.sent,r=n.data,!(t=r).length){e.next=9;break}b(t[0]),e.next=19;break;case 9:return b({$withoutOP:!0}),e.next=12,h.service("sensors").find({query:{machineId:a.id}});case 12:return i=e.sent,o=i.data,e.next=16,h.service("production_order_events").find({query:{mi:a.id,si:pt(o,"0.id"),$populateAll:!0,"r.0":{$exists:!0},sd:{$gte:f()().startOf("day").add(6,"hours").toDate()},$sort:{sd:-1},$limit:1}});case 16:c=e.sent,s=c.data,w(s);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[h,a.id]),T=JSON.stringify(i||{});Object(n.useEffect)((function(){var e=JSON.parse(T);b(e)}),[T]);var P=JSON.stringify(o||{});Object(n.useEffect)((function(){var e=JSON.parse(P);w(e)}),[P]);var M=JSON.stringify(v||{}),F=JSON.stringify(O||{});Object(n.useEffect)((function(){var e=JSON.parse(M),t=JSON.parse(F),a=function(t){var a=t.noJustified,n=t.noActiveOP,r="";t.undefinedEV&&(r="rgba(0, 0, 0, .14)"),n&&(r="#00BFFF"),a&&(r=Pt({data:I,path:"color"})),"N1"===p&&A<=0&&pt(e,"production_order_type.isInProduction")&&(m(!0),r=r?"linear-gradient(to right bottom, ".concat(r," 50%, #ADFF2F 50%)"):"#ADFF2F"),S(r)};(function(){var n=Object(Ne.a)(ke.a.mark((function n(){var r,i,o;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!pt(e,"uuid")){n.next=20;break}if(r=pt(e,"mostRecentEvent.0.productionOrderEventType.productionOrderActionTypeId"),i=pt(e,"lastReading.0.r")||[],pt(e,"production_order_type.isInProduction")&&pt(e,"lastReading.length")&&parseInt(pt(i,"".concat(i.length-1,".t")),"10")){n.next=5;break}return n.abrupt("return",a({noJustified:!1}));case 5:if(o=!1,ht([h.get("config.productionOrder.eventType.active"),h.get("config.productionOrder.eventType.noJustified"),h.get("config.productionOrder.eventType.max"),h.get("config.productionOrder.eventType.min")],(function(e){"".concat(pt(e,"value"))==="".concat(r)&&(o=!0)})),o){n.next=17;break}if("".concat(r)!=="".concat(pt(h.get("config.productionOrder.eventType.undefined"),"value"))){n.next=13;break}return s(!0),n.abrupt("return",a({undefinedEV:!0}));case 13:return d(!0),n.abrupt("return",a({noJustified:!0}));case 15:n.next=18;break;case 17:return n.abrupt("return",a({noJustified:!1}));case 18:n.next=27;break;case 20:if(!pt(e,"$withoutOP")){n.next=27;break}if(!pt(t,"0.sd")){n.next=26;break}return l(!0),n.abrupt("return",a({noActiveOP:!0}));case 26:return n.abrupt("return",a({noJustified:!1}));case 27:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[h,a.id,l,s,d,m,A,I,M,F]);var q=pt(v,"isActive"),R=pt(v,"production_order_type.isInProduction");Object(n.useEffect)((function(){var e=wt((function(){return D()}),300),t=function(){var t=Object(Ne.a)(ke.a.mark((function t(n){var r;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.poi){t.next=6;break}return t.next=3,h.service("sensors").find({query:{machineId:a.id,id:n.si}});case 3:r=t.sent,r.data.length&&e();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(t){"".concat(t.machineId)==="".concat(a.id)&&e()};return h.service("production_orders").on("patched",n),h.service("production_orders").on("created",n),h.service("production_order_events").on("created",t),function(){h.service("production_orders").removeListener("patched",n),h.service("production_orders").removeListener("created",n),h.service("production_order_events").removeListener("created",t)}}),[h,a.id,D]);var _=-1===pt(v,"mostRecentEvent.0.ed")?f()():pt(v,"mostRecentEvent.0.ed");return r.a.createElement(Gt.a,{item:!0,xs:12,md:6,key:a.id,className:t.link,component:st,to:"/dashboard/production/".concat(a.id,"/order/").concat(pt(v,"uuid")?v.id:"new")},r.a.createElement(Ia.a,{className:t.card,style:{background:N}},r.a.createElement(qn.a,null,r.a.createElement(Gt.a,{className:t.content,container:!0,direction:"row",alignItems:"center",spacing:0},r.a.createElement(Gt.a,{item:!0,xs:4},r.a.createElement(ya.a,{component:"h6",variant:"h6",noWrap:!0},a.identity," - ",a.name),r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"Molde: ",pt(v,"mold.identity")," -"," ",pt(v,"mold.name")),"N1"===p&&r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"Produto: ",pt(v,"product.identity")," -"," ",pt(v,"product.name"))),r.a.createElement(Gt.a,{item:!0,style:{minWidth:"50px"}},r.a.createElement(Wc,{productionOrder:v,noOPEventType:pt(a,"noOPEventType")})),r.a.createElement(Gt.a,{item:!0,xs:3},r.a.createElement(ya.a,{variant:"body2",noWrap:!0},!q&&"".concat(pt(a,"noOPEventType.name")),q&&"".concat(pt(v,"mostRecentEvent.0.productionOrderEventType.name"))),r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"".concat(f()(_).format("DD/MM/YYYY"))),r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"".concat(f()(_).format("HH:mm")))),"N1"===p&&r.a.createElement(Gt.a,{item:!0,xs:3},r.a.createElement(ya.a,{variant:"body2",noWrap:!0},"PROG: ",(!q||!R)&&"N\xc3O DEFINIDO",r.a.createElement(or.a,{value:q&&"".concat(pt(v,"expectedProduction")),displayType:"text",thousandSeparator:".",decimalSeparator:","})),r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"CONFIRM:"," ",r.a.createElement(or.a,{value:R?C:"",displayType:"text",thousandSeparator:".",decimalSeparator:","})),r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"FALTA:"," ",r.a.createElement(or.a,{value:R?A:"",displayType:"text",thousandSeparator:".",decimalSeparator:","})))))))})),zc=mt((function(e){var t;return{alert:{display:"flex",justifyContent:"center",alignItems:"center","&>div":{width:20,height:20,marginRight:10}},scrollArea:{height:"100%"},toolbar:(t={zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2)},Object(ge.a)(t,e.breakpoints.down("xs"),{margin:-e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),Object(ge.a)(t,"color",e.palette.common.white),Object(ge.a)(t,"backgroundColor",e.palette.secondary.main),t)}}),{withTheme:!0})((function(e){var t=e.classes,a=e.limit,i=e.offset,o=zt().session,s=pt(o,"company.level"),d=Object(n.useContext)(Je),l=Object(n.useState)(),m=Object(c.a)(l,2),u=m[0],p=m[1],h=Object(n.useState)(),y=Object(c.a)(h,2),g=y[0],v=y[1],b=Object(n.useState)(),E=Object(c.a)(b,2),x=E[0],O=E[1],w=Object(n.useState)(),j=Object(c.a)(w,2),k=j[0],N=j[1],S=Ht({model:"machines",query:{$productionOrders:{sd:f()().startOf("day").add(6,"hours").toDate()},machineStatusId:pt(d.get("config.machine.status.active"),"value"),$sort:{identity:1},$limit:a,$skip:i}}),I=S.list,C=S.loading,A=S.errors,D=S.setQuery,T=!C&&!A&&0===I.length,P=d.get("actionType.".concat(pt(d.get("config.productionOrder.eventType.noJustified"),"value")));return r.a.createElement("div",{className:t.container},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement("div",{style:{flex:1}}),r.a.createElement(Ic,{setFindQuery:D})),r.a.createElement(Gt.a,{container:!0,spacing:1},r.a.createElement(Gt.a,{item:!0,xs:12},C&&r.a.createElement(ro,null),A&&r.a.createElement(io,{errors:A}),T&&r.a.createElement(oo,null),u&&r.a.createElement("div",{className:t.alert},r.a.createElement("div",{style:{background:"rgba(0, 0, 0, .14)"}}),r.a.createElement(ya.a,null,"M\xe1quinas sem comunica\xe7\xe3o com o leitor com ciclos no dia de hoje.")),g&&r.a.createElement("div",{className:t.alert},r.a.createElement("div",{style:{background:Pt({data:P,path:"color"})}}),r.a.createElement(ya.a,null,"M\xe1quinas paradas com ciclos no leitor no dia de hoje.")),x&&r.a.createElement("div",{className:t.alert},r.a.createElement("div",{style:{background:"#00BFFF"}}),r.a.createElement(ya.a,null,"M\xe1quinas sem OP ativa com ciclos no leitor no dia de hoje.")),k&&"N1"===s&&r.a.createElement("div",{className:t.alert},r.a.createElement("div",{style:{background:"#ADFF2F"}}),r.a.createElement(ya.a,null,"Produ\xe7\xe3o esperada excedida."))),!T&&ft(I,(function(e,t){return r.a.createElement(Lc,{key:e.id,index:t,machine:e,productionOrder:e.productionOrder,lastEvent:e.events,setShowUndefinedAlert:p,setShowStoppedAlert:v,setShowNoActiveOPAlert:O,setShowMaxProductionAlert:N})}))))})),Yc=[{text:"Tipo de Ordem",identity:"productionOrderTypeId",required:!0,readOnly:{ifThis:"uuid"},model:"production_order_types"},[{text:"Status de Ordem",identity:"productionOrderStatusId",readOnly:!0,model:"production_order_statuses",defaultValue:{config:"productionOrder.status.init"}},{text:"Local",identity:"plantId",readOnly:!0,model:"plants"},{text:"Quantidade Confirmada",identity:"confirmedProduction",type:"integer",readOnly:{customIf:function(e){var t=e.data,a=void 0===t?{}:t;return"Encerramento"!==pt(a,"plant.qualityTrackFrequency")||"Q Confirmada"!==pt(a,"plant.qualityTrackType")}},show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t;return!!pt(a,"isClosed")&&!!pt(a,"production_order_type.isInProduction")}},handleValidate:function(e){var t=e.data,a=void 0===t?{}:t,n=e.item,r=void 0===n?{}:n,i=parseInt(pt(a,"target.value"),"10");return i>parseInt(pt(r,"totalProduction"),"10")?"Q Confirmada n\xe3o pode exceder a quantidade produzida":!(i<0)||"Q Confirmada n\xe3o pode ser negativo"},handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.item,r=void 0===n?{}:n,i=e.handleChange,o=parseInt(pt(a,"target.value"),"10");o&&"Q Confirmada"===pt(r,"plant.qualityTrackType")&&i({target:{name:"wastedProduction",value:(parseInt(pt(r,"totalProduction"),"10")||0)-o}})}},{text:"Quantidade Refugo",identity:"wastedProduction",type:"integer",readOnly:{customIf:function(e){var t=e.data,a=void 0===t?{}:t;return"Encerramento"!==pt(a,"plant.qualityTrackFrequency")||"Q Refugo"!==pt(a,"plant.qualityTrackType")}},show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t;return!!pt(a,"isClosed")&&!!pt(a,"production_order_type.isInProduction")}},handleValidate:function(e){var t=e.data,a=void 0===t?{}:t,n=e.item,r=void 0===n?{}:n,i=parseInt(pt(a,"target.value"),"10");return i>parseInt(pt(r,"totalProduction"),"10")?"Q Refugo n\xe3o pode exceder a quantidade produzida":!(i<0)||"Q Refugo n\xe3o pode ser negativo"},handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.item,r=void 0===n?{}:n,i=e.handleChange,o=parseInt(pt(a,"target.value"),"10");o&&"Q Refugo"===pt(r,"plant.qualityTrackType")&&i({target:{name:"confirmedProduction",value:(parseInt(pt(r,"totalProduction"),"10")||0)-o}})}}],{text:"M\xe1quina",identity:"machineId",icon:{type:"svg",src:Ur.a},required:!0,readOnly:{ifThis:"uuid"},model:{service:"machines",hasIdentity:!0,useCustomQuery:function(){var e=Object(n.useContext)(Je);return{machineStatusId:pt(e.get("config.machine.status.active"),"value")}}}},[{text:"Molde",identity:"moldId",icon:{type:"svg",src:$r.a},variants:"fullWidth",readOnly:{ifThis:"uuid"},model:{service:"molds",hasIdentity:!0,useCustomQuery:function(){var e=Object(n.useContext)(Je);return{moldStatusId:pt(e.get("config.mold.status.active"),"value")}}},handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.handleChange;e.item;pt(a,"target.value")||n({target:{name:"productId",value:null}})}}],[{text:"Produto",identity:"productId",icon:"style",variants:"fullWidth",show:{useCustomIf:function(e){var t=e.data,a=Vt({model:"production_order_types",id:(void 0===t?{}:t).productionOrderTypeId}).item;return!!pt(a,"isInProduction")}},readOnly:{customIf:function(e){var t=e.data,a=void 0===t?{}:t;return!pt(a,"moldId")||pt(a,"uuid")}},model:{service:"products",hasIdentity:!0,useCustomQuery:function(e){var t=e.data,a=void 0===t?{}:t,r=Object(n.useContext)(Je),i={productStatusId:pt(r.get("config.product.status.active"),"value")},o=Vt({model:"molds",id:a.moldId}).item;return pt(o,"id")?Object(be.a)({},i,{id:{$in:ft(o.products,(function(e){return e.id}))}}):i}},handleChange:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o,c,s,d,l,m,u,p,f,h,y,g,v,b;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.client,n=t.data,r=void 0===n?{}:n,i=t.handleChange,o=t.item,c=void 0===o?{}:o,s=t.field,d=void 0===s?{}:s,!(l=pt(r,"target.value"))){e.next=41;break}return d.loading=!0,e.prev=4,e.next=7,a.service("mold_products").find({query:{moldId:c.moldId,productId:l}});case 7:return m=e.sent,u=m.data,e.next=11,a.service("products").get(l);case 11:return p=e.sent,e.next=14,a.service("molds").get(pt(c,"moldId"));case 14:return f=e.sent,i({target:{name:"openCavities",value:pt(c,"openCavities")||pt(u,"0.cavities")}}),i({target:{name:"expectedProductionUM",value:p.UM}}),i({target:{name:"color",value:p.color}}),h=function(e){var t=e.cyclesData;i({target:{name:"idealCycle",value:pt(c,"idealCycle")||pt(t,"0.idealCycle")||pt(f,"idealCycle")}}),i({target:{name:"idealCycleUM",value:pt(c,"idealCycleUM")||pt(t,"0.idealCycleUM")||pt(f,"idealCycleUM")}})},e.next=21,a.service("machine_mold_products").find({query:{machineId:c.machineId,moldId:c.moldId,productId:l}});case 21:if(y=e.sent,!(g=y.data).length){e.next=27;break}h({cyclesData:g}),e.next=32;break;case 27:return e.next=29,a.service("machine_mold_products").find({query:{machineId:c.machineId,moldId:null,productId:l}});case 29:v=e.sent,(b=v.data).length?h({cyclesData:b}):h({});case 32:e.next=36;break;case 34:e.prev=34,e.t0=e.catch(4);case 36:return e.prev=36,d.loading=!1,e.finish(36);case 39:e.next=42;break;case 41:ht(["openCavities","expectedProductionUM","color","idealCycle","minCycle","maxCycle","idealCycleUM"],(function(e){i({target:{name:e,value:null}})}));case 42:case"end":return e.stop()}}),e,null,[[4,34,36,39]])})));return function(t){return e.apply(this,arguments)}}()}],[],[{text:"Cavidades Abertas",identity:"openCavities",type:"integer",readOnly:{useCustomIf:function(e){e.data;var t=Qe().session;return"N6"===pt(t,"company.level")}},show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}}},[{text:"Quantidade Prevista",identity:"expectedProduction",type:"integer",required:{useCustomIf:function(e){return 0!==e.data.isInProduction}},readOnly:{useCustomIf:function(e){e.data;var t=Qe().session;return"N6"===pt(t,"company.level")}},show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}}},{text:"UM",identity:"expectedProductionUM",variants:"short",required:{useCustomIf:function(e){return 0!==e.data.isInProduction}},readOnly:{useCustomIf:function(e){e.data;var t=Qe().session;return"N6"===pt(t,"company.level")}},show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}},model:{service:"measurement_units",query:{type:"quantity"}}}]],[{text:"Ciclo Ideal",identity:"idealCycle",type:"decimal",required:{useCustomIf:function(e){return 0!==e.data.isInProduction}},show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}},handleChange:function(e){var t=e.data,a=void 0===t?{}:t,n=e.handleChange,r=function(e){var t=e.value,a=e.factor;return Math.round(parseFloat(t,"10")*a*100)/100},i=pt(a,"target.value");i&&(n({target:{name:"minCycle",value:r({value:i,factor:.9})}}),n({target:{name:"maxCycle",value:r({value:i,factor:1.1})}}))}},{text:"Ciclo Min",identity:"minCycle",type:"decimal",show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}}},[{text:"Ciclo Max",identity:"maxCycle",type:"decimal",show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}}},{text:"UM",identity:"cycleUM",variants:"short",required:{useCustomIf:function(e){return 0!==e.data.isInProduction}},populate:["idealCycleUM","minCycleUM","maxCycleUM"],show:{useCustomIf:function(e){var t=e.data,a=void 0===t?{}:t,n=Qe().session;return"N6"===pt(n,"company.level")||!!pt(a,"moldId")&&!!pt(a,"productId")}},model:{service:"measurement_units",query:{type:"time"}}}]],[{text:"Lote",identity:"lot",type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"Cor",identity:"color",type:"string"}],[{text:"UM",identity:"idealCycleUM",variants:"short",show:{useCustomIf:function(){return!1}},model:{service:"measurement_units",query:{type:"time"}}},{text:"UM",identity:"minCycleUM",variants:"short",show:{useCustomIf:function(){return!1}},model:{service:"measurement_units",query:{type:"time"}}},{text:"UM",identity:"maxCycleUM",variants:"short",show:{useCustomIf:function(){return!1}},model:{service:"measurement_units",query:{type:"time"}}}]],Bc=lt(mt((function(e){return{container:{marginBottom:e.spacing(2)},isActive:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},navigation:{color:e.palette.common.black,padding:0}}}),{withTheme:!0})((function(e){var t=e.history,a=e.match.params,n=e.classes,i=e.machine,o=e.productionOrder,c=e.handleSubmit,s=zt(),d=s.session,l=s.permissions,m=pt(d,"company.level"),u=_t({privileges:["writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],permissions:l}),p=pt(o,"prevProductionOrder.id")||pt(i,"prevProductionOrder.id"),f={};p&&(f.component=st,f.to="/dashboard/production/".concat(a.machineId,"/order/").concat(p));var h=pt(o,"nextProductionOrder.id")||pt(i,"nextProductionOrder.id"),y={};h&&(y.component=st,y.to="/dashboard/production/".concat(a.machineId,"/order/").concat(h));var g=pt(o,"activeProductionOrder.id")||pt(i,"activeProductionOrder.id"),v={};return g&&(v.component=st,v.to="/dashboard/production/".concat(a.machineId,"/order/").concat(g)),r.a.createElement(Gt.a,{item:!0,container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center",className:n.container},u&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,{type:"submit",text:"Gravar",icon:"save",variants:"submit",onClick:c})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,Object.assign({className:n.navigation,type:"icon",text:"Ordem Anterior",icon:"arrow_back_ios",disabled:!p},f))),r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,Object.assign({className:ut(Object(ge.a)({},n.isActive,"".concat(g)==="".concat(a.productionOrderId))),text:"Ativa",icon:"center_focus_strong",disabled:!g},v))),r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,Object.assign({className:n.navigation,type:"icon",text:"Pr\xf3xima Ordem",icon:"arrow_forward_ios",disabled:!h},y))),u&&pt(o,"uuid")&&"N1"===m&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,{text:"Criar Nova",icon:"add",component:st,to:"/dashboard/production/".concat(a.machineId,"/order/new")})),u&&pt(o,"uuid")&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(co,{text:"Criar como Copia",icon:"file_copy",onClick:function(){var e=Object(be.a)({},o);delete e.id,delete e.uuid,delete e.totalProduction,delete e.confirmedProduction,delete e.wastedProduction,delete e.actualStartDate,delete e.actualEndDate,localStorage.setItem("copy-production-order",JSON.stringify(Object(be.a)({},e))),t.push("/dashboard/production/".concat(a.machineId,"/order/new"))}})))}))),Hc=a(355),Vc=a.n(Hc),Jc=mt((function(e){return{label:{padding:"0 ".concat(e.spacing(.5),"px")},details:{display:"block",padding:e.spacing(2)},item:{display:"flex",alignItems:"center",width:"100%",borderBottom:"1px solid ".concat(e.palette.secondary.form)},turnName:{fontStyle:"italic"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.index,i=e.isFirst,o=e.hasEditAccess,s=e.history,d=e.typesMap,l=e.event,m=e.reload,u=Object(n.useContext)(Je),p=Object(n.useState)({}),h=Object(c.a)(p,2),y=h[0],g=h[1],v=Object(n.useState)(),b=Object(c.a)(v,2),E=b[0],x=b[1],O=function(){return x((function(e){return!e}))},w=function(e){var t=e.type;return pt(u.get("config.productionOrder.eventType.".concat(t)),"value")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0,style:{backgroundColor:Pt({data:u.get("actionType.".concat(pt(d,"".concat(l.ev,".productionOrderActionTypeId")))),path:"color"})||Pt({data:u.get("actionType.".concat(pt(u.get("config.productionOrder.eventType.undefined"),"value"))),path:"color"})}}),r.a.createElement(Gt.a,{item:!0,className:t.item},!E&&r.a.createElement(ya.a,{variant:"body1"},"".concat(pt(d,"".concat(l.ev,".name"))||pt(u.get("actionType.".concat(pt(u.get("config.productionOrder.eventType.undefined"),"value"))),"name"))),E&&r.a.createElement(eo,{field:{text:"Evento",identity:"ev",model:{service:"production_order_event_types",query:{productionOrderActionTypeId:{$in:["".concat(w({type:"setup"})),"".concat(w({type:"scheduledStop"})),"".concat(w({type:"noScheduledStop"})),"".concat(w({type:"noWorkDay"}))]}}}},formItem:Object(be.a)({},y),handleChange:function(e){e.identity;return function(e){var t=e.target,a=t.value;a&&-1!==a&&g((function(e){return Object(be.a)({},e,Object(ge.a)({},t.name,a))}))}}({identity:"ev"})}),o&&pt(s,"_id")&&!i&&-1!==["".concat(w({type:"noJustified"})),"".concat(w({type:"setup"})),"".concat(w({type:"scheduledStop"})),"".concat(w({type:"noScheduledStop"})),"".concat(w({type:"noWorkDay"})),"".concat(w({type:"undefined"})),"".concat(-1)].indexOf("".concat(l.at))&&r.a.createElement(r.a.Fragment,null,!E&&r.a.createElement(co,{type:"icon",text:"Editar",icon:"edit_icon",variants:"editAction",onClick:O}),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(co,{type:"icon",text:"Gravar",icon:"save",variants:"editAction",onClick:function(){y.ev&&pt(s,"_id")&&(u.service("production_order_history").patch(pt(s,"_id"),{$editEvent:{index:a,ev:y.ev,at:pt(d,"".concat(y.ev,".productionOrderActionTypeId"))}}),l.ev=y.ev,x(!1),m&&m())}}),r.a.createElement(co,{type:"icon",text:"Cancelar",icon:"close",variants:"editAction",onClick:O}))),r.a.createElement("div",{style:{flex:"1"}}),parseInt(l.tr,"10")>0&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},r.a.createElement(or.a,{value:"".concat(l.tr),displayType:"text",thousandSeparator:".",decimalSeparator:","})," ","ciclos |"),l.userName&&r.a.createElement(ya.a,{className:t.label,variant:"body1"},l.userName," |"),r.a.createElement(ya.a,{className:t.label,variant:"body1"},"".concat(f()(-1===l.ed?f()():l.ed).format("DD/MM/YYYY HH:mm")))))})),Qc=mt((function(e){return{container:{flexWrap:"nowrap"},header:{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px"),backgroundColor:e.palette.primary.form,"&>div":{margin:"0px !important"}},wrapper:{justifyContent:"center",flexWrap:"nowrap"},production:{flexDirection:"column",flexWrap:"nowrap"},status:{minWidth:40,minHeight:40,width:40,height:40,borderRadius:"50%",flexWrap:"nowrap",justifyContent:"center",color:e.palette.common.white,padding:"0 ".concat(e.spacing(1),"px !important"),fontSize:".65rem"},divider:{width:"100%",border:"1px solid ".concat(e.palette.common.white)},eventDetail:{flexWrap:"nowrap"},label:{padding:"0 ".concat(e.spacing(.5),"px")},details:{display:"block",padding:e.spacing(2)},item:{display:"flex",alignItems:"center",width:"100%",borderBottom:"1px solid ".concat(e.palette.primary.form)},panel:{"& > div:nth-child(2)":{margin:"0 ".concat(e.spacing(2),"px")}},turnName:{fontStyle:"italic"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.productionOrder,i=e.formItem,o=zt().session,s=pt(o,"company.level"),d=Object(n.useContext)(Je),l=Object(n.useState)(),m=Object(c.a)(l,2),u=m[0],p=m[1],h=Object(n.useState)(),y=Object(c.a)(h,2),g=y[0],v=y[1],b=Object(n.useState)([]),E=Object(c.a)(b,2),x=E[0],O=E[1],w=Object(n.useState)({}),j=Object(c.a)(w,2),k=j[0],N=j[1],S=Object(n.useState)(),I=Object(c.a)(S,2),C=I[0],A=I[1],D=Object(n.useState)(),T=Object(c.a)(D,2),P=T[0],M=T[1],F=Object(n.useState)(0),q=Object(c.a)(F,2),R=q[0],_=q[1],U=Object(n.useState)([]),W=Object(c.a)(U,2),L=W[0],z=W[1],Y=Object(n.useState)(),B=Object(c.a)(Y,2),H=B[0],V=B[1],J=JSON.stringify(a);Object(n.useEffect)((function(){v(Rt({data:JSON.parse(J)}).toFixed(1))}),[J]),Object(n.useEffect)((function(){var e=JSON.parse(J);C&&function(){var t=Object(Ne.a)(ke.a.mark((function t(){var a,n,r,i;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=17;break}return M(!0),t.next=4,d.service("production_order_event_types").find();case 4:return a=t.sent,n=a.data,r={},ht(n,(function(e){return r[e.id]=e})),N(r),t.t0=pt,t.next=12,d.service("production_order_history").find({query:{poi:e.id,$populateUsers:!0}});case 12:t.t1=t.sent,i=(0,t.t0)(t.t1,"data.0"),e.id!==u&&(p(e.id),z([]),_(0)),i?(O(i.ev.reverse()),V(i)):O([]),M(!1);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[d,J,C]),Object(n.useEffect)((function(){x.length>50*R&&z((function(e){return[].concat(Object(ve.a)(e),Object(ve.a)(x.slice(50*R,50*(R+1))))}))}),[x.length,R]);var Q=pt(d.get("actionType.".concat(pt(d.get("config.productionOrder.eventType.undefined"),"value"))),"name"),$=pt(a,"confirmedProduction")||pt(a,"totalProduction"),G=parseInt(pt(a,"expectedProduction"),"10")-parseInt($,"10")||Q,X=f()(),Z=(parseInt(i.expectedProduction,"10")-(parseInt(i.totalProduction,"10")||0)||0)/(60/(parseFloat(i.idealCycle,"10")||1)*(parseInt(i.openCavities,"10")||1));X.add(Z||0,"m");var K=zt().permissions,ee=_t({privileges:["editProductionOrderEvents"],permissions:K});return(pt(a,"isActive")||pt(a,"isClosed"))&&r.a.createElement(Gt.a,{item:!0,className:t.container},r.a.createElement(nn.a,{className:t.panel,expanded:C,onChange:function(){return A((function(e){return!e}))}},r.a.createElement(rn.a,{className:t.header,expandIcon:r.a.createElement(Ba.a,null)},r.a.createElement(Gt.a,{container:!0,spacing:2},r.a.createElement(Gt.a,{item:!0,container:!0,alignItems:"center",spacing:2,className:t.wrapper},r.a.createElement(Gt.a,{item:!0,container:!0,direction:"column",alignItems:"center",spacing:0,className:t.status,style:{backgroundColor:Pt({data:a,path:"mostRecentEvent.0.productionOrderEventType.production_order_action_type.color"})}},r.a.createElement("span",null,g),r.a.createElement("div",{className:t.divider}),r.a.createElement("span",null,a.idealCycle)),r.a.createElement(Gt.a,{item:!0},r.a.createElement(ya.a,{variant:"body1"},"".concat(pt(a,"mostRecentEvent.0.productionOrderEventType.name")," - ").concat(f()(-1===pt(a,"mostRecentEvent.0.ed")?f()():pt(a,"mostRecentEvent.0.ed")).format("DD/MM/YYYY HH:mm"))))),r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2,alignItems:"center",className:t.production},"N1"===s&&pt(a,"production_order_type.isInProduction")&&(G<0||G===Q)&&r.a.createElement(ya.a,{variant:"body2",noWrap:!0},"PRODU\xc7\xc3O ESPERADA EXCEDIDA"),"N1"===s&&pt(a,"production_order_type.isInProduction")&&r.a.createElement(ya.a,{variant:"body2",noWrap:!0},"PROG:"," ",r.a.createElement(or.a,{value:"".concat(pt(a,"expectedProduction")),displayType:"text",thousandSeparator:".",decimalSeparator:","})," ","/ CONFIRM:"," ",r.a.createElement(or.a,{value:$,displayType:"text",thousandSeparator:".",decimalSeparator:","})," ","/ FALTA:"," ",r.a.createElement(or.a,{value:G,displayType:"text",thousandSeparator:".",decimalSeparator:","})),r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"DATA INICIO:"," ",f()(pt(a,"actualStartDate")).format("ddd, DD [de] MMM [de] YYYY HH:mm")),pt(a,"isActive")&&pt(a,"production_order_type.isInProduction")&&"N1"===s&&r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"DATA FIM PREVISTA:"," ",f()(X).format("ddd, DD [de] MMM [de] YYYY HH:mm")),pt(a,"isClosed")&&r.a.createElement(ya.a,{color:"textSecondary",noWrap:!0},"DATA FIM:"," ",f()(pt(a,"actualEndDate")).format("ddd, DD [de] MMM [de] YYYY HH:mm"))))),r.a.createElement("div",{style:{width:"100%",height:500,overflow:"overlay"}},r.a.createElement(on.a,{className:t.details},P&&r.a.createElement(ro,null),!P&&L.length>0&&r.a.createElement(Vc.a,{disableHeight:!0,style:{width:"100%"}},(function(e){var a=e.width;return r.a.createElement("div",{width:a,rowHeight:60},ft(L,(function(e,a){var n=x[a+1];return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(Gt.a,{container:!0,alignItems:"center",spacing:2,className:t.eventDetail},r.a.createElement(Jc,{index:x.length-1-a,isFirst:0===a,hasEditAccess:ee,history:H,typesMap:k,event:e})),(!n||n&&"".concat(n.tu||-1)!=="".concat(e.tu||-1))&&r.a.createElement(Gt.a,{key:a,container:!0,alignItems:"center",spacing:2,className:t.eventDetail},r.a.createElement(Gt.a,{item:!0,className:t.item},r.a.createElement(ya.a,{className:t.turnName,variant:"body1",style:{flex:"1"}},e.tu?"Inicio de turno ".concat(e.turnName):"Sem turno"))))})),x.length>L.length&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(co,{text:"Mostrar mais",onClick:function(){return _((function(e){return e+1}))}})))}))))))})),$c=mt((function(e){return{fullWidth:{flex:1},title:{flex:1},card:{height:40,display:"flex",padding:e.spacing(1)},wrapper:{alignContent:"center"},avatar:{width:e.spacing(4),maxHeight:e.spacing(4),marginRight:e.spacing(1),color:e.palette.primary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.field,n=e.selectedItem,i=e.formItem,o=e.formErrors,c=e.formReadOnly,s=e.handleChange,d=e.query,l=void 0===d?{}:d,m=e.options,u=void 0===m?{}:m,p=e.customContent,f=void 0===p?{}:p;return r.a.createElement(r.a.Fragment,null,!n&&i&&r.a.createElement(Gt.a,{item:!0,className:t.fullWidth},r.a.createElement(eo,{field:a,formItem:i,formErrors:o,formReadOnly:c,query:l,options:u,handleChange:s})),n&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(Gt.a,{container:!0,spacing:1,alignItems:"center"},r.a.createElement(Gt.a,{item:!0,className:t.fullWidth},r.a.createElement(Ia.a,{className:t.card},r.a.createElement(Gt.a,{container:!0,alignItems:"center",className:t.wrapper},n.image&&r.a.createElement(Kt.a,{alt:n.name,src:n.image,className:t.avatar}),!n.image&&a.icon&&"svg"===a.icon.type&&r.a.createElement("img",{className:t.avatar,alt:"icon",src:a.icon.src}),!n.image&&a.icon&&!a.icon.type&&r.a.createElement(ia.a,{className:t.avatar},a.icon),r.a.createElement(ya.a,{variant:"body1",className:t.title},n.identity," - ",n.name),i&&!u.readOnly&&!u.dontDelete&&r.a.createElement(co,{type:"icon",text:"Deletar",icon:"close",variants:"deleteAction",onClick:function(){return s({target:{name:a.identity,value:null}})}})))),f.afterSelected&&f.afterSelected())))})),Gc=function(e){var t=e.productionOrder,a=e.machineId,r=e.history,i=Qe().session,o=pt(i,"company.level"),s=Object(n.useContext)(Je),d=Object(n.useState)(),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useState)(),f=Object(c.a)(p,2),h=f[0],y=f[1],g=Yt({model:"production_orders",data:t,hooks:{afterChange:function(){var e=Object(Ne.a)(ke.a.mark((function e(a){var n,r,i,o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("machineId"!==(n=a.data).name){e.next=20;break}return e.prev=2,e.next=5,s.service("machines").get(n.value);case 5:return r=e.sent,u(r),e.next=9,s.service("sensors").find({query:{machineId:n.value}});case 9:i=e.sent,o=i.data,y(o[0]),E({target:{name:"sensorId",value:pt(o,"0.id")}}),E({target:{name:"plantId",value:pt(t,"uuid")&&t.plantId||r.plantId}}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),u(),y();case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),beforeSubmit:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,c,d;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.data,(n=void 0===a?{}:a).productionOrderTypeId){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,s.service("production_order_types").get(n.productionOrderTypeId);case 5:if(!e.sent.isInProduction){e.next=23;break}if(r=!0,n.moldId||(O({identity:"moldId",value:!0}),r=!1),n.productId||"N1"!==o||(O({identity:"productId",value:!0}),r=!1),i=parseInt(n.openCavities,"10")||0,c=parseInt(n.expectedProduction,"10")||0,n.expectedProductionUM||"N1"!==o||(O({identity:"expectedProductionUM",value:!0}),r=!1),(!n.idealCycle||parseFloat(n.idealCycle)<=0)&&(O({identity:"idealCycle",value:!0}),r=!1),n.cycleUM||(O({identity:"cycleUM",value:!0}),r=!1),(!c||c<=0)&&"N1"===o&&(O({identity:"expectedProduction",value:"Digite a quantidade prevista."}),r=!1),(!i||i<=0)&&"N1"===o&&(O({identity:"openCavities",value:"Digite o n\xfamero de cavidades."}),r=!1),!n.moldId){e.next=22;break}return e.next=20,s.service("molds").get(n.moldId);case 20:d=e.sent,i>parseInt(d.cavities,"10")&&"N1"===o&&(O({identity:"openCavities",value:"Cavidades do molde excedidas."}),r=!1);case 22:return e.abrupt("return",r);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),afterSubmit:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,r.push("/dashboard/production/".concat(a,"/order/").concat(n.id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fields:Yc}),v=g.formItem,b=g.formErrors,E=g.handleChange,x=g.handleSubmit,O=g.handleFormErrors,w=g.loading,j=g.errors,k=localStorage.getItem("copy-production-order"),N=JSON.stringify(JSON.parse(k||"{}"));Object(n.useEffect)((function(){var e=JSON.parse(N);localStorage.removeItem("copy-production-order"),Object.keys(e).length>0&&setTimeout((function(){return ft(St(Yc),(function(t){var a=pt(e,t.identity);"N1"!==o&&-1!==["openCavities","expectedProduction","expectedProductionUM"].indexOf(t.identity)||a&&E({target:{name:t.identity,value:a},field:t})}))}),0)}),[N,E]);var S=JSON.stringify(t||{});return Object(n.useEffect)((function(){var e=JSON.parse(S);E({target:{name:"machineId",value:pt(e,"machineId")||a}})}),[S,a,E]),{selectedMachine:m,selectedSensor:h,formItem:v,formErrors:b,handleChange:E,handleSubmit:x,loading:w,errors:j}},Xc=a(689),Zc=mt((function(e){return{container:{height:" calc(100% - 70px)",overflow:"overlay",minHeight:"300px"},sidebar:Object(ge.a)({display:"flex",flexDirection:"column",flexWrap:"nowrap",width:"300px",right:"0px",margin:-e.spacing(3),marginLeft:e.spacing(3)},e.breakpoints.down("xs"),{margin:-e.spacing(1),marginLeft:e.spacing(1)}),drawer:Object(ge.a)({},e.breakpoints.up("md"),{"&>div":{width:300}}),toolbar:{backgroundColor:e.palette.primary.main,"& span,& p":{color:e.palette.common.white}},list:{padding:0},item:{cursor:"pointer","& span,& p":{color:e.palette.common.white}},itemIcon:{marginRight:0}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.side,i=e.open,o=e.variant,s=e.productionOrder,d=e.eventTypes,l=e.loading,m=e.reload,u=e.handleDrawer,p=void 0===u?function(){}:u,h=Object(n.useContext)(Je),y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(),x=Object(c.a)(E,2),O=x[0],w=x[1],j=function(e){var t=e.id;return Object(Ne.a)(ke.a.mark((function e(){var a,n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(),w(!0),pt(s,"isActive")){e.next=10;break}return e.next=5,h.service("production_orders").find({query:{machineId:pt(s,"machineId"),isActive:!0}});case 5:if(a=e.sent,!a.data.length){e.next=10;break}return w(!1),e.abrupt("return",b("Existe uma Ordem de Produ\xe7\xe3o j\xe1 ativa. Por favor, feche-a antes de abrir uma nova."));case 10:if(!pt(s,"moldId")||pt(s,"isActive")){e.next=18;break}return e.next=13,h.service("production_orders").find({query:{moldId:pt(s,"moldId"),isActive:!0}});case 13:if(n=e.sent,!n.data.length){e.next=18;break}return w(!1),e.abrupt("return",b("Existe uma Ordem de Produ\xe7\xe3o para o Molde selecionado j\xe1 ativa. Por favor, feche-a antes de abrir uma nova."));case 18:return e.prev=18,e.next=21,h.service("production_order_events").create({productionOrderId:s.id,startDate:f()().toISOString(),endDate:-1,productionOrderEventTypeId:t});case 21:m(),p(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(18),b(e.t0.message);case 28:return e.prev=28,w(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[18,25,28,31]])})))},k=yt(d,(function(e){return null===pt(e,"production_order_action_type.isSystemEvent")})),N=pt(h.get("config.productionOrder.status.designed"),"value"),S="".concat(pt(s,"productionOrderStatusId"))==="".concat(N),I=r.a.createElement(r.a.Fragment,null,r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement(ra.a,{mdUp:!0},r.a.createElement(ta.a,{onClick:p,style:{marginRight:"15px"}},r.a.createElement(ia.a,null,"keyboard_arrow_down"))),r.a.createElement("div",null,S&&r.a.createElement(ya.a,{variant:"body1"},"Libere a Ordem de Produ\xe7\xe3o para mostrar Eventos."),!S&&r.a.createElement(ya.a,{variant:"body1"},pt(s,"isActive")?"Reportar Evento":"Iniciar Ordem de Produ\xe7\xe3o"))),r.a.createElement(va.a,null),r.a.createElement("div",{className:t.container},r.a.createElement("div",{hideTracksWhenNotNeeded:!0,style:{width:"100%",minHeight:"300px",overflow:"overlay"}},v&&r.a.createElement(io,{errors:v}),(l||O)&&r.a.createElement(ro,null),r.a.createElement(ga.a,{className:t.list},!S&&!l&&ft(k,(function(e,a){var n=e.id,i=e.name,o=e.icon;return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(ba.a,{className:t.item,onClick:j({id:n}),style:{backgroundColor:Pt({data:k,path:"".concat(a,".production_order_action_type.color")})}},r.a.createElement(Fa.a,null,r.a.createElement(ia.a,null,kt(o))),r.a.createElement(Ea.a,{primary:r.a.createElement(ya.a,null,i)})),r.a.createElement(va.a,null))}))))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{smDown:!0},r.a.createElement("div",{className:t.sidebar},I)),r.a.createElement(ra.a,{mdUp:!0},r.a.createElement(Xc.a,{open:i,anchor:a,variant:o,className:t.drawer},I)))})),Kc=lt(mt((function(e){return{container:Object(ge.a)({flexWrap:"nowrap",overflow:"hidden",maxHeight:"100%"},e.breakpoints.down("sm"),{flexDirection:"column",padding:"6px"}),wrapper:{flex:1,flexWrap:"nowrap",overflowY:"auto",overflowX:"hidden"},grid:{flex:1,flexWrap:"nowrap"},formContainer:{overflowX:"hidden","&>div":{flexWrap:"nowrap"}},message:{flex:1},events:Object(ge.a)({flex:1,flexWrap:"nowrap"},e.breakpoints.down("sm"),{overflowY:"auto",minHeight:200}),isClosed:{color:e.palette.primary.delete,textAlign:"center",textTransform:"uppercase"},fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),backgroundColor:e.palette.secondary.main,zIndex:99},content:Object(ge.a)({display:"flex",overflowY:"auto",margin:-e.spacing(3),padding:e.spacing(3)},e.breakpoints.down("xs"),{margin:-e.spacing(1),padding:e.spacing(1)}),breadCrumbs:Object(ge.a)({},e.breakpoints.up("sm"),{marginTop:"20px",paddingLeft:"16px"}),inputWrapper:{display:"flex"},deviceURL:{textDecoration:"underline",cursor:"pointer"}}}),{withTheme:!0})((function(e){var t=e.history,a=e.match.params,i=e.classes,o=zt(),s=o.session,d=o.permissions,l=pt(s,"company.level"),m=Object(n.useContext)(Je),u=Vt({model:"production_orders",id:a.productionOrderId,query:{$eventsAndNavigation:!0}}),p=u.item,f=u.loading,h=u.errors,y=u.reload,g=Object(n.useState)({}),v=Object(c.a)(g,2),b=v[0],E=v[1],x=Object(n.useState)(!1),O=Object(c.a)(x,2),w=O[0],j=O[1],k=function(){j((function(e){return!e}))};Object(n.useEffect)((function(){var e=wt((function(){return y()}),300),t=function(t){"".concat(t.id)==="".concat(a.productionOrderId)&&e()};return m.service("production_orders").on("patched",t),function(){return m.service("production_orders").removeListener("patched",t)}}),[m,a.productionOrderId,y]);var N=Gc({productionOrder:p,machineId:a.machineId,history:t}),S=N.selectedMachine,I=N.selectedSensor,C=N.formItem,A=N.formErrors,D=N.handleChange,T=N.handleSubmit,P=N.loading,M=N.errors;Object(n.useEffect)((function(){var e=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.service("machines").get(a.machineId,{query:{$eventsAndNavigation:!0}});case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"new"===a.productionOrderId&&e()}),[m,a.machineId,a.productionOrderId]);var F=h||M,q=f||P,R=_t({privileges:["writeActiveProductionOrders","writeScheduledStopProductionOrders"],permissions:d}),_=_t({privileges:["writeActiveProductionOrders"],permissions:d}),U=_t({privileges:["writeScheduledStopProductionOrders"],permissions:d}),W=_t({privileges:["writeProductionOrderEvents"],permissions:d}),L={};return _&&U?L={}:_?L.isInProduction=!0:U&&(L.isInProduction=!1),r.a.createElement("div",{className:i.content},r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:0,className:i.grid},r.a.createElement(Gt.a,{item:!0},r.a.createElement(no,{links:[{text:"Produ\xe7\xe3o",href:"/dashboard/production"},{text:"".concat(S?"".concat(pt(S,"identity")," - ").concat(pt(S,"name"),": "):"").concat(p?"Order ".concat(p.id):"Nova Ordem de Produ\xe7\xe3o"),href:"/dashboard/production/".concat(a.machineId,"/order/").concat(a.productionOrderId)}]})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(Bc,{machine:b,productionOrder:p,handleSubmit:function(e){e.preventDefault(),q||T(e)}})),r.a.createElement(Gt.a,{item:!0,className:i.wrapper},r.a.createElement(Gt.a,{container:!0,direction:"column",className:i.formContainer,spacing:0},pt(p,"uuid")&&r.a.createElement(ra.a,{mdUp:!0},r.a.createElement(Tn.a,{variant:"extended","aria-label":"Delete",className:i.fab,onClick:k},r.a.createElement(ia.a,null,"keyboard_arrow_up"),pt(p,"isActive")?"Reportar Evento":"Iniciar Ordem")),q&&r.a.createElement(ro,null),F&&r.a.createElement(io,{errors:F}),r.a.createElement(Gt.a,{item:!0,container:!0,className:i.container,spacing:2},r.a.createElement(Gt.a,{item:!0,container:!0,direction:"column",spacing:2},pt(p,"isClosed")&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(ya.a,{className:i.isClosed,variant:"body1"},"Ordem Encerrada")),(pt(p,"isActive")||pt(p,"isClosed"))&&r.a.createElement(Qc,{productionOrder:p,formItem:C}),r.a.createElement(Gt.a,{item:!0,className:i.inputWrapper},r.a.createElement(eo,{field:Yc[0],formItem:C,formErrors:A,handleChange:D,query:L,options:{readOnly:!R},loading:f})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(to,{fields:Yc.slice(1,2),formItem:C,formErrors:A,handleChange:D,options:{readOnly:!R&&!W},loading:f})),r.a.createElement($c,{field:Yc[2],formItem:C,selectedItem:S,formErrors:A,handleChange:D,options:{dontDelete:!!pt(p,"uuid"),readOnly:!R},customContent:{afterSelected:function(){if(!I)return r.a.createElement(Gt.a,{item:!0,className:i.message},r.a.createElement(ya.a,{variant:"body1"},"Nenhum leitor registrado para esta m\xe1quina."));var e="".concat(S.identity," - ").concat(S.name),t="http://".concat(I.ip,":3030/?name=").concat(window.escape(e));return r.a.createElement("div",{className:i.deviceURL,onClick:function(){return window.open(t,e,"width=650,height=350,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no,directories=no,status=no")}},r.a.createElement($c,{field:{icon:"memory"},selectedItem:I}))}}}),r.a.createElement(Gt.a,{item:!0,className:i.inputWrapper},r.a.createElement(to,{fields:Yc[3],formItem:C,formErrors:A,handleChange:D,options:{dontDelete:!!pt(p,"uuid"),readOnly:!R}})),"N1"===l&&r.a.createElement(Gt.a,{item:!0,className:i.inputWrapper},r.a.createElement(to,{fields:Yc[4],formItem:C,formErrors:A,handleChange:D,options:{dontDelete:!!pt(p,"uuid"),readOnly:!R}})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(to,{fields:Yc.slice(6,8),formItem:C,formErrors:A,handleChange:D,options:{readOnly:!R&&!W||!!pt(p,"isClosed")}})),r.a.createElement(Gt.a,{item:!0},r.a.createElement(to,{fields:Yc.slice(8,9),formItem:C,handleChange:D,options:{readOnly:!R||!!pt(p,"isClosed")}}))))))),W&&pt(p,"uuid")&&r.a.createElement(Zc,{handleDrawer:k,open:w,side:"bottom",variant:"temporary",productionOrder:p,eventTypes:pt(p,"eventTypes"),loading:f,reload:y}))}))),es=mt((function(e){return{body:{"& td":{padding:e.spacing(1),"& p,& a span":{fontSize:".75rem"}}},wrapper:{display:"flex",alignItems:"center"},expanded:{transform:"rotate(180deg)"},icon:{margin:"0 ".concat(e.spacing(1),"px")},group:{cursor:"pointer",backgroundColor:e.palette.primary.table}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.header,i=e.item,o=void 0===i?{}:i,s=e.groupBy,d=void 0===s?{}:s,l=e.historyBy,m=zt().permissions,u=Object(n.useContext)(Je),p=Object(n.useState)({}),h=Object(c.a)(p,2),y=h[0],g=h[1],v=Object(n.useState)(!0),b=Object(c.a)(v,2),E=b[0],x=b[1],O=JSON.stringify(o);Object(n.useEffect)((function(){g(JSON.parse(O)||{})}),[O]);var w=Object(n.useState)({}),j=Object(c.a)(w,2),k=j[0],N=j[1],S=Object(n.useState)(),I=Object(c.a)(S,2),C=I[0],A=I[1],D=parseFloat(pt(o,"poi.product.weight"))||0,T=function(e){var t=e.identity;return function(e){var a=e.target,n=a.value;if(o.setFormErrors=N,g((function(e){return Object(be.a)({},e,Object(ge.a)({},a.name,n))})),"cp"===t){var r=Math.round(D*n*100/1e3)/100;g((function(e){return Object(be.a)({},e,{cpw:r})})),o.cp=n,o.cpw=r;var i=(parseInt(pt(o,"tp"),"10")||0)-n;i=i>0?i:0,g((function(e){return Object(be.a)({},e,{wp:i})}));var c=Math.round(D*i*100/1e3)/100;g((function(e){return Object(be.a)({},e,{wpw:c})})),o.wp=i,o.wpw=c}if("cpw"===t){var s=Math.round(1e3*n/D);g((function(e){return Object(be.a)({},e,{cp:s})})),o.cp=s,o.cpw=n;var d=(parseInt(pt(o,"tp"),"10")||0)-s;d=d>0?d:0,g((function(e){return Object(be.a)({},e,{wp:d})}));var l=Math.round(D*d*100/1e3)/100;g((function(e){return Object(be.a)({},e,{wpw:l})})),o.wp=d,o.wpw=l}if("wp"===t){var m=Math.round(D*n*100/1e3)/100;g((function(e){return Object(be.a)({},e,{wpw:m})})),o.wp=n,o.wpw=m;var u=(parseInt(pt(o,"tp"),"10")||0)-n;u=u>0?u:0,g((function(e){return Object(be.a)({},e,{cp:u})}));var p=Math.round(D*u*100/1e3)/100;g((function(e){return Object(be.a)({},e,{cpw:p})})),o.cp=u,o.cpw=p}if("wpw"===t){var f=Math.round(1e3*n/D);g((function(e){return Object(be.a)({},e,{wp:f})})),o.wp=f,o.wpw=n;var h=(parseInt(pt(o,"tp"),"10")||0)-f;h=h>0?h:0,g((function(e){return Object(be.a)({},e,{cp:h})}));var y=Math.round(D*h*100/1e3)/100;g((function(e){return Object(be.a)({},e,{cpw:y})})),o.cp=h,o.cpw=y}"wji"===t&&(o.wji=n)}},P=function(){return A((function(e){return!e}))},M=function(){u.service("production_order_waste").patch(o._id,{cp:y.cp,wp:y.wp,wji:y.wji}),A(!1)},F=function(){u.service("production_order_waste").remove(o._id),x(!1)},q=_t({privileges:["editPendingWaste"],permissions:m});return E&&r.a.createElement(Ln.a,{className:ut([t.body,Object(ge.a)({},t.group,d.enabled)])},d.enabled&&r.a.createElement(zn.a,{style:{whiteSpace:"nowrap"},colSpan:d.colspan,onClick:d.handleGroupExpand&&d.handleGroupExpand({id:d.expandId})},r.a.createElement("div",{className:t.wrapper},d.expandId&&r.a.createElement(ia.a,{className:ut(t.icon,Object(ge.a)({},t.expanded,d.expanded))},"expand_more_icon"),r.a.createElement(ya.a,{variant:"body1"},d.text))),ft(a,(function(e,t){var a=e.text,n=e.path,i=e.readOnly,c=e.alt,s=e.type,m=e.input,u=e.model;return!d.enabled&&r.a.createElement(zn.a,{key:t,style:{whiteSpace:"nowrap"}},u&&r.a.createElement(eo,{field:{text:a,identity:n,model:u},formItem:Object(be.a)({},y),formErrors:k,handleChange:T({identity:n}),options:{readOnly:"history"===l&&!C||"history"!==l&&!pt(o,"plant.wasteJustification"),disabled:"history"===l&&!C||"history"!==l&&!pt(o,"plant.wasteJustification")}}),("history"===l&&C||"history"!==l)&&m&&!u&&r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(eo,{field:{text:a,identity:n,type:s},formItem:y,formErrors:k,handleChange:T({identity:n}),options:{readOnly:pt(o,"plant.qualityTrackType")===i&&!C,disabled:pt(o,"plant.qualityTrackType")===i&&!C}}),-1!==[7,9].indexOf(t)&&"history"!==l&&pt(o,"plant.qualityTrackType")===i&&r.a.createElement(r.a.Fragment,null,!C&&r.a.createElement(co,{type:"icon",text:"Editar",icon:"edit_icon",variants:"editAction",onClick:P}),C&&r.a.createElement(co,{type:"icon",text:"Cancelar",icon:"close",variants:"editAction",onClick:P}))),(!m&&!u||"history"===l&&m&&!u&&!C)&&r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ya.a,{variant:"body1"},"datetime"===s?pt(o,n)?f()(pt(o,n)).format("DD/MM/YYYY HH:mm"):c:"integer"===s?Et(pt(o,n))?c:r.a.createElement(or.a,{value:pt(o,n),displayType:"text",thousandSeparator:".",decimalSeparator:","}):Et(pt(o,n))?c:pt(o,n)),12===t&&"history"===l&&r.a.createElement(r.a.Fragment,null,q&&!C&&r.a.createElement(co,{type:"icon",text:"Editar",icon:"edit_icon",variants:"editAction",onClick:P}),C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(co,{type:"icon",text:"Gravar",icon:"save",variants:"editAction",onClick:M}),r.a.createElement(co,{type:"icon",text:"Deletar",icon:"delete_icon",variants:"deleteAction",onClick:F}),r.a.createElement(co,{type:"icon",text:"Cancelar",icon:"close",variants:"editAction",onClick:P})))))})))})),ts=mt((function(e){return{filter:Object(ge.a)({color:e.palette.common.black,display:"flex",alignItems:"center",margin:e.spacing(1),borderRadius:50,padding:4},e.breakpoints.down("xs"),{margin:3,padding:2}),arrow:{padding:0}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.date,i=e.setDate,o=void 0===i?function(){}:i,s=e.maxDate,d=e.minDate,l=e.isEndDate,m=function(e){o(l?f()(e).subtract(1,"day").endOf("day").add(6,"hours"):f()(e).startOf("day").add(6,"hours"))},u=Object(n.useState)(!1),p=Object(c.a)(u,2),h=p[0],y=p[1];return r.a.createElement("div",{className:t.filter},r.a.createElement(ta.a,{color:"primary",className:t.arrow,onClick:function(){(!d||d&&!f()(a).subtract(1,"day").isSame(d,"day"))&&m(f()(a).subtract(1,"day"))}},r.a.createElement(ia.a,null,"arrow_back_ios")),r.a.createElement(aa.a,{size:"small",onClick:function(){return y(!0)},color:"primary"},a.format("ddd, DD [de] MMM HH:mm")),r.a.createElement(ta.a,{color:"primary",className:t.arrow,onClick:function(){console.log("!!!max"),(!s||s&&!f()(a).add(1,"day").isAfter(s,"day"))&&m(f()(a).add(1,"day"))}},r.a.createElement(ia.a,null,"arrow_forward_ios")),r.a.createElement("div",{hidden:!0},r.a.createElement(er.a,{format:"DD/MM/YYYY HH:mm",locale:"pt",cancelLabel:"CANCELAR",autoOk:!0,value:a,minDate:d,maxDate:s,onChange:m,open:h,onOpen:function(){return y(!0)},onClose:function(){return y(!1)}})))})),as=a(616),ns=mt((function(e){return{filter:Object(ge.a)({backgroundColor:"rgba(255, 255, 255, .15)",display:"flex",alignItems:"center",margin:e.spacing(1),borderRadius:50},e.breakpoints.down("xs"),{margin:3,padding:2}),item:{textTransform:"uppercase"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.filter,i=e.setFilter,o=e.identity,s=e.options,d=Object(n.useState)(!1),l=Object(c.a)(d,2),m=l[0],u=l[1],p=Object(n.useRef)(null),f=function(e){p.current.contains(e.target)||u(!1)},h=function(e){var t=e.key;return function(){i(t),u(!1)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.filter},r.a.createElement(aa.a,{buttonRef:function(e){p.current=e},"aria-owns":m?o:void 0,"aria-haspopup":"true",onClick:function(){u((function(e){return!e}))}},r.a.createElement("span",null,s[a]))),r.a.createElement(ua.a,{open:m,anchorEl:p.current,transition:!0,disablePortal:!0},(function(e){var n=e.TransitionProps,i=e.placement;return r.a.createElement(pa.a,Object.assign({},n,{id:o,style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),r.a.createElement(fa.a,null,r.a.createElement(ha.a,{onClickAway:f},r.a.createElement(as.a,null,ft(s,(function(e,n){return r.a.createElement(Hn.a,{className:t.item,key:n,onClick:h({key:n})},e,a===n&&r.a.createElement(ia.a,null,"done"))}))))))})))})),rs=mt((function(e){return{title:{fontSize:"1rem"},label:{padding:"0 ".concat(e.spacing(1),"px"),fontSize:"1rem"},container:{height:"100%",flexWrap:"nowrap",overflow:"visible"},wrapper:Object(ge.a)({position:"relative",overflow:"auto",flex:1,top:e.spacing(1),width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3)},e.breakpoints.down("xs"),{top:0,margin:-e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),header:Object(ge.a)({"& th":{padding:"0 ".concat(e.spacing(1),"px"),textTransform:"uppercase",backgroundColor:e.palette.primary.main,color:e.palette.common.white,"& p,& a span":{color:e.palette.common.white,fontSize:".75rem"}}},e.breakpoints.up("sm"),{position:"sticky",top:0,zIndex:1}),toolbar:Object(ge.a)({zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2),color:e.palette.common.black,backgroundColor:e.palette.secondary.main},e.breakpoints.down("xs"),{margin:-e.spacing(1),marginBottom:e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),export:{minWidth:"auto"},exportWrapper:{position:"relative",display:"flex"},exportLoader:{width:"100%",position:"absolute",alignSelf:"center"},scrollArea:{height:"100%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=zt().permissions,i=Object(n.useContext)(Je),o=Object(n.useState)([]),s=Object(c.a)(o,2),d=s[0],l=s[1],m=Object(n.useState)([]),u=Object(c.a)(m,2),p=u[0],h=u[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(f()().subtract(1,"day").startOf("day").add(6,"hours")),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(f()().subtract(1,"day").endOf("day").add(6,"hours")),k=Object(c.a)(j,2),N=k[0],S=k[1],I=Object(n.useState)(),C=Object(c.a)(I,2),A=C[0],D=C[1],T=Object(n.useState)("active"),P=Object(c.a)(T,2),M=P[0],F=P[1],q=Object(n.useState)(),R=Object(c.a)(q,2),_=R[0],U=R[1],W=Object(n.useState)({}),L=Object(c.a)(W,2),z=L[0],Y=L[1],B=function(e){var t=e.id;return function(){return U((function(e){return Object(be.a)({},e,Object(ge.a)({},t,!e[t]))}))}},H=O.toISOString(),V=N.toISOString(),J=JSON.stringify(z),Q=Object(Ke.useDebouncedCallback)(Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,i.service("machines").find({query:Object(be.a)({},JSON.parse(J),{$pendingWaste:{sd:qt({date:f()(H)}),ed:qt({date:f()(V)}),typesBy:M,historyBy:A},machineStatusId:pt(i.get("config.machine.status.active"),"value")})});case 3:t=e.sent,a={},ht(t.groupBy,(function(e){a[pt(e,"machine.id")]=!0})),U(a),l(t.groupBy),h(t.header),b(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,H,V,M,A,J]),1e3),$=Object(c.a)(Q,1)[0];Object(n.useEffect)((function(){A&&(b(!0),$())}),[$,A]);var G=Object(n.useState)(),X=Object(c.a)(G,2),Z=X[0],K=X[1],ee=function(){var e=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=2;break}return e.abrupt("return");case 2:return K(!0),e.next=5,Promise.all(ft(d,function(){var e=Object(Ne.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t.groupData,function(){var e=Object(Ne.a)(ke.a.mark((function e(t,a){var n,r,o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if((n=a.setFormErrors||function(){})({}),r=!0,Et(a.cp)&&Et(a.wp)){e.next=16;break}if(parseInt(a.cp,"10")<0&&(r=!1,n((function(e){return Object(be.a)({},e,{cp:"Q Confirmada n\xe3o pode ser negativo"})}))),parseInt(a.wp,"10")<0&&(r=!1,n((function(e){return Object(be.a)({},e,{wp:"Q Refugo n\xe3o pode ser negativo"})}))),pt(a,"plant.wasteJustification")&&!a.wji&&a.wp&&(r=!1,n((function(e){return Object(be.a)({},e,{wji:"Campo obrigat\xf3rio."})}))),r){e.next=13;break}return e.abrupt("return",Promise.resolve());case 13:return a.dontShow=!0,o={poi:pt(a,"poi.id"),mi:pt(a,"poi.machineId"),ti:pt(a,"turn.id"),sd:pt(a,"sd"),ed:pt(a,"ed"),tp:a.tp||0,cp:a.cp||0,wp:a.wp||0,wji:a.wji},e.abrupt("return",i.service("production_order_waste").create(o));case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Promise.resolve());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:K(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=_t({privileges:["writePendingWaste"],permissions:a});return Object(n.useEffect)((function(){D(te?"waste":"history")}),[te]),r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:0,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement(ya.a,{variant:"body1",className:t.title},"Apontamento de Refugo"),r.a.createElement("div",{className:t.exportWrapper},Z&&r.a.createElement("div",{className:t.exportLoader},r.a.createElement(ro,null)),"history"!==A&&r.a.createElement(co,{className:t.export,onClick:ee,text:"Gravar",type:"icon",icon:"save"})),r.a.createElement(ns,{identity:"history-by",filter:A,setFilter:D,options:{waste:"Apontamento",history:"Hist\xf3rico"}}),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(ns,{identity:"events-by",filter:M,setFilter:F,options:{all:"Todas",active:"Ativas",closed:"Encerradas"}})),r.a.createElement(ts,{date:O,setDate:w,maxDate:f()(N).subtract(1,"days")}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(ya.a,{variant:"body1",className:t.label},"at\xe9")),r.a.createElement(ts,{isEndDate:!0,date:N,setDate:S,minDate:O,maxDate:f()().add(1,"days")}),r.a.createElement(Ic,{setQuery:Y}))),r.a.createElement(Gt.a,{item:!0,className:t.wrapper},v&&r.a.createElement(ro,null),!v&&r.a.createElement(Un.a,{id:"tableId",className:t.table},r.a.createElement(Wn.a,null,r.a.createElement(Ln.a,{className:t.header},ft(p,(function(e,a){var n=e.text;return r.a.createElement(zn.a,{key:a,className:t.header},r.a.createElement(ya.a,{variant:"body1"},n))})))),r.a.createElement(Yn.a,null,ft(d,(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(r.a.Fragment,null,r.a.createElement(es,{header:p,item:e.groupTotal,groupBy:{handleGroupExpand:B,expandId:pt(e,"machine.id"),expanded:pt(_,"".concat(pt(e,"machine.id"))),enabled:!0,colspan:e.colspan,text:"".concat(pt(e,"machine.identity")," - ").concat(pt(e,"machine.name")," ").concat("waste"===A?"(".concat(yt(e.groupData,(function(e){return!e.dontShow})).length," Pendentes)"):"")}}),pt(_,"".concat(pt(e,"machine.id")))&&ft(e.groupData,(function(e,t){return!e.dontShow&&r.a.createElement(es,{key:t,header:p,item:e,historyBy:A})}))))}))))))})),is=a(179),os=mt((function(e){return{body:{"& td":{padding:e.spacing(1),"& p,& a span":{fontSize:".75rem"}}},wrapper:{display:"flex",alignItems:"center"},expanded:{transform:"rotate(180deg)"},icon:{margin:"0 ".concat(e.spacing(1),"px")},group:{cursor:"pointer",backgroundColor:e.palette.primary.table}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.header,n=e.item,i=e.groupBy,o=void 0===i?{}:i;return r.a.createElement(Ln.a,{className:ut([t.body,Object(ge.a)({},t.group,o.enabled)])},o.enabled&&r.a.createElement(zn.a,{style:{whiteSpace:"nowrap"},colSpan:o.colspan,onClick:o.handleGroupExpand&&o.handleGroupExpand({id:o.expandId})},r.a.createElement("div",{className:t.wrapper},o.expandId&&r.a.createElement(ia.a,{className:ut(t.icon,Object(ge.a)({},t.expanded,o.expanded))},"expand_more_icon"),r.a.createElement(ya.a,{variant:"body1"},o.text))),ft(a,(function(e,t){var a=e.path,i=e.alt,c=e.type,s=e.add,d=pt(n,a),l=Et(d);return(!o.enabled||s)&&r.a.createElement(zn.a,{key:t,style:{whiteSpace:"nowrap"}},r.a.createElement(ya.a,{variant:"body1"},!l&&"datetime"===c&&f()(d).format("DD/MM/YYYY HH:mm"),!l&&"integer"===c&&r.a.createElement(or.a,{value:d,displayType:"text",thousandSeparator:".",decimalSeparator:","}),!l&&"decimal"===c&&r.a.createElement(or.a,{value:parseFloat(d).toFixed(2).replace(".",","),displayType:"text",thousandSeparator:".",decimalSeparator:","}),!l&&-1===["datetime","integer","decimal"].indexOf(c)&&d,l&&i))})))})),cs=mt((function(e){return{title:{fontSize:"1rem"},label:{padding:"0 ".concat(e.spacing(1),"px"),fontSize:"1rem"},container:{height:"100%",flexWrap:"nowrap",overflow:"visible"},wrapper:Object(ge.a)({position:"relative",overflow:"auto",flex:1,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3)},e.breakpoints.down("xs"),{top:0,margin:-e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),loader:{top:e.spacing(1),width:"100%",position:"absolute"},header:Object(ge.a)({"& th":{padding:"0 ".concat(e.spacing(1),"px"),textTransform:"uppercase",backgroundColor:e.palette.primary.main,color:e.palette.common.white,"& p,& a span":{color:e.palette.common.white,fontSize:".75rem"}}},e.breakpoints.up("sm"),{position:"sticky",top:0,zIndex:1}),toolbar:Object(ge.a)({zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2),color:e.palette.common.black,backgroundColor:e.palette.secondary.main},e.breakpoints.down("xs"),{margin:-e.spacing(1),marginBottom:e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),export:{minWidth:"auto","& svg":{height:"1rem",width:"1rem !important"},"& span":{display:"flex",flexDirection:"column",flexWrap:"nowrap",fontSize:"0.75rem"}},exportWrapper:{position:"relative",display:"flex"},exportLoader:{width:"100%",position:"absolute",alignSelf:"center"},scrollArea:{height:"100%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=Object(n.useContext)(Je),i=zt().session,o=Object(n.useState)([]),s=Object(c.a)(o,2),d=s[0],l=s[1],m=Object(n.useState)([]),u=Object(c.a)(m,2),p=u[0],h=u[1],y=Object(n.useState)(),g=Object(c.a)(y,2),v=g[0],b=g[1],E=Object(n.useState)(f()().subtract(7,"days").startOf("day").add(6,"hours")),x=Object(c.a)(E,2),O=x[0],w=x[1],j=Object(n.useState)(f()().subtract(1,"days").endOf("day").add(6,"hours")),k=Object(c.a)(j,2),N=k[0],S=k[1],I=Object(n.useState)("mipoi"),C=Object(c.a)(I,2),A=C[0],D=C[1],T=Object(n.useState)("ev"),P=Object(c.a)(T,2),M=P[0],F=P[1],q=Object(n.useState)(),R=Object(c.a)(q,2),_=R[0],U=R[1],W=Object(n.useState)({}),L=Object(c.a)(W,2),z=L[0],Y=L[1],B=function(e){var t=e.id;return function(){return U((function(e){return Object(be.a)({},e,Object(ge.a)({},t,!e[t]))}))}},H=O.toISOString(),V=N.toISOString(),J=JSON.stringify(z),Q=Object(Ke.useDebouncedCallback)(Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,a.service("machines").find({query:Object(be.a)({},JSON.parse(J),{$reportAvailability:{sd:f()(H).toDate(),ed:f()(V).toDate(),eventsBy:M,groupBy:A},machineStatusId:pt(a.get("config.machine.status.active"),"value")})});case 3:t=e.sent,-1!==["mipoi","mi"].indexOf(A)?(n={},ht(t.groupBy,(function(e){n[pt(e,"machine.id")]=!0})),U(n),l(t.groupBy)):l(t.data),h(t.header),b(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,H,V,M,A,J]),1e3),$=Object(c.a)(Q,1)[0];Object(n.useEffect)((function(){b(!0),$()}),[$]);var G=Object(n.useState)(),X=Object(c.a)(G,2),Z=X[0],K=X[1],ee=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=2;break}return e.abrupt("return");case 2:return K(!0),e.next=5,fetch("".concat(a.get("cloudURL"),"/report_pdf?uuid=").concat(pt(i,"company.uuid"),"&sd=").concat(O.toDate(),"&ed=").concat(N.toDate()));case 5:return t=e.sent,e.next=8,t.blob();case 8:t=e.sent,(n=document.createElement("a")).href=window.URL.createObjectURL(t),n.download="Relat\xf3rio de Produ\xe7\xe3o ".concat(O.format("YYYY-MMM-DD")," ").concat(N.format("YYYY-MMM-DD"),".pdf"),document.body.appendChild(n),n.click(),n.remove(),K(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:0,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement(ya.a,{variant:"body1",className:t.title},"Relat\xf3rio de Produ\xe7\xe3o"),r.a.createElement("div",null,r.a.createElement(aa.a,{className:t.export,onClick:function(){for(var e="<table border='2px'><tr bgcolor='#87AFC6'>",t=document.getElementById("tableId"),a=document.getElementById("frameId"),n=0;n<t.rows.length;n++)e=e+t.rows[n].innerHTML+"</tr>";var r;return e=(e=(e=(e+="</table>").replace(/<A[^>]*>|<\/A>/g,"")).replace(/<img[^>]*>/gi,"")).replace(/<input[^>]*>|<\/input>/gi,""),window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)?(a.document.open("txt/html","replace"),a.document.write(e),a.document.close(),a.focus(),r=a.document.execCommand("SaveAs",!0,"Say Thanks to Sumit.xls")):r=window.open("data:application/vnd.ms-excel,"+encodeURIComponent(e)),r}},r.a.createElement(vn.a,{icon:is.a}),r.a.createElement("span",null,"Excel")),r.a.createElement("iframe",{title:"frameId",id:"frameId",style:{display:"none"}})),r.a.createElement("div",{className:t.exportWrapper},Z&&r.a.createElement("div",{className:t.exportLoader},r.a.createElement(ro,null)),r.a.createElement(aa.a,{className:t.export,onClick:ee},r.a.createElement(vn.a,{icon:is.b}),r.a.createElement("span",null,"PDF"))),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(ns,{identity:"menu-group-by",filter:A,setFilter:D,options:{poi:"por Ordem",mi:"por M\xe1quina",mipoi:"por M\xe1quina e Ordem"}}),r.a.createElement(ns,{identity:"events-by",filter:M,setFilter:F,options:{at:"por Tipo de Evento",ev:"por Evento"}})),r.a.createElement(ts,{date:O,setDate:function(e){w(f()(e)),S((f()(e).add(6,"days").isAfter(f()().subtract(1,"days"),"minute")?f()().subtract(1,"days"):f()(e).add(6,"days")).endOf("day").add(6,"hours"))},maxDate:f()(N).subtract(1,"days")}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(ya.a,{variant:"body1",className:t.label},"at\xe9")),r.a.createElement(ts,{isEndDate:!0,date:N,setDate:S,minDate:f()(O).add(1,"days"),maxDate:f()(O).add(15,"days").isAfter(f()(),"minute")?f()():f()(O).add(15,"days")}),r.a.createElement(Ic,{setQuery:Y}))),r.a.createElement(Gt.a,{item:!0,className:t.wrapper},v&&r.a.createElement("div",{className:t.loader},r.a.createElement(ro,null)),!v&&r.a.createElement(Un.a,{id:"tableId",className:t.table},r.a.createElement(Wn.a,null,r.a.createElement(Ln.a,{className:t.header},ft(p,(function(e,a){var n=e.text;return r.a.createElement(zn.a,{key:a,className:t.header},r.a.createElement(ya.a,{variant:"body1"},n))})))),r.a.createElement(Yn.a,null,ft(d,(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},"mipoi"===A&&r.a.createElement(r.a.Fragment,null,r.a.createElement(os,{header:p,item:e.groupTotal,groupBy:{handleGroupExpand:B,expandId:pt(e,"machine.id"),expanded:pt(_,"".concat(pt(e,"machine.id"))),enabled:!0,colspan:e.colspan,text:"".concat(pt(e,"machine.identity")," - ").concat(pt(e,"machine.name"))}}),pt(_,"".concat(pt(e,"machine.id")))&&ft(e.groupData,(function(e,t){return r.a.createElement(os,{key:t,header:p,item:e})}))),"mi"===A&&r.a.createElement(os,{header:p,item:e.groupTotal}),"poi"===A&&r.a.createElement(os,{header:p,item:e}))}))))))})),ss=a(360);!function(e,t,a){a.plugins=a.plugins||{},a.plugins.changeEvent=function(e){return function(t){t.container.addEventListener("click",(function(t){var a,n;a=t.target,n="ct-bar",(" "+a.getAttribute("class")+" ").indexOf(" "+n+" ")>-1&&e.onClick&&e.onClick(t)}))}}}(window,document,Tc.a);a(591);var ds=mt((function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},wrapper:{width:"500px",padding:e.spacing(2),background:e.palette.secondary.main}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.filters,i=e.typesMap,o=e.data,s=e.header,d=e.reload,l=zt().permissions,m=_t({privileges:["editProductionOrderEvents"],permissions:l}),u=Object(n.useState)(!1),p=Object(c.a)(u,2),f=p[0],h=p[1],y=Object(n.useState)({}),g=Object(c.a)(y,2),v=g[0],b=g[1],E={stackBars:!0,horizontalBars:!0,height:s?"50px":"80px",low:0,high:1440,classNames:{label:"myct-label"},axisX:{offset:s?100:10,showLabel:!!s,type:Tc.a.FixedScaleAxis,divisor:s?window.innerWidth>1400?24:window.innerWidth>800?12:window.innerWidth>400?6:3:window.innerWidth>1400?48:window.innerWidth>800?24:window.innerWidth>400?12:6,showGrid:!0,labelInterpolationFnc:function(e,t,n){return s&&e%60===0?a.sd.clone().add(6,"hours").add(e,"m").format("HH:mm"):""}},axisY:{showGrid:!1,showLabel:!1},plugins:[Tc.a.plugins.tooltip({appendToBody:!0,class:"gauge-tooltip",transformTooltipTextFnc:function(){}}),Tc.a.plugins.changeEvent({onClick:function(e){var t=JSON.parse(e.target.getAttribute("ct:ev")||"{}");b(t),h(!0)}})]},x={draw:function(e){e.series&&e.element.attr({style:"stroke:"+e.series.bgColor,"ct:ev":JSON.stringify(e.series)})}},O=function(){h(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mc.a,{type:"Bar",data:o||{},options:E,listener:x,style:{marginBottom:"-18px",marginTop:s?"":"-15px",marginLeft:"-35px",position:"relative",top:s?"-18px":"",overflowY:s?"hidden":""}}),r.a.createElement(ss.a,{style:{zIndex:10},open:f,onClose:O},r.a.createElement("div",{className:t.container,onClick:O},r.a.createElement("div",{className:t.wrapper,onClick:function(e){return e.stopPropagation()}},r.a.createElement(Jc,{index:v.evIndex,hasEditAccess:m,history:{_id:v.sum},typesMap:i,event:v,reload:function(){O(),d()}})))))})),ls=mt((function(e){return{label:{fontSize:".65rem"},title:{padding:"".concat(e.spacing(1),"px 0"),height:"100%",minHeight:58},row:{"& td":{padding:"0 ".concat(e.spacing(2),"px")}},status:{padding:"".concat(e.spacing(0),"px !important"),"& > div":{margin:"0 auto"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.machine,i=e.typesMap,o=e.filters,s=e.isSameDay,d=e.reload,l=Object(n.useContext)(Je),m=Ft({client:l,type:"undefined"}),u=Pt({data:l.get("actionType.".concat(m)),path:"color"}),p=Object(n.useState)({}),f=Object(c.a)(p,2),h=f[0],y=f[1];return Object(n.useEffect)((function(){var e=0;a.history.map((function(t){return e+=t.value[0]})),y({labels:[],series:a.history.length?a.history:[{at:-1,ev:-1,bgColor:u,diff:1440,meta:"SISTEMA SEM COMUNICA\xc7\xc3O",value:[1440]}]})}),[a,u]),r.a.createElement(Ln.a,{className:t.row},r.a.createElement(zn.a,{className:t.title},r.a.createElement(ya.a,{variant:"body1"},a.identity),r.a.createElement(ya.a,{className:t.label,component:"p"},a.name)),r.a.createElement(zn.a,null,r.a.createElement(ds,{filters:o,data:h,typesMap:i,reload:d})),r.a.createElement(zn.a,null,r.a.createElement(ya.a,{variant:"body1"},parseFloat(pt(a,"stats.oem"))>=0?"".concat(pt(a,"stats.oem"),"%"):"ND")),s&&r.a.createElement(zn.a,{className:t.status},r.a.createElement(Wc,{productionOrder:a.productionOrder,size:40})))})),ms=lt(mt((function(e){return{title:{fontSize:"1rem"},label:{padding:"0 ".concat(e.spacing(1),"px"),fontSize:"1rem"},container:{height:"100%",flexWrap:"nowrap",overflow:"visible"},wrapper:Object(ge.a)({position:"relative",overflow:"auto",flex:1,top:e.spacing(1),width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3)},e.breakpoints.down("xs"),{top:0,margin:-e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),header:Object(ge.a)({height:"56px","& th":{padding:"0 ".concat(e.spacing(2),"px"),textTransform:"uppercase",backgroundColor:e.palette.primary.main,color:e.palette.common.white,"& p,& a span":{color:e.palette.common.white,fontSize:".75rem"}}},e.breakpoints.up("sm"),{position:"sticky",top:0,zIndex:1}),toolbar:Object(ge.a)({zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2),color:e.palette.common.black,backgroundColor:e.palette.secondary.main},e.breakpoints.down("xs"),{margin:-e.spacing(1),marginBottom:e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),scrollArea:{height:"100%"},loader:{marginBottom:"-4px",zIndex:"2"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.match.params,i=e.timeCarousel,o=e.limit,s=e.offset,d=Object(n.useContext)(Je),l=Object(n.useState)([]),m=Object(c.a)(l,2),u=m[0],p=m[1],h=Object(n.useState)({}),y=Object(c.a)(h,2),g=y[0],v=y[1],b=Object(n.useState)(),E=Object(c.a)(b,2),x=E[0],O=E[1],w=Object(n.useState)({}),j=Object(c.a)(w,2),k=j[0],N=j[1],S=Object(n.useState)(f()().isAfter(f()().startOf("day").add(6,"hours"),"minute")?f()().startOf("day").add(6,"hours"):f()().subtract(1,"day").startOf("day").add(6,"hours")),I=Object(c.a)(S,2),C=I[0],A=I[1],D=C.toISOString(),T=JSON.stringify(k),P=f()().isSame(C,"day"),M=Object(Ke.useDebouncedCallback)(Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.machineId,n=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var n,r,i;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),n={},a.companyId&&(n.$adminQueryCompanyId=a.companyId),r={},t&&(r.id=t),e.next=7,d.service("machines").find({query:Object(be.a)({},JSON.parse(T),{},n,{},r,{$reportHistory:{sd:f()(D).startOf("day").add(6,"hours").toDate(),ed:f()(D).endOf("day").add(6,"hours").toDate(),cd:f()().toDate(),same:P},machineStatusId:pt(d.get("config.machine.status.active"),"value"),$sort:{identity:1},$limit:o,$skip:s})});case 7:i=e.sent,p(t?function(e){var a=bt(e,{id:t});return-1!==a&&(e[a]=i.data[0]),Object(ve.a)(e)}:i.data),O(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}),[d,D,a.companyId,T,P]),1e3),F=Object(c.a)(M,1)[0];return Object(n.useEffect)((function(){i?setTimeout((function(){F()}),1e3*i):F()}),[F]),Object(n.useEffect)((function(){var e;return P&&(e=setInterval((function(){F()}),3e5)),function(){clearInterval(e)}}),[d,F,P]),Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a,n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.service("production_order_event_types").find();case 2:t=e.sent,a=t.data,n={},ht(a,(function(e){return n[e.id]=e})),v(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d]),r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:0,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement(ya.a,{variant:"body1",className:t.title},"Hist\xf3rico de Produ\xe7\xe3o"),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ts,{date:C,setDate:A,maxDate:f()()}),r.a.createElement(Ic,{setQuery:N}))),r.a.createElement(Gt.a,{item:!0,className:t.wrapper},x&&r.a.createElement(ja.a,{className:t.loader}),r.a.createElement(Un.a,{id:"tableId",className:t.table},r.a.createElement("colgroup",null,r.a.createElement(ra.a,{smDown:!0},r.a.createElement("col",{width:"135px"})),r.a.createElement(ra.a,{mdUp:!0},r.a.createElement("col",{width:"50px"})),r.a.createElement("col",null),r.a.createElement("col",{width:"50px"}),P&&r.a.createElement("col",{width:"70px"})),r.a.createElement(Wn.a,null,r.a.createElement(Ln.a,{className:t.header},r.a.createElement(zn.a,{className:t.header},r.a.createElement(ya.a,{variant:"body1"},"M\xe1quina")),r.a.createElement(zn.a,{className:t.header},r.a.createElement(ds,{data:[30,30,30,30],filters:{sd:f()(C).startOf("day"),ed:f()(C).endOf("day")},header:!0})),r.a.createElement(zn.a,{className:t.header},r.a.createElement(ya.a,{variant:"body1"},"Disp.")),P&&r.a.createElement(zn.a,{className:t.header},r.a.createElement(ya.a,{variant:"body1"},"Status")))),r.a.createElement(Yn.a,null,ft(u,(function(e){return r.a.createElement(ls,{key:e.id,machine:e,typesMap:g,filters:{sd:f()(C).startOf("day"),ed:f()(C).endOf("day")},isSameDay:P,reload:F})}))))))}))),us=a(356),ps=a.n(us),fs=mt((function(e){return{container:{display:"flex",alignItems:"center"},title:{width:220}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.theme,n=e.text,i=e.data,o={height:50,reverseData:!0,horizontalBars:!0,axisX:{offset:20,type:Tc.a.FixedScaleAxis,high:110,low:0,ticks:[0,50,100],labelInterpolationFnc:function(e){return"".concat(e,"%")}},axisY:{showGrid:!1,showLabel:!1}},c={draw:function(e){e.series&&e.element.attr({style:"stroke: ".concat(pt(e,"series.0.bgColor"),"; stroke-width: ").concat(window.outerWidth<=a.breakpoints.width("sm")?"15px":"30px")}),"grid"===e.type&&e.element.attr({y1:e.y1-15,y2:e.y2+15,style:"stroke: black; stroke-width: 1px; stroke-dasharray: none;"})}};return r.a.createElement(Gt.a,{item:!0,container:!0,spacing:0,className:t.container},r.a.createElement(Gt.a,{item:!0,className:t.title},r.a.createElement(ya.a,{variant:"body1"},n," ",At(parseFloat(pt(i,"series.0.0.value")).toFixed(2)),"%")),r.a.createElement(Gt.a,{item:!0},r.a.createElement(Mc.a,{type:"Bar",className:"ct-oee-indicators",data:i,options:o,listener:c,style:{padding:a.spacing(2)}})))})),hs=lt(mt((function(e){return{card:{color:e.palette.common.black,display:"flex",padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},link:{textDecoration:"none"},selected:{backgroundColor:e.palette.primary.header},avatar:{marginRight:e.spacing(1),color:e.palette.primary.main},item:{flexWrap:"nowrap"}}}),{withTheme:!0})((function(e){var t=e.match.params,a=e.classes,i=e.model,o=e.plant,c=Object(n.useContext)(Je),s=Ht({model:"machines",query:{plantId:o.id,machineStatusId:pt(c.get("config.machine.status.active"),"value"),$sort:{identity:1}}}),d=s.list,l=s.loading,m=!l&&!d.length;return r.a.createElement(r.a.Fragment,null,m&&r.a.createElement(oo,null),l&&r.a.createElement(ro,null),ft(d,(function(e){return r.a.createElement(Gt.a,{item:!0,xs:12,key:e.id,className:ut(a.link,Object(ge.a)({},a.selected,parseInt(t.plantId,"10")===o.id&&parseInt(t.machineId,"10")===e.id)),component:st,to:"".concat(i.formPath,"/").concat(o.id,"/machine/").concat(e.id)},r.a.createElement("div",{className:a.card},r.a.createElement(Gt.a,{container:!0,alignItems:"center",className:a.item},e.image&&r.a.createElement(Kt.a,{alt:e.name,src:e.image,className:a.avatar}),!e.image&&i.icon&&r.a.createElement(ia.a,{className:a.avatar},i.icon),r.a.createElement(ya.a,{variant:"body1"},e.identity?"".concat(e.identity," - "):""," ",e.name))))})))}))),ys=lt(mt((function(e){return{container:{height:"100%",flexWrap:"nowrap",overflow:"visible"},wrapper:{height:"100%",overflow:"hidden"},toolbar:Object(ge.a)({zIndex:10,width:"calc(100% + ".concat(e.spacing(6),"px)"),margin:-e.spacing(3),marginBottom:e.spacing(2),color:e.palette.common.black,backgroundColor:e.palette.secondary.main},e.breakpoints.down("xs"),{margin:-e.spacing(1),marginBottom:e.spacing(1),width:"calc(100% + ".concat(e.spacing(2),"px)")}),toolbarTitle:{fontSize:"1rem"},toolbarLabel:{padding:"0 ".concat(e.spacing(1),"px"),fontSize:"1rem"},tree:{flex:1,height:"100%",maxWidth:"25%",overflowY:"auto",overflowX:"hidden"},treeItemSelected:{backgroundColor:e.palette.primary.form},content:{height:"100%",position:"relative",overflow:"auto",flex:1},graphWrapper:{display:"flex",paddingLeft:e.spacing(3),alignItems:"center"},graphSidebar:Object(ge.a)({flexDirection:"column"},e.breakpoints.down("sm"),{flexDirection:"row"}),graphItem:{"& canvas":Object(ge.a)({paddingLeft:e.spacing(3)},e.breakpoints.up("sm"),{height:"280px !important"})},graphItemDetail:{padding:e.spacing(1)},graphTitle:{display:"flex",alignItems:"center",fontSize:"1.5rem",padding:e.spacing(2),textDecoration:"none"},graphSidebarTitle:{fontSize:".9rem"},graphIcon:{fontSize:50,color:e.palette.primary.main},graphDetailTitle:{textAlign:"right",fontSize:".9rem"},graphDetail:{fontWeight:"bold"},allPlants:{color:e.palette.common.black,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px")},legend:Object(ge.a)({flexWrap:"wrap",display:"flex",margin:"".concat(e.spacing(2),"px ").concat(e.spacing(2),"px 0"),boxShadow:"none",background:"none",fontSize:"small"},e.breakpoints.down("sm"),{fontSize:"xx-small"}),titleLegend:Object(ge.a)({display:"flex",width:"fit-content",alignItems:"center",textTransform:"uppercase",margin:e.spacing(1)},e.breakpoints.down("sm"),{margin:e.spacing(.5)}),iconLegend:{borderRadius:"50%",height:10,width:10,margin:5}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.theme,i=e.match.params,o=e.location.pathname,s=e.timeCarousel,d=Object(n.useContext)(Je),l=Object(n.useState)({}),m=Object(c.a)(l,2),u=m[0],p=m[1],h=Object(n.useState)({}),y=Object(c.a)(h,2),g=y[0],v=y[1],b=Object(n.useState)({}),E=Object(c.a)(b,2),x=E[0],O=E[1],w=Object(n.useState)({}),j=Object(c.a)(w,2),k=j[0],N=j[1],S=Object(n.useState)(),I=Object(c.a)(S,2),C=I[0],A=I[1],D=Object(n.useState)({}),T=Object(c.a)(D,2),P=T[0],M=T[1],F=Object(n.useState)({}),q=Object(c.a)(F,2),R=q[0],_=q[1],U=Object(n.useState)(),W=Object(c.a)(U,2),L=W[0],z=W[1],Y=Object(n.useState)(),B=Object(c.a)(Y,2),H=B[0],V=B[1],J=Object(n.useState)(f()().subtract(1,"days").startOf("day").add(6,"hours")),Q=Object(c.a)(J,2),$=Q[0],G=Q[1],X=Object(n.useState)(f()().subtract(1,"days").endOf("day").add(6,"hours")),Z=Object(c.a)(X,2),K=Z[0],ee=Z[1],te=$.toISOString(),ae=K.toISOString(),ne=Object(Ke.useDebouncedCallback)(Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),t={},i.plantId&&(t.plantId=i.plantId),i.machineId&&(t.id=i.machineId),e.next=6,d.service("machines").find({query:Object(be.a)({},t,{$reportOEE:{sd:f()(te).toDate(),ed:f()(ae).toDate()},machineStatusId:pt(d.get("config.machine.status.active"),"value"),$sort:{identity:1}})});case 6:a=e.sent,p(a.graphAvailability),O(a.graphQuality),N(a.graphPerformance),A(a.graphOEE),M(a.graphActions),_(a.graphStats),z(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d,te,ae,i.plantId,i.machineId]),1e3),re=Object(c.a)(ne,1)[0],ie=Object(Ke.useDebouncedCallback)(Object(n.useCallback)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a,n,r,o,c;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(V(!0),t={},i.plantId&&(t.plantId=i.plantId),i.machineId&&(t.id=i.machineId),a=f()(te),n=f()(ae),f()(n).diff(f()(a),"days")<7&&(a=f()(n).subtract(7,"days").startOf("day").add(6,"hours")),r=[],o=0;o<=f()(n).diff(f()(a),"days");o++)r.push({sd:f()(a).add(o,"days").startOf("day").add(6,"hours"),ed:f()(a).add(o,"days").endOf("day").add(6,"hours")});return e.next=11,d.service("machines").find({query:Object(be.a)({},t,{$reportIndicators:{sd:f()(a).toDate(),ed:f()(n).toDate(),dates:r},machineStatusId:pt(d.get("config.machine.status.active"),"value"),$sort:{identity:1}})});case 11:c=e.sent,ht(c.graphIndicators.series,(function(e){e.value=ft(e.value,(function(e){return e>110?110:e}))})),v(c.graphIndicators),V(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d,te,ae,i.plantId,i.machineId]),1e3),oe=Object(c.a)(ie,1)[0];Object(n.useEffect)((function(){s?(z(!0),setTimeout((function(){re()}),1e3*s)):(z(!0),re())}),[re]),Object(n.useEffect)((function(){s?(V(!0),setTimeout((function(){oe()}),1e3*s)):(V(!0),oe())}),[oe]);var ce={high:110,low:0,height:250,axisX:{showGrid:!1},axisY:{offset:20,high:110,low:0,type:Tc.a.FixedScaleAxis,ticks:[0,20,40,60,80,100],labelInterpolationFnc:function(e){return"".concat(e,"%")}},series:{OEE:{showArea:!0}},plugins:[Tc.a.plugins.tooltip({appendToBody:!0,class:"gauge-tooltip",tooltipFnc:function(e,t){return"".concat(e?"".concat(e," "):"").concat(At(parseFloat(t).toFixed(2)))}})]},se=new URLSearchParams(window.location.search),de=se.get("sd"),le=se.get("ed");return Object(n.useEffect)((function(){de&&G(f()(de)),le&&ee(f()(le))}),[de,le]),r.a.createElement(Gt.a,{container:!0,direction:"column",spacing:0,className:t.container},r.a.createElement(Gt.a,{item:!0},r.a.createElement(Zt.a,{className:t.toolbar},r.a.createElement(ya.a,{variant:"body1",className:t.toolbarTitle},"OEE"),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ts,{date:$,setDate:function(e){G(f()(e)),ee((f()(e).add(6,"days").isAfter(f()().subtract(1,"days"),"minute")?f()().subtract(1,"days"):f()(e).add(6,"days")).endOf("day").add(6,"hours"))},maxDate:f()(K).subtract(1,"days")}),r.a.createElement(ra.a,{smDown:!0},r.a.createElement(ya.a,{variant:"body1",className:t.toolbarLabel},"at\xe9")),r.a.createElement(ts,{isEndDate:!0,date:K,setDate:ee,minDate:f()($).add(1,"days"),maxDate:f()($).add(7,"days").isAfter(f()(),"minute")?f()():f()($).add(7,"days")}))),r.a.createElement(Gt.a,{container:!0,item:!0,spacing:2,className:t.wrapper},"/reports/carousel"!==o&&r.a.createElement(Gt.a,{item:!0,className:t.tree},r.a.createElement(fa.a,{elevation:4},r.a.createElement(ao,{model:{name:"plants",formPath:"/reports/production-oee/plant",paramsProp:"plantId"},query:{plantStatusId:pt(d.get("config.plant.status.active"),"value"),$sort:{name:1}},customContent:{beforeTree:function(){return r.a.createElement(Gt.a,{item:!0,component:st,to:"/reports/production-oee"},r.a.createElement(ya.a,{className:ut(Object(ge.a)({},t.treeItemSelected,!i.plantId),t.allPlants),variant:"body1"},"TODAS"))},afterTreeItem:function(e){var t=e.data;return t.id&&r.a.createElement(hs,{model:Object(be.a)({},di.metadata,{formPath:"/reports/production-oee/plant",icon:"style"}),plant:t})}}}))),r.a.createElement(Gt.a,{item:!0,className:t.content},r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2},r.a.createElement(Gt.a,{item:!0,xs:12,sm:4,className:t.graphItem},r.a.createElement("div",{className:t.graphWrapper},r.a.createElement(ia.a,{className:t.graphIcon},"donut_large"),r.a.createElement(ya.a,{className:t.graphTitle,variant:"body1"},"OEE")),L&&r.a.createElement(ro,null),!L&&r.a.createElement(Fc,{value:C})),r.a.createElement(Gt.a,{item:!0,xs:12,sm:4,className:t.graphItem},r.a.createElement("div",{className:t.graphWrapper},r.a.createElement(ia.a,{className:t.graphIcon},"view_week"),r.a.createElement(ya.a,{className:t.graphTitle,variant:"body1"},"Indicadores")),L&&r.a.createElement(ro,null),!L&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{item:!0,container:!0,spacing:2},r.a.createElement(fs,{text:"Disponibilidade",data:u}),r.a.createElement(fs,{text:"Qualidade",data:x}),r.a.createElement(fs,{text:"Performance",data:k})))),r.a.createElement(Gt.a,{item:!0,xs:12,sm:4,className:t.graphItem},r.a.createElement("div",{className:t.graphWrapper},r.a.createElement(ia.a,{className:t.graphIcon},"pie_chart"),r.a.createElement(ya.a,{className:t.graphTitle,variant:"body1"},"Disponibilidade")),L&&r.a.createElement(ro,null),!L&&r.a.createElement(qc,{options:{chartPadding:20,labelOffset:50,height:200},data:P})),r.a.createElement(Gt.a,{item:!0,xs:12,sm:3,className:t.graphSidebar},r.a.createElement(Gt.a,{item:!0,xs:12,className:t.graphItem},r.a.createElement("div",{className:t.graphItemDetail,style:{background:pt(u,"series.0.0.bgColor")}},r.a.createElement(ya.a,{className:t.graphSidebarTitle,variant:"body1"},"Disponibilidade"),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Tempo Opera\xe7\xe3o:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:Math.round(R.productionTime/60*100)/100,displayType:"text"})," ","h",L&&r.a.createElement(ro,null))),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Tempo Planejado:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:Math.round(R.plannedTime/60*100)/100,displayType:"text"})," ","h",L&&r.a.createElement(ro,null))))),r.a.createElement(Gt.a,{item:!0,xs:12,className:t.graphItem},r.a.createElement("div",{className:t.graphItemDetail,style:{background:pt(x,"series.0.0.bgColor")}},r.a.createElement(ya.a,{className:t.graphSidebarTitle,variant:"body1"},"Qualidade"),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Prod. Total:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:R.totalProductionInEvents,displayType:"text",thousandSeparator:".",decimalSeparator:","}),L&&r.a.createElement(ro,null))),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Prod. Confirmada:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:R.confirmedProductionInEvents,displayType:"text",thousandSeparator:".",decimalSeparator:","}),L&&r.a.createElement(ro,null))),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Refugo:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:R.wastedProductionInEvents,displayType:"text",thousandSeparator:".",decimalSeparator:","}),L&&r.a.createElement(ro,null))))),r.a.createElement(Gt.a,{item:!0,xs:12,className:t.graphItem},r.a.createElement("div",{className:t.graphItemDetail,style:{background:pt(k,"series.0.0.bgColor")}},r.a.createElement(ya.a,{className:t.graphSidebarTitle,variant:"body1"},"Performance"),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Ciclos:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:R.readingsInEvents,displayType:"text",thousandSeparator:".",decimalSeparator:","}),L&&r.a.createElement(ro,null))),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Ciclo Ideal:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:R.idealCycle,displayType:"text",thousandSeparator:".",decimalSeparator:","})," ","s",L&&r.a.createElement(ro,null))),r.a.createElement(ya.a,{className:t.graphDetailTitle,variant:"body1"},"Ciclo Real:"," ",r.a.createElement("span",{className:t.graphDetail},r.a.createElement(or.a,{value:R.realCycleInEvents,displayType:"text",thousandSeparator:".",decimalSeparator:","})," ","s",L&&r.a.createElement(ro,null)))))),r.a.createElement(Gt.a,{item:!0,xs:12,sm:9,className:t.graphItem},H&&r.a.createElement(ro,null),!H&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fa.a,{className:t.legend},ft(["Disponibilidade","Qualidade","Performance","OEE"],(function(e,a){return r.a.createElement("div",{key:a,className:t.titleLegend},r.a.createElement("i",{className:t.iconLegend,style:{background:pt(g,"series.".concat(a,".bgColor"))}})," ",e)}))),r.a.createElement(Mc.a,{type:"Line",className:"ct-indicators",data:g,options:ce,listener:{draw:function(e){e.series&&e.element.attr({style:"stroke: ".concat(e.series.bgColor,";")})}},style:{padding:a.spacing(2)}})))))))}))),gs=(a(606),a(607),mt((function(e){return{container:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:9999,background:"white",padding:0,"&>div":{height:"100%","&>div":{height:"100%","&>div":{height:"100%","&>div":{height:"100%","&>div":{height:"100%"}}}}}},wrapper:{pointerEvents:"none",height:"100%","&>div":{padding:"24px 24px"}}}}),{withTheme:!0})((function(e){var t=e.classes,a=Object(n.useContext)(Je),i=zt().permissions,o=Ht({model:"machines",query:{machineStatusId:pt(a.get("config.machine.status.active"),"value")}}).list,c=_t({privileges:["readProductionOrders","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],permissions:i}),s=_t({privileges:["readProductionOrderReports"],permissions:i}),d=function(e){return Math.ceil(o.length/e)},l=new Array(d(8));It(l,1,0,d(8));var m=new Array(d(7));return It(m,1,0,d(7)),r.a.createElement("div",{className:t.container},r.a.createElement(ps.a,{dots:!1,infinite:!0,autoplay:!0,autoplaySpeed:15e3,speed:500,slidesToShow:1,slidesToScroll:1},s&&ft(m,(function(e,a){return r.a.createElement("div",{className:t.wrapper,key:a},r.a.createElement(ms,{timeCarousel:10,offset:7*a,limit:7}))})),s&&r.a.createElement("div",{className:t.wrapper},r.a.createElement(ys,{timeCarousel:20})),c&&ft(l,(function(e,a){return r.a.createElement("div",{className:t.wrapper,key:a},r.a.createElement(zc,{offset:8*a,limit:8}))}))))}))),vs=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.d,null,r.a.createElement(Li,{exact:!0,path:"/reports/carousel",permissions:["readProductionOrders","readProductionOrderReports","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],component:gs}),r.a.createElement(Li,{exact:!0,path:"/dashboard",permissions:["readProductionOrders","readProductionOrderReports","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],component:Ac}),r.a.createElement(Li,{exact:!0,path:"/reports",permissions:["readProductionOrderReports"],component:Uc}),r.a.createElement(Li,{exact:!0,path:"/dashboard/production",permissions:["readProductionOrders","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],component:zc}),r.a.createElement(Li,{exact:!0,path:"/dashboard/production/:machineId/order/:productionOrderId",permissions:["readProductionOrders","writeActiveProductionOrders","writeScheduledStopProductionOrders","writeProductionOrderEvents"],component:Kc}),r.a.createElement(Li,{exact:!0,path:"/dashboard/production-waste",permissions:["readPendingWaste","writePendingWaste","editPendingWaste"],component:rs}),r.a.createElement(Li,{exact:!0,path:"/dashboard/production-waste/:machineId/order/:productionOrderId",permissions:["readPendingWaste","writePendingWaste","editPendingWaste"],component:rs}),r.a.createElement(Li,{exact:!0,path:"/dashboard/production-history",permissions:["readProductionOrderReports"],component:ms}),r.a.createElement(Li,{exact:!0,path:"/reports/production-report",permissions:["readProductionOrderReports"],component:cs}),r.a.createElement(Li,{exact:!0,path:"/reports/production-oee",permissions:["readProductionOrderReports"],component:ys}),r.a.createElement(Li,{exact:!0,path:"/reports/production-oee/plant/:plantId",permissions:["readProductionOrderReports"],component:ys}),r.a.createElement(Li,{exact:!0,path:"/reports/production-oee/plant/:plantId/machine/:machineId",permissions:["readProductionOrderReports"],component:ys}),r.a.createElement(Li,{default:!0,component:Vo})))},bs=[{name:"Dom\xednios do Sistema",icon:"domain",actions:[{name:"Cores",href:"/sysadmin/master-data/colors"},{name:"Unidades de Medida",href:"/sysadmin/master-data/measurement-units"},{name:"Perfis",href:"/sysadmin/master-data/roles"},{name:"Status de Clientes",href:"/sysadmin/master-data/company-statuses"},{name:"Status de Fun\xe7\xf5es do Usu\xe1rio",href:"/sysadmin/master-data/role-statuses"},{name:"Status de Usu\xe1rios",href:"/sysadmin/master-data/user-statuses"}]},{name:"Dom\xednios de OP",icon:"assessment",actions:[{name:"Status de Locais",href:"/sysadmin/master-data/plant-statuses"},{name:"Status de Ordem de Produ\xe7\xe3o",href:"/sysadmin/master-data/production-order-statuses"},{name:"Tipos de Eventos de Ordem de Produ\xe7\xe3o",href:"/sysadmin/master-data/production-order-action-types"}]},{name:"Dom\xednios de M\xe1quinas",icon:"build",actions:[{name:"Status de M\xe1quinas",href:"/sysadmin/master-data/machine-statuses"}]},{name:"Dom\xednios de Moldes",icon:"broken_image",actions:[{name:"Status de Moldes",href:"/sysadmin/master-data/mold-statuses"}]},{name:"Dom\xednios de Produtos",icon:"style",actions:[{name:"Status de Produtos",href:"/sysadmin/master-data/product-statuses"}]},{name:"Dom\xednios de Sensores",icon:"memory",actions:[{name:"Status de Sensores",href:"/sysadmin/master-data/sensor-statuses"}]},{name:"Dom\xednios de Tickets",icon:"memory",actions:[{name:"Status de Ticket",href:"/sysadmin/master-data/ticket-statuses"}]}],Es=function(){return Vi({actions:bs})},xs=a(10),Os=[{text:"Nome",identity:"name",required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"Tabela",identity:"model",enum:["measurement_units","machine_statuses","mold_statuses","product_statuses","sensor_statuses","production_order_statuses"]},{text:"Valor",identity:"value",type:"string",model:{this:"model"}}],ws={name:"configs"},js=Object(xs.a)((function(e){return{table:{width:"100%"},header:{backgroundColor:e.palette.common.black,color:e.palette.common.white,"& p,&>a span":{color:e.palette.common.white}},button:{padding:e.spacing(1)},newButton:{color:e.palette.primary.main},deleteButton:{color:e.palette.primary.delete}}}),{withTheme:!0})((function(e){var t=e.classes,a=Object(n.useState)({}),i=Object(c.a)(a,2),o=i[0],s=i[1],d=at({model:ws.name,reload:o}),l=d.list,m=d.handleDelete,u=d.deleteLoading,p=d.findLoading,f=d.errors,h=Xe({model:ws.name,data:o,fields:Os}),y=h.formItem,g=h.newItem,v=h.handleChange,x=h.handleSubmit,w=h.loading;Object(n.useEffect)((function(){s({})}),[g]);var j=u||p||w,k=!p&&!f&&0===l.length;return r.a.createElement(Un.a,{className:t.table},r.a.createElement(Wn.a,null,r.a.createElement(Ln.a,null,O(Os,(function(e){var a=e.text;return r.a.createElement(zn.a,{key:a,className:t.header},r.a.createElement(ya.a,{variant:"body1"},a))})),r.a.createElement(zn.a,{className:t.header}))),r.a.createElement(Yn.a,null,r.a.createElement(Ln.a,null,O(Os,(function(e){return r.a.createElement(zn.a,{key:e.text},r.a.createElement(hr,{row:e,formItem:y,handleChange:v}))})),r.a.createElement(zn.a,null,r.a.createElement(na.a,{title:"Criar"},r.a.createElement(ta.a,{"aria-label":"Criar",className:b()(t.button,t.newButton),onClick:x},r.a.createElement(ia.a,null,"add_icon"))))),(j||f||k)&&r.a.createElement(Ln.a,{className:t.row},r.a.createElement(zn.a,{colSpan:Os.length+1},j&&r.a.createElement(ka,null),f&&r.a.createElement(sn,{errors:f}),k&&r.a.createElement(wa,null))),!p&&O(l,(function(e){return r.a.createElement(Ln.a,{key:e.id},O(Os,(function(t){return r.a.createElement(zn.a,{key:t.text},r.a.createElement(ya.a,{variant:"body2"},E(e,t.identity)))})),r.a.createElement(zn.a,null,r.a.createElement(na.a,{title:"Deletar"},r.a.createElement(ta.a,{"aria-label":"Deletar",className:b()(t.button,t.deleteButton),onClick:m(e)},r.a.createElement(ia.a,null,"delete")))))}))))})),ks=lt(mt((function(e){return{}}),{withTheme:!0})((function(e){var t=e.history,a=(e.classes,e.data),i=void 0===a?{}:a,o=Object(n.useContext)(Je),c=pt(o.get("config.sensor.status.archived"),"value"),s=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.service("sensors").patch(i.id,{identity:"".concat(i.identity,"-ARQ").concat(Date.now()),sensorStatusId:c,companyId:null});case 2:return e.next=4,o.service("sensors").create({barcode:i.barcode,identity:i.identity,sensorStatusId:i.sensorStatusId});case 4:a=e.sent,t.push("/sysadmin/sensors/".concat(a.id));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("http://".concat(i.identity,".local:3030/sync_sensor")),a={sensorUUID:i.uuid,companyUUID:pt(i,"company.uuid")},t.search=new URLSearchParams(a),e.next=5,fetch(t);case 5:return e.next=7,e.sent.json();case 7:"OK"===e.sent.status&&alert("SYNC DONE!");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,i.id&&i.sensorStatusId!==c&&i.companyId&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(oa,{text:"Arquivar",icon:"archive",onClick:s})),i.id&&i.sensorStatusId!==c&&i.companyId&&r.a.createElement(Gt.a,{item:!0},r.a.createElement(oa,{text:"Sync",icon:"sync",onClick:d})))}))),Ns=mt((function(e){return{status:{marginLeft:20,height:30,width:30,borderRadius:"50%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=Qt({ip:(void 0===a?{}:a).ip}).status;return r.a.createElement("div",{className:t.status,style:{background:n}})})),Ss=mt((function(e){return{status:{marginLeft:20,height:30,width:30,borderRadius:"50%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,i=void 0===a?{}:a,o=Object(n.useContext)(Je),s=Ft({client:o,type:"active"}),d=Ft({client:o,type:"noScheduledStop"}),l=Ft({client:o,type:"scheduledStop"}),m=Pt({data:o.get("actionType.".concat(s)),path:"color"}),u=Pt({data:o.get("actionType.".concat(d)),path:"color"}),p=Pt({data:o.get("actionType.".concat(l)),path:"color"}),h=Object(n.useState)(p),y=Object(c.a)(h,2),g=y[0],v=y[1];return Object(n.useEffect)((function(){(function(){var e=Object(Ne.a)(ke.a.mark((function e(){var t,a,n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.service("production_order_events").find({query:{si:i.id,"r.0":{$exists:!0},sd:{$gte:f()().startOf("day").toDate()},$sort:{sd:-1},$limit:1}});case 2:if(t=e.sent,(a=t.data).length){e.next=6;break}return e.abrupt("return",v(p));case 6:if(!((n=f()().diff(f()(pt(a,"0.ed")),"minutes"))>30)){e.next=11;break}return e.abrupt("return",v(p));case 11:if(!(n>15)){e.next=15;break}return e.abrupt("return",v(u));case 15:return e.abrupt("return",v(m));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,i.id,m,u,p]),r.a.createElement("div",{className:t.status,style:{background:g}})})),Is={metadata:{name:"sensors",icon:"memory",listPath:"/sysadmin/sensors",formPath:"/sysadmin/sensors",paramsProp:"sensorId",newItemText:"Novo Sensor"},list:[{text:"Eventos",identity:"statusEvents",customContent:{dontFilter:!0},customData:function(e){var t=Object.assign({},e);return r.a.createElement(Ss,t)}},{text:"Online",identity:"statusSensor",customContent:{dontFilter:!0},customData:function(e){var t=Object.assign({},e);return r.a.createElement(Ns,t)}},{text:"Cliente",identity:"company.fantasyName",model:{service:"companies",identity:"companyId",customName:function(e){var t=e.data;return(void 0===t?{}:t).fantasyName}}},{text:"Cod Sensor",identity:"identity",filter:{type:"string"}},{text:"UUID",identity:"uuid",filter:{type:"string"}},{text:"IP",identity:"ip",filter:{type:"string"}},{text:"Status",identity:"sensor_status.name",model:{service:"sensor_statuses",identity:"sensorStatusId"}}],form:[[{text:"UUID",identity:"uuid",variants:"display fullWidth",show:{ifThis:"id"},type:"string"}],[{text:"Cod Barra",identity:"barcode",type:"string"},{text:"Cod Sensor",identity:"identity",autoFocus:!0,required:!0,type:"string"},{text:"Status",identity:"sensorStatusId",required:!0,model:"sensor_statuses",defaultValue:{config:"sensor.status.init"}}],[{text:"Cliente",identity:"companyId",type:"string",model:{service:"companies",customContent:{queryField:"fantasyName"},customName:function(e){var t=e.data,a=void 0===t?{}:t;return a?a.fantasyName:""}}}],[{text:"MAC",identity:"mac",variants:"display",readOnly:!0,show:{ifThis:"id"},type:"string"},{text:"IP",identity:"ip",variants:"display",readOnly:!0,show:{ifThis:"id"},type:"string"},{text:"Data Edic\xe3o",identity:"updateDate",readOnly:!0,show:{ifThis:"id"},type:"string",defaultValue:{customValue:function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var a,n,r,i,o;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,n=void 0===a?{}:a,r=t.field,i=t.handleChange,o=f()(pt(n,"updatedAt")).format("DD/MM/YYYY HH:mm"),i({target:{name:r.identity,value:o}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]],links:[{text:"Sensores",href:"/sysadmin/sensors"}],query:{$sort:{identity:1}},customContent:{customBreadCrumbsName:function(e){var t=e.data,a=void 0===t?{}:t;return"".concat(a.identity?"".concat(a.identity," - "):"").concat(a.name)}},customActions:function(e){var t=e.isForm,a=Object(ea.a)(e,["isForm"]);return t&&r.a.createElement(ks,a)}},Cs=mt((function(e){return{color:{marginLeft:20,height:30,width:30,borderRadius:"50%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=void 0===a?{}:a;return r.a.createElement("div",{className:t.color,style:{background:Pt({data:{data:n},path:"data"})}})})),As={metadata:{name:"colors",listPath:"/sysadmin/master-data/colors",formPath:"/sysadmin/master-data/colors",paramsProp:"colorId",newItemText:"Novo Cor"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}},{text:"Cor",identity:"color",customData:function(e){var t=Object.assign({},e);return r.a.createElement(Cs,t)}},{text:"Cod RGB",identity:"rgb",filter:{type:"string"}},{text:"Cod HSV",identity:"hsv",filter:{type:"string"}},{text:"Cod HEX",identity:"hex",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}],[{text:"Cod RGB",identity:"rgb",type:"string"},{text:"Cod HSV",identity:"hsv",type:"string"},{text:"Cod HEX",identity:"hex",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Cores",href:"/sysadmin/master-data/colors"}],query:{$sort:{name:1}}},Ds={metadata:{name:"measurement_units",listPath:"/sysadmin/master-data/measurement-units",formPath:"/sysadmin/master-data/measurement-units",paramsProp:"measurementUnitId",newItemText:"Nova Unidade de Medida"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}},{text:"Tipo",identity:"type",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"Tipo",identity:"type",required:!0,enum:["distance","force","frequency","mass","quantity","temperature","time","other"]}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Unidades de Medida",href:"/sysadmin/master-data/measurement-units"}]},Ts={metadata:{name:"plant_statuses",listPath:"/sysadmin/master-data/plant-statuses",formPath:"/sysadmin/master-data/plant-statuses",paramsProp:"plantStatusId",newItemText:"Novo Status de Local"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Locais",href:"/sysadmin/master-data/plant-statuses"}]},Ps={metadata:{name:"production_order_statuses",listPath:"/sysadmin/master-data/production-order-statuses",formPath:"/sysadmin/master-data/production-order-statuses",paramsProp:"productionOrderStatusId",newItemText:"Novo Status de Ordem de Produ\xe7\xe3o"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Ordem de Produ\xe7\xe3o",href:"/sysadmin/master-data/production-order-statuses"}]},Ms=mt((function(e){return{color:{marginLeft:20,height:30,width:30,borderRadius:"50%"}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.data,n=void 0===a?{}:a;return r.a.createElement("div",{className:t.color,style:{background:Pt({data:n,path:"color"})}})})),Fs=yn,qs=Is,Rs=As,_s=Ds,Us=Ts,Ws=Ps,Ls={metadata:{name:"production_order_action_types",listPath:"/sysadmin/master-data/production-order-action-types",formPath:"/sysadmin/master-data/production-order-action-types",paramsProp:"productionOrderActionTypeId",newItemText:"Novo Tipo de Evento de Ordem de Produ\xe7\xe3o"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}},{text:"Cor",identity:"color",model:{service:"colors",identity:"colorId"},customData:function(e){var t=Object.assign({},e);return r.a.createElement(Ms,t)}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}],[{text:"Cor",identity:"colorId",required:!0,model:"colors"},{text:"Evento do Sistema",identity:"isSystemEvent",type:"boolean"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Tipos de Eventos de Ordem de Produ\xe7\xe3o",href:"/sysadmin/master-data/production-order-action-types"}]},zs={metadata:{name:"company_statuses",listPath:"/sysadmin/master-data/company-statuses",formPath:"/sysadmin/master-data/company-statuses",paramsProp:"companyStatusId",newItemText:"Novo Status de Cliente"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Clientes",href:"/sysadmin/master-data/company-statuses"}]},Ys={metadata:{name:"machine_statuses",listPath:"/sysadmin/master-data/machine-statuses",formPath:"/sysadmin/master-data/machine-statuses",paramsProp:"machineStatusId",newItemText:"Novo Status de M\xe1quina"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de M\xe1quinas",href:"/sysadmin/master-data/machine-statuses"}]},Bs={metadata:{name:"mold_statuses",listPath:"/sysadmin/master-data/mold-statuses",formPath:"/sysadmin/master-data/mold-statuses",paramsProp:"moldStatusId",newItemText:"Novo Status de Molde"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Moldes",href:"/sysadmin/master-data/mold-statuses"}]},Hs={metadata:{name:"product_statuses",listPath:"/sysadmin/master-data/product-statuses",formPath:"/sysadmin/master-data/product-statuses",paramsProp:"productStatusId",newItemText:"Novo Status de Produto"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Produtos",href:"/sysadmin/master-data/product-statuses"}]},Vs={metadata:{name:"sensor_statuses",listPath:"/sysadmin/master-data/sensor-statuses",formPath:"/sysadmin/master-data/sensor-statuses",paramsProp:"sensorStatusId",newItemText:"Novo Status de Sensor"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Sensores",href:"/sysadmin/master-data/sensor-statuses"}]},Js={metadata:{name:"roles",listPath:"/sysadmin/master-data/roles",formPath:"/sysadmin/master-data/roles",paramsProp:"roleId",newItemText:"Novo Perfil"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}},{text:"Status",identity:"role_status.name",model:{service:"role_statuses",identity:"roleStatusId"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"},{text:"Status",identity:"roleStatusId",required:!0,model:"role_statuses",defaultValue:{config:"role.status.init"}}],[{text:"Criar/Modificar Cadastros",identity:"writeMasterData",type:"boolean"}],[{text:"Visualizar Cadastros",identity:"readMasterData",type:"boolean"}],[{text:"Acesso a Dados Administra\xe7\xe3o",identity:"crudAdminData",type:"boolean"}],[{text:"Cadastro Usuario/Perfil",identity:"crudUserData",type:"boolean"}],[{text:"Criar Ordens Produ\xe7\xe3o",identity:"writeActiveProductionOrders",type:"boolean"}],[{text:"Criar Ordens N\xe3o Produ\xe7\xe3o",identity:"writeScheduledStopProductionOrders",type:"boolean"}],[{text:"Liberar Ordens (sequenciaador)",identity:"openProductionOrders",type:"boolean"}],[{text:"Apontar Eventos Ordem",identity:"writeProductionOrderEvents",type:"boolean"}],[{text:"Modificar Eventos Ordem",identity:"editProductionOrderEvents",type:"boolean"}],[{text:"Visualizar Ordens",identity:"readProductionOrders",type:"boolean"}],[{text:"Visualizar Relatorios",identity:"readProductionOrderReports",type:"boolean"}],[{text:"Visualizar Refugo",identity:"readPendingWaste",type:"boolean"}],[{text:"Apontar Refugo",identity:"writePendingWaste",type:"boolean"}],[{text:"Modificar Refugo",identity:"editPendingWaste",type:"boolean"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Perfis",href:"/sysadmin/master-data/roles"}],query:{name:{$nin:["sysadmin"]},$sort:{name:1}}},Qs={metadata:{name:"role_statuses",listPath:"/sysadmin/master-data/role-statuses",formPath:"/sysadmin/master-data/role-statuses",paramsProp:"roleStatusId",newItemText:"Novo Status de Fun\xe7\xe3o do Usu\xe1rio"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Fun\xe7\xf5es do Usu\xe1rio",href:"/sysadmin/master-data/role-statuses"}]},$s={metadata:{name:"user_statuses",listPath:"/sysadmin/master-data/user-statuses",formPath:"/sysadmin/master-data/user-statuses",paramsProp:"userStatusId",newItemText:"Novo Status de Usu\xe1rio"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Usu\xe1rios",href:"/sysadmin/master-data/user-statuses"}]},Gs={metadata:{name:"ticket_statuses",listPath:"/sysadmin/master-data/ticket-statuses",formPath:"/sysadmin/master-data/ticket-statuses",paramsProp:"ticketStatusId",newItemText:"Novo Status do Ticket"},list:[{text:"Nome",identity:"name",filter:{type:"string"}},{text:"Descri\xe7\xe3o",identity:"description",filter:{type:"string"}}],form:[[{text:"Nome",identity:"name",autoFocus:!0,required:!0,type:"string"},{text:"Descri\xe7\xe3o",identity:"description",type:"string"}]],links:[{text:"Cadastros",href:"/sysadmin/master-data"},{text:"Status de Ticket",href:"/sysadmin/master-data/ticket-statuses"}]},Xs=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,null,r.a.createElement(zi,{exact:!0,path:"/sysadmin",component:function(){return r.a.createElement(Ho,{title:"Sys Admin"})}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/companies",component:function(){return Bi(Fs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/companies/:companyId",component:function(){return Hi(Fs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/companies/:companyId/production-history",component:ms}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/sensors",component:function(){return Bi(qs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/sensors/:sensorId",component:function(){return Hi(qs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/colors",component:function(){return Bi(Rs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/colors/:colorId",component:function(){return Hi(Rs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/configs",component:js}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data",component:Es}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/measurement-units",component:function(){return Bi(_s)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/measurement-units/:measurementUnitId",component:function(){return Hi(_s)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/plant-statuses",component:function(){return Bi(Us)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/plant-statuses/:plantStatusId",component:function(){return Hi(Us)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/production-order-statuses",component:function(){return Bi(Ws)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/production-order-statuses/:productionOrderStatusId",component:function(){return Hi(Ws)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/production-order-action-types",component:function(){return Bi(Ls)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/production-order-action-types/:productionOrderActionTypeId",component:function(){return Hi(Ls)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/company-statuses",component:function(){return Bi(zs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/company-statuses/:companyStatusId",component:function(){return Hi(zs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/machine-statuses",component:function(){return Bi(Ys)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/machine-statuses/:machineStatusId",component:function(){return Hi(Ys)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/mold-statuses",component:function(){return Bi(Bs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/mold-statuses/:moldStatusId",component:function(){return Hi(Bs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/product-statuses",component:function(){return Bi(Hs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/product-statuses/:productStatusId",component:function(){return Hi(Hs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/sensor-statuses",component:function(){return Bi(Vs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/sensor-statuses/:sensorStatusId",component:function(){return Hi(Vs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/roles",component:function(){return Bi(Js)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/roles/:roleId",component:function(){return Hi(Js)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/role-statuses",component:function(){return Bi(Qs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/role-statuses/:roleStatusId",component:function(){return Hi(Qs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/user-statuses",component:function(){return Bi($s)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/user-statuses/:userStatusId",component:function(){return Hi($s)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/ticket-statuses",component:function(){return Bi(Gs)}}),r.a.createElement(zi,{exact:!0,path:"/sysadmin/master-data/ticket-statuses/:ticketStatusId",component:function(){return Hi(Gs)}}),r.a.createElement(zi,{default:!0,component:Vo})))};f.a.locale("pt-br");var Zs=function(){var e=Object(n.useState)("true"===localStorage.getItem("DarkTheme")),t=Object(c.a)(e,2),a=t[0],i=t[1];Object(n.useEffect)((function(){localStorage.setItem("DarkTheme",a)}),[a]);var o=Object(d.a)({typography:{useNextVariants:!0},palette:{type:a?"dark":"light",primary:{main:"#424242",header:"#616161",table:"rgba(0, 0, 0, .14)",form:"rgba(0, 0, 0, .14)",disabled:"rgba(0, 0, 0, .14)",delete:"#db2828"},secondary:{main:"#ffb300"}}});return r.a.createElement(l.a,{theme:o},r.a.createElement(l.a,{theme:o},r.a.createElement(m.a,{utils:u.a},r.a.createElement(s.a,null),r.a.createElement(ot,null,r.a.createElement(Oa.SnackbarProvider,{maxSnack:3},r.a.createElement(Wi,{swtichTheme:function(){return i((function(e){return!e}))},dark:a},r.a.createElement(dt,null,r.a.createElement(ct,{exact:!0,path:"/",component:function(){return r.a.createElement(Ho,{title:"MonitorProd"})}}),r.a.createElement(ct,{path:"/login/:companyUUID",component:mo}),r.a.createElement(ct,{path:"/master-data",component:ec}),r.a.createElement(ct,{path:"/administration",component:Sc}),r.a.createElement(ct,{path:"/dashboard",component:vs}),r.a.createElement(ct,{path:"/reports",component:vs}),r.a.createElement(ct,{path:"/sysadmin",component:Xs}),r.a.createElement(Yi,{path:"/help/home",component:bo}),r.a.createElement(Yi,{path:"/help/:wikiPageId",component:bo}),r.a.createElement(Yi,{exact:!0,path:"/support",component:Oo}),r.a.createElement(Yi,{exact:!0,path:"/support/:ticketId",component:Oo}),r.a.createElement(zi,{exact:!0,path:"/support/company/:companyId/ticket/:ticketId",component:Oo}),r.a.createElement(ct,{default:!0,component:Vo}))))))))},Ks=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ed(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),alert("Nova vers\xe3o est\xe1 dispon\xedvel! Por favor, feche todas as abas de monitorprod.com.br para usar a nova funcionalidade."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(608);o.a.render(r.a.createElement(Zs,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ks?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ed(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):ed(t,e)}))}}()}},[[374,1,2]]]);
//# sourceMappingURL=main.b10d1362.chunk.js.map